function ah(r,i){for(var o=0;o<i.length;o++){const c=i[o];if(typeof c!="string"&&!Array.isArray(c)){for(const u in c)if(u!=="default"&&!(u in r)){const f=Object.getOwnPropertyDescriptor(c,u);f&&Object.defineProperty(r,u,f.get?f:{enumerable:!0,get:()=>c[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();function Fd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tl={exports:{}},Ka={},nl={exports:{}},$e={};var Zu;function sh(){if(Zu)return $e;Zu=1;var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.iterator;function N(E){return E===null||typeof E!="object"?null:(E=w&&E[w]||E["@@iterator"],typeof E=="function"?E:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function P(E,H,je){this.props=E,this.context=H,this.refs=M,this.updater=je||j}P.prototype.isReactComponent={},P.prototype.setState=function(E,H){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,H,"setState")},P.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function B(){}B.prototype=P.prototype;function F(E,H,je){this.props=E,this.context=H,this.refs=M,this.updater=je||j}var _=F.prototype=new B;_.constructor=F,S(_,P.prototype),_.isPureReactComponent=!0;var L=Array.isArray,Q=Object.prototype.hasOwnProperty,Z={current:null},ue={key:!0,ref:!0,__self:!0,__source:!0};function Me(E,H,je){var Ce,Ae={},_e=null,ee=null;if(H!=null)for(Ce in H.ref!==void 0&&(ee=H.ref),H.key!==void 0&&(_e=""+H.key),H)Q.call(H,Ce)&&!ue.hasOwnProperty(Ce)&&(Ae[Ce]=H[Ce]);var me=arguments.length-2;if(me===1)Ae.children=je;else if(1<me){for(var se=Array(me),fe=0;fe<me;fe++)se[fe]=arguments[fe+2];Ae.children=se}if(E&&E.defaultProps)for(Ce in me=E.defaultProps,me)Ae[Ce]===void 0&&(Ae[Ce]=me[Ce]);return{$$typeof:r,type:E,key:_e,ref:ee,props:Ae,_owner:Z.current}}function Re(E,H){return{$$typeof:r,type:E.type,key:H,ref:E.ref,props:E.props,_owner:E._owner}}function he(E){return typeof E=="object"&&E!==null&&E.$$typeof===r}function ie(E){var H={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(je){return H[je]})}var le=/\/+/g;function de(E,H){return typeof E=="object"&&E!==null&&E.key!=null?ie(""+E.key):H.toString(36)}function Ne(E,H,je,Ce,Ae){var _e=typeof E;(_e==="undefined"||_e==="boolean")&&(E=null);var ee=!1;if(E===null)ee=!0;else switch(_e){case"string":case"number":ee=!0;break;case"object":switch(E.$$typeof){case r:case i:ee=!0}}if(ee)return ee=E,Ae=Ae(ee),E=Ce===""?"."+de(ee,0):Ce,L(Ae)?(je="",E!=null&&(je=E.replace(le,"$&/")+"/"),Ne(Ae,H,je,"",function(fe){return fe})):Ae!=null&&(he(Ae)&&(Ae=Re(Ae,je+(!Ae.key||ee&&ee.key===Ae.key?"":(""+Ae.key).replace(le,"$&/")+"/")+E)),H.push(Ae)),1;if(ee=0,Ce=Ce===""?".":Ce+":",L(E))for(var me=0;me<E.length;me++){_e=E[me];var se=Ce+de(_e,me);ee+=Ne(_e,H,je,se,Ae)}else if(se=N(E),typeof se=="function")for(E=se.call(E),me=0;!(_e=E.next()).done;)_e=_e.value,se=Ce+de(_e,me++),ee+=Ne(_e,H,je,se,Ae);else if(_e==="object")throw H=String(E),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ee}function Ve(E,H,je){if(E==null)return E;var Ce=[],Ae=0;return Ne(E,Ce,"","",function(_e){return H.call(je,_e,Ae++)}),Ce}function ve(E){if(E._status===-1){var H=E._result;H=H(),H.then(function(je){(E._status===0||E._status===-1)&&(E._status=1,E._result=je)},function(je){(E._status===0||E._status===-1)&&(E._status=2,E._result=je)}),E._status===-1&&(E._status=0,E._result=H)}if(E._status===1)return E._result.default;throw E._result}var xe={current:null},K={transition:null},ce={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:K,ReactCurrentOwner:Z};function ae(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:Ve,forEach:function(E,H,je){Ve(E,function(){H.apply(this,arguments)},je)},count:function(E){var H=0;return Ve(E,function(){H++}),H},toArray:function(E){return Ve(E,function(H){return H})||[]},only:function(E){if(!he(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},$e.Component=P,$e.Fragment=o,$e.Profiler=u,$e.PureComponent=F,$e.StrictMode=c,$e.Suspense=m,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,$e.act=ae,$e.cloneElement=function(E,H,je){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var Ce=S({},E.props),Ae=E.key,_e=E.ref,ee=E._owner;if(H!=null){if(H.ref!==void 0&&(_e=H.ref,ee=Z.current),H.key!==void 0&&(Ae=""+H.key),E.type&&E.type.defaultProps)var me=E.type.defaultProps;for(se in H)Q.call(H,se)&&!ue.hasOwnProperty(se)&&(Ce[se]=H[se]===void 0&&me!==void 0?me[se]:H[se])}var se=arguments.length-2;if(se===1)Ce.children=je;else if(1<se){me=Array(se);for(var fe=0;fe<se;fe++)me[fe]=arguments[fe+2];Ce.children=me}return{$$typeof:r,type:E.type,key:Ae,ref:_e,props:Ce,_owner:ee}},$e.createContext=function(E){return E={$$typeof:p,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:f,_context:E},E.Consumer=E},$e.createElement=Me,$e.createFactory=function(E){var H=Me.bind(null,E);return H.type=E,H},$e.createRef=function(){return{current:null}},$e.forwardRef=function(E){return{$$typeof:h,render:E}},$e.isValidElement=he,$e.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:ve}},$e.memo=function(E,H){return{$$typeof:y,type:E,compare:H===void 0?null:H}},$e.startTransition=function(E){var H=K.transition;K.transition={};try{E()}finally{K.transition=H}},$e.unstable_act=ae,$e.useCallback=function(E,H){return xe.current.useCallback(E,H)},$e.useContext=function(E){return xe.current.useContext(E)},$e.useDebugValue=function(){},$e.useDeferredValue=function(E){return xe.current.useDeferredValue(E)},$e.useEffect=function(E,H){return xe.current.useEffect(E,H)},$e.useId=function(){return xe.current.useId()},$e.useImperativeHandle=function(E,H,je){return xe.current.useImperativeHandle(E,H,je)},$e.useInsertionEffect=function(E,H){return xe.current.useInsertionEffect(E,H)},$e.useLayoutEffect=function(E,H){return xe.current.useLayoutEffect(E,H)},$e.useMemo=function(E,H){return xe.current.useMemo(E,H)},$e.useReducer=function(E,H,je){return xe.current.useReducer(E,H,je)},$e.useRef=function(E){return xe.current.useRef(E)},$e.useState=function(E){return xe.current.useState(E)},$e.useSyncExternalStore=function(E,H,je){return xe.current.useSyncExternalStore(E,H,je)},$e.useTransition=function(){return xe.current.useTransition()},$e.version="18.3.1",$e}var ed;function jl(){return ed||(ed=1,nl.exports=sh()),nl.exports}var td;function ih(){if(td)return Ka;td=1;var r=jl(),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(h,m,y){var x,w={},N=null,j=null;y!==void 0&&(N=""+y),m.key!==void 0&&(N=""+m.key),m.ref!==void 0&&(j=m.ref);for(x in m)c.call(m,x)&&!f.hasOwnProperty(x)&&(w[x]=m[x]);if(h&&h.defaultProps)for(x in m=h.defaultProps,m)w[x]===void 0&&(w[x]=m[x]);return{$$typeof:i,type:h,key:N,ref:j,props:w,_owner:u.current}}return Ka.Fragment=o,Ka.jsx=p,Ka.jsxs=p,Ka}var nd;function oh(){return nd||(nd=1,tl.exports=ih()),tl.exports}var s=oh(),v=jl();const Bd=Fd(v),Ud=ah({__proto__:null,default:Bd},[v]);var si={},rl={exports:{}},cn={},al={exports:{}},sl={};var rd;function lh(){return rd||(rd=1,(function(r){function i(K,ce){var ae=K.length;K.push(ce);e:for(;0<ae;){var E=ae-1>>>1,H=K[E];if(0<u(H,ce))K[E]=ce,K[ae]=H,ae=E;else break e}}function o(K){return K.length===0?null:K[0]}function c(K){if(K.length===0)return null;var ce=K[0],ae=K.pop();if(ae!==ce){K[0]=ae;e:for(var E=0,H=K.length,je=H>>>1;E<je;){var Ce=2*(E+1)-1,Ae=K[Ce],_e=Ce+1,ee=K[_e];if(0>u(Ae,ae))_e<H&&0>u(ee,Ae)?(K[E]=ee,K[_e]=ae,E=_e):(K[E]=Ae,K[Ce]=ae,E=Ce);else if(_e<H&&0>u(ee,ae))K[E]=ee,K[_e]=ae,E=_e;else break e}}return ce}function u(K,ce){var ae=K.sortIndex-ce.sortIndex;return ae!==0?ae:K.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var p=Date,h=p.now();r.unstable_now=function(){return p.now()-h}}var m=[],y=[],x=1,w=null,N=3,j=!1,S=!1,M=!1,P=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(K){for(var ce=o(y);ce!==null;){if(ce.callback===null)c(y);else if(ce.startTime<=K)c(y),ce.sortIndex=ce.expirationTime,i(m,ce);else break;ce=o(y)}}function L(K){if(M=!1,_(K),!S)if(o(m)!==null)S=!0,ve(Q);else{var ce=o(y);ce!==null&&xe(L,ce.startTime-K)}}function Q(K,ce){S=!1,M&&(M=!1,B(Me),Me=-1),j=!0;var ae=N;try{for(_(ce),w=o(m);w!==null&&(!(w.expirationTime>ce)||K&&!ie());){var E=w.callback;if(typeof E=="function"){w.callback=null,N=w.priorityLevel;var H=E(w.expirationTime<=ce);ce=r.unstable_now(),typeof H=="function"?w.callback=H:w===o(m)&&c(m),_(ce)}else c(m);w=o(m)}if(w!==null)var je=!0;else{var Ce=o(y);Ce!==null&&xe(L,Ce.startTime-ce),je=!1}return je}finally{w=null,N=ae,j=!1}}var Z=!1,ue=null,Me=-1,Re=5,he=-1;function ie(){return!(r.unstable_now()-he<Re)}function le(){if(ue!==null){var K=r.unstable_now();he=K;var ce=!0;try{ce=ue(!0,K)}finally{ce?de():(Z=!1,ue=null)}}else Z=!1}var de;if(typeof F=="function")de=function(){F(le)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Ve=Ne.port2;Ne.port1.onmessage=le,de=function(){Ve.postMessage(null)}}else de=function(){P(le,0)};function ve(K){ue=K,Z||(Z=!0,de())}function xe(K,ce){Me=P(function(){K(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_continueExecution=function(){S||j||(S=!0,ve(Q))},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return o(m)},r.unstable_next=function(K){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var ae=N;N=ce;try{return K()}finally{N=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ae=N;N=K;try{return ce()}finally{N=ae}},r.unstable_scheduleCallback=function(K,ce,ae){var E=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?E+ae:E):ae=E,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ae+H,K={id:x++,callback:ce,priorityLevel:K,startTime:ae,expirationTime:H,sortIndex:-1},ae>E?(K.sortIndex=ae,i(y,K),o(m)===null&&K===o(y)&&(M?(B(Me),Me=-1):M=!0,xe(L,ae-E))):(K.sortIndex=H,i(m,K),S||j||(S=!0,ve(Q))),K},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(K){var ce=N;return function(){var ae=N;N=ce;try{return K.apply(this,arguments)}finally{N=ae}}}})(sl)),sl}var ad;function ch(){return ad||(ad=1,al.exports=lh()),al.exports}var sd;function uh(){if(sd)return cn;sd=1;var r=jl(),i=ch();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,u={};function f(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(u[e]=t,e=0;e<t.length;e++)c.add(t[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function N(e){return m.call(w,e)?!0:m.call(x,e)?!1:y.test(e)?w[e]=!0:(x[e]=!0,!1)}function j(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,n,a){if(t===null||typeof t>"u"||j(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function M(e,t,n,a,l,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){P[e]=new M(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];P[t]=new M(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){P[e]=new M(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){P[e]=new M(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){P[e]=new M(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){P[e]=new M(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){P[e]=new M(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){P[e]=new M(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){P[e]=new M(e,5,!1,e.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function F(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(B,F);P[t]=new M(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(B,F);P[t]=new M(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(B,F);P[t]=new M(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){P[e]=new M(e,1,!1,e.toLowerCase(),null,!1,!1)}),P.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){P[e]=new M(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,t,n,a){var l=P.hasOwnProperty(t)?P[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,n,l,a)&&(n=null),a||l===null?N(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,a=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),Me=Symbol.for("react.strict_mode"),Re=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),ie=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),K=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,E;function H(e){if(E===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var je=!1;function Ce(e,t){if(!e||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var a=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){a=A}e.call(t.prototype)}else{try{throw Error()}catch(A){a=A}e()}}catch(A){if(A&&a&&typeof A.stack=="string"){for(var l=A.stack.split(`
`),d=a.stack.split(`
`),g=l.length-1,b=d.length-1;1<=g&&0<=b&&l[g]!==d[b];)b--;for(;1<=g&&0<=b;g--,b--)if(l[g]!==d[b]){if(g!==1||b!==1)do if(g--,b--,0>b||l[g]!==d[b]){var C=`
`+l[g].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=g&&0<=b);break}}}finally{je=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function Ae(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=Ce(e.type,!1),e;case 11:return e=Ce(e.type.render,!1),e;case 1:return e=Ce(e.type,!0),e;default:return""}}function _e(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ue:return"Fragment";case Z:return"Portal";case Re:return"Profiler";case Me:return"StrictMode";case de:return"Suspense";case Ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ie:return(e.displayName||"Context")+".Consumer";case he:return(e._context.displayName||"Context")+".Provider";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ve:return t=e.displayName||null,t!==null?t:_e(e.type)||"Memo";case ve:t=e._payload,e=e._init;try{return _e(e(t))}catch{}}return null}function ee(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(t);case 8:return t===Me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function me(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fe(e){var t=se(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function T(e){e._valueTracker||(e._valueTracker=fe(e))}function O(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=se(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function W(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oe(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fe(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=me(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ze(e,t){t=t.checked,t!=null&&_(e,"checked",t,!1)}function Le(e,t){Ze(e,t);var n=me(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,me(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oe(e,t,n){(t!=="number"||W(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var We=Array.isArray;function it(e,t,n,a){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&a&&(e[n].defaultSelected=!0)}else{for(n=""+me(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Bt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rt(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(o(92));if(We(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:me(n)}}function nt(e,t){var n=me(t.value),a=me(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function G(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Je(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Te,Be=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Te.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ct=["Webkit","ms","Moz","O"];Object.keys(qt).forEach(function(e){Ct.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qt[t]=qt[e]})});function Kt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qt.hasOwnProperty(e)&&qt[e]?(""+t).trim():t+"px"}function ot(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,l=Kt(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,l):e[n]=l}}var mt=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(e,t){if(t){if(mt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function Zt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ke=null;function gn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nt=null,jt=null,en=null;function Or(e){if(e=La(e)){if(typeof Nt!="function")throw Error(o(280));var t=e.stateNode;t&&(t=ws(t),Nt(e.stateNode,e.type,t))}}function $(e){jt?en?en.push(e):en=[e]:jt=e}function we(){if(jt){var e=jt,t=en;if(en=jt=null,Or(e),t)for(e=0;e<t.length;e++)Or(t[e])}}function Ge(e,t){return e(t)}function Ue(){}var wt=!1;function tn(e,t,n){if(wt)return e(t,n);wt=!0;try{return Ge(e,t,n)}finally{wt=!1,(jt!==null||en!==null)&&(Ue(),we())}}function Sn(e,t){var n=e.stateNode;if(n===null)return null;var a=ws(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Qt=!1;if(h)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Qt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Qt=!1}function Cn(e,t,n,a,l,d,g,b,C){var A=Array.prototype.slice.call(arguments,3);try{t.apply(n,A)}catch(X){this.onError(X)}}var Mn=!1,un=null,k=!1,I=null,U={onError:function(e){Mn=!0,un=e}};function J(e,t,n,a,l,d,g,b,C){Mn=!1,un=null,Cn.apply(U,arguments)}function ne(e,t,n,a,l,d,g,b,C){if(J.apply(this,arguments),Mn){if(Mn){var A=un;Mn=!1,un=null}else throw Error(o(198));k||(k=!0,I=A)}}function Se(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function He(e){if(Se(e)!==e)throw Error(o(188))}function ct(e){var t=e.alternate;if(!t){if(t=Se(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(l===null)break;var d=l.alternate;if(d===null){if(a=l.return,a!==null){n=a;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===n)return He(l),e;if(d===a)return He(l),t;d=d.sibling}throw Error(o(188))}if(n.return!==a.return)n=l,a=d;else{for(var g=!1,b=l.child;b;){if(b===n){g=!0,n=l,a=d;break}if(b===a){g=!0,a=l,n=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===n){g=!0,n=d,a=l;break}if(b===a){g=!0,a=d,n=l;break}b=b.sibling}if(!g)throw Error(o(189))}}if(n.alternate!==a)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function Mt(e){return e=ct(e),e!==null?rt(e):null}function rt(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rt(e);if(t!==null)return t;e=e.sibling}return null}var De=i.unstable_scheduleCallback,at=i.unstable_cancelCallback,st=i.unstable_shouldYield,It=i.unstable_requestPaint,tt=i.unstable_now,nn=i.unstable_getCurrentPriorityLevel,dn=i.unstable_ImmediatePriority,Pn=i.unstable_UserBlockingPriority,Vr=i.unstable_NormalPriority,wi=i.unstable_LowPriority,El=i.unstable_IdlePriority,ts=null,_n=null;function vf(e){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:bf,wf=Math.log,kf=Math.LN2;function bf(e){return e>>>=0,e===0?32:31-(wf(e)/kf|0)|0}var ns=64,rs=4194304;function ma(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function as(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,l=e.suspendedLanes,d=e.pingedLanes,g=n&268435455;if(g!==0){var b=g&~l;b!==0?a=ma(b):(d&=g,d!==0&&(a=ma(d)))}else g=n&~l,g!==0?a=ma(g):d!==0&&(a=ma(d));if(a===0)return 0;if(t!==0&&t!==a&&(t&l)===0&&(l=a&-a,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if((a&4)!==0&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-En(t),l=1<<n,a|=e[n],t&=~l;return a}function Nf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-En(d),b=1<<g,C=l[g];C===-1?((b&n)===0||(b&a)!==0)&&(l[g]=Nf(b,t)):C<=t&&(e.expiredLanes|=b),d&=~b}}function ki(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rl(){var e=ns;return ns<<=1,(ns&4194240)===0&&(ns=64),e}function bi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ga(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=n}function Sf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-En(n),d=1<<l;t[l]=0,a[l]=-1,e[l]=-1,n&=~d}}function Ni(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-En(n),l=1<<a;l&t|e[a]&t&&(e[a]|=t),n&=~l}}var lt=0;function Il(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Dl,ji,Ll,Tl,zl,Si=!1,ss=[],tr=null,nr=null,rr=null,xa=new Map,ya=new Map,ar=[],Cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":xa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(t.pointerId)}}function va(e,t,n,a,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:d,targetContainers:[l]},t!==null&&(t=La(t),t!==null&&ji(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Mf(e,t,n,a,l){switch(t){case"focusin":return tr=va(tr,e,t,n,a,l),!0;case"dragenter":return nr=va(nr,e,t,n,a,l),!0;case"mouseover":return rr=va(rr,e,t,n,a,l),!0;case"pointerover":var d=l.pointerId;return xa.set(d,va(xa.get(d)||null,e,t,n,a,l)),!0;case"gotpointercapture":return d=l.pointerId,ya.set(d,va(ya.get(d)||null,e,t,n,a,l)),!0}return!1}function _l(e){var t=Nr(e.target);if(t!==null){var n=Se(t);if(n!==null){if(t=n.tag,t===13){if(t=Ye(n),t!==null){e.blockedOn=t,zl(e.priority,function(){Ll(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Mi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Ke=a,n.target.dispatchEvent(a),Ke=null}else return t=La(n),t!==null&&ji(t),e.blockedOn=n,!1;t.shift()}return!0}function Ol(e,t,n){is(e)&&n.delete(t)}function Pf(){Si=!1,tr!==null&&is(tr)&&(tr=null),nr!==null&&is(nr)&&(nr=null),rr!==null&&is(rr)&&(rr=null),xa.forEach(Ol),ya.forEach(Ol)}function wa(e,t){e.blockedOn===t&&(e.blockedOn=null,Si||(Si=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Pf)))}function ka(e){function t(l){return wa(l,e)}if(0<ss.length){wa(ss[0],e);for(var n=1;n<ss.length;n++){var a=ss[n];a.blockedOn===e&&(a.blockedOn=null)}}for(tr!==null&&wa(tr,e),nr!==null&&wa(nr,e),rr!==null&&wa(rr,e),xa.forEach(t),ya.forEach(t),n=0;n<ar.length;n++)a=ar[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)_l(n),n.blockedOn===null&&ar.shift()}var Fr=L.ReactCurrentBatchConfig,os=!0;function Ef(e,t,n,a){var l=lt,d=Fr.transition;Fr.transition=null;try{lt=1,Ci(e,t,n,a)}finally{lt=l,Fr.transition=d}}function Rf(e,t,n,a){var l=lt,d=Fr.transition;Fr.transition=null;try{lt=4,Ci(e,t,n,a)}finally{lt=l,Fr.transition=d}}function Ci(e,t,n,a){if(os){var l=Mi(e,t,n,a);if(l===null)Gi(e,t,a,ls,n),Al(e,a);else if(Mf(l,e,t,n,a))a.stopPropagation();else if(Al(e,a),t&4&&-1<Cf.indexOf(e)){for(;l!==null;){var d=La(l);if(d!==null&&Dl(d),d=Mi(e,t,n,a),d===null&&Gi(e,t,a,ls,n),d===l)break;l=d}l!==null&&a.stopPropagation()}else Gi(e,t,a,null,n)}}var ls=null;function Mi(e,t,n,a){if(ls=null,e=gn(a),e=Nr(e),e!==null)if(t=Se(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ls=e,null}function Vl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nn()){case dn:return 1;case Pn:return 4;case Vr:case wi:return 16;case El:return 536870912;default:return 16}default:return 16}}var sr=null,Pi=null,cs=null;function Fl(){if(cs)return cs;var e,t=Pi,n=t.length,a,l="value"in sr?sr.value:sr.textContent,d=l.length;for(e=0;e<n&&t[e]===l[e];e++);var g=n-e;for(a=1;a<=g&&t[n-a]===l[d-a];a++);return cs=l.slice(e,1<a?1-a:void 0)}function us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function Bl(){return!1}function fn(e){function t(n,a,l,d,g){this._reactName=n,this._targetInst=l,this.type=a,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ds:Bl,this.isPropagationStopped=Bl,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),t}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=fn(Br),ba=ae({},Br,{view:0,detail:0}),If=fn(ba),Ri,Ii,Na,fs=ae({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(Ri=e.screenX-Na.screenX,Ii=e.screenY-Na.screenY):Ii=Ri=0,Na=e),Ri)},movementY:function(e){return"movementY"in e?e.movementY:Ii}}),Ul=fn(fs),Df=ae({},fs,{dataTransfer:0}),Lf=fn(Df),Tf=ae({},ba,{relatedTarget:0}),Di=fn(Tf),zf=ae({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),Af=fn(zf),_f=ae({},Br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Of=fn(_f),Vf=ae({},Br,{data:0}),Hl=fn(Vf),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uf[e])?!!t[e]:!1}function Li(){return Hf}var Gf=ae({},ba,{key:function(e){if(e.key){var t=Ff[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$f=fn(Gf),Wf=ae({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gl=fn(Wf),qf=ae({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),Kf=fn(qf),Qf=ae({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jf=fn(Qf),Yf=ae({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xf=fn(Yf),Zf=[9,13,27,32],Ti=h&&"CompositionEvent"in window,ja=null;h&&"documentMode"in document&&(ja=document.documentMode);var ep=h&&"TextEvent"in window&&!ja,$l=h&&(!Ti||ja&&8<ja&&11>=ja),Wl=" ",ql=!1;function Kl(e,t){switch(e){case"keyup":return Zf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ql(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function tp(e,t){switch(e){case"compositionend":return Ql(t);case"keypress":return t.which!==32?null:(ql=!0,Wl);case"textInput":return e=t.data,e===Wl&&ql?null:e;default:return null}}function np(e,t){if(Ur)return e==="compositionend"||!Ti&&Kl(e,t)?(e=Fl(),cs=Pi=sr=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $l&&t.locale!=="ko"?null:t.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rp[e.type]:t==="textarea"}function Yl(e,t,n,a){$(a),t=xs(t,"onChange"),0<t.length&&(n=new Ei("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Sa=null,Ca=null;function ap(e){mc(e,0)}function ps(e){var t=qr(e);if(O(t))return e}function sp(e,t){if(e==="change")return t}var Xl=!1;if(h){var zi;if(h){var Ai="oninput"in document;if(!Ai){var Zl=document.createElement("div");Zl.setAttribute("oninput","return;"),Ai=typeof Zl.oninput=="function"}zi=Ai}else zi=!1;Xl=zi&&(!document.documentMode||9<document.documentMode)}function ec(){Sa&&(Sa.detachEvent("onpropertychange",tc),Ca=Sa=null)}function tc(e){if(e.propertyName==="value"&&ps(Ca)){var t=[];Yl(t,Ca,e,gn(e)),tn(ap,t)}}function ip(e,t,n){e==="focusin"?(ec(),Sa=t,Ca=n,Sa.attachEvent("onpropertychange",tc)):e==="focusout"&&ec()}function op(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ps(Ca)}function lp(e,t){if(e==="click")return ps(t)}function cp(e,t){if(e==="input"||e==="change")return ps(t)}function up(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rn=typeof Object.is=="function"?Object.is:up;function Ma(e,t){if(Rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var l=n[a];if(!m.call(t,l)||!Rn(e[l],t[l]))return!1}return!0}function nc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rc(e,t){var n=nc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nc(n)}}function ac(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ac(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sc(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=W(e.document)}return t}function _i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dp(e){var t=sc(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ac(n.ownerDocument.documentElement,n)){if(a!==null&&_i(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,d=Math.min(a.start,l);a=a.end===void 0?d:Math.min(a.end,l),!e.extend&&d>a&&(l=a,a=d,d=l),l=rc(n,d);var g=rc(n,a);l&&g&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fp=h&&"documentMode"in document&&11>=document.documentMode,Hr=null,Oi=null,Pa=null,Vi=!1;function ic(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vi||Hr==null||Hr!==W(a)||(a=Hr,"selectionStart"in a&&_i(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Pa&&Ma(Pa,a)||(Pa=a,a=xs(Oi,"onSelect"),0<a.length&&(t=new Ei("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Hr)))}function hs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gr={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionend:hs("Transition","TransitionEnd")},Fi={},oc={};h&&(oc=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ms(e){if(Fi[e])return Fi[e];if(!Gr[e])return e;var t=Gr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oc)return Fi[e]=t[n];return e}var lc=ms("animationend"),cc=ms("animationiteration"),uc=ms("animationstart"),dc=ms("transitionend"),fc=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){fc.set(e,t),f(t,[e])}for(var Bi=0;Bi<pc.length;Bi++){var Ui=pc[Bi],pp=Ui.toLowerCase(),hp=Ui[0].toUpperCase()+Ui.slice(1);ir(pp,"on"+hp)}ir(lc,"onAnimationEnd"),ir(cc,"onAnimationIteration"),ir(uc,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(dc,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function hc(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,ne(a,t,void 0,e),e.currentTarget=null}function mc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],l=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var g=a.length-1;0<=g;g--){var b=a[g],C=b.instance,A=b.currentTarget;if(b=b.listener,C!==d&&l.isPropagationStopped())break e;hc(l,b,A),d=C}else for(g=0;g<a.length;g++){if(b=a[g],C=b.instance,A=b.currentTarget,b=b.listener,C!==d&&l.isPropagationStopped())break e;hc(l,b,A),d=C}}}if(k)throw e=I,k=!1,I=null,e}function dt(e,t){var n=t[Ji];n===void 0&&(n=t[Ji]=new Set);var a=e+"__bubble";n.has(a)||(gc(t,e,2,!1),n.add(a))}function Hi(e,t,n){var a=0;t&&(a|=4),gc(n,e,a,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Ra(e){if(!e[gs]){e[gs]=!0,c.forEach(function(n){n!=="selectionchange"&&(mp.has(n)||Hi(n,!1,e),Hi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,Hi("selectionchange",!1,t))}}function gc(e,t,n,a){switch(Vl(t)){case 1:var l=Ef;break;case 4:l=Rf;break;default:l=Ci}n=l.bind(null,t,n,e),l=void 0,!Qt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Gi(e,t,n,a,l){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var b=a.stateNode.containerInfo;if(b===l||b.nodeType===8&&b.parentNode===l)break;if(g===4)for(g=a.return;g!==null;){var C=g.tag;if((C===3||C===4)&&(C=g.stateNode.containerInfo,C===l||C.nodeType===8&&C.parentNode===l))return;g=g.return}for(;b!==null;){if(g=Nr(b),g===null)return;if(C=g.tag,C===5||C===6){a=d=g;continue e}b=b.parentNode}}a=a.return}tn(function(){var A=d,X=gn(n),te=[];e:{var Y=fc.get(e);if(Y!==void 0){var pe=Ei,ye=e;switch(e){case"keypress":if(us(n)===0)break e;case"keydown":case"keyup":pe=$f;break;case"focusin":ye="focus",pe=Di;break;case"focusout":ye="blur",pe=Di;break;case"beforeblur":case"afterblur":pe=Di;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Kf;break;case lc:case cc:case uc:pe=Af;break;case dc:pe=Jf;break;case"scroll":pe=If;break;case"wheel":pe=Xf;break;case"copy":case"cut":case"paste":pe=Of;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Gl}var ke=(t&4)!==0,St=!ke&&e==="scroll",D=ke?Y!==null?Y+"Capture":null:Y;ke=[];for(var R=A,z;R!==null;){z=R;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,D!==null&&(re=Sn(R,D),re!=null&&ke.push(Ia(R,re,z)))),St)break;R=R.return}0<ke.length&&(Y=new pe(Y,ye,null,n,X),te.push({event:Y,listeners:ke}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",Y&&n!==Ke&&(ye=n.relatedTarget||n.fromElement)&&(Nr(ye)||ye[Hn]))break e;if((pe||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,pe?(ye=n.relatedTarget||n.toElement,pe=A,ye=ye?Nr(ye):null,ye!==null&&(St=Se(ye),ye!==St||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(pe=null,ye=A),pe!==ye)){if(ke=Ul,re="onMouseLeave",D="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ke=Gl,re="onPointerLeave",D="onPointerEnter",R="pointer"),St=pe==null?Y:qr(pe),z=ye==null?Y:qr(ye),Y=new ke(re,R+"leave",pe,n,X),Y.target=St,Y.relatedTarget=z,re=null,Nr(X)===A&&(ke=new ke(D,R+"enter",ye,n,X),ke.target=z,ke.relatedTarget=St,re=ke),St=re,pe&&ye)t:{for(ke=pe,D=ye,R=0,z=ke;z;z=$r(z))R++;for(z=0,re=D;re;re=$r(re))z++;for(;0<R-z;)ke=$r(ke),R--;for(;0<z-R;)D=$r(D),z--;for(;R--;){if(ke===D||D!==null&&ke===D.alternate)break t;ke=$r(ke),D=$r(D)}ke=null}else ke=null;pe!==null&&xc(te,Y,pe,ke,!1),ye!==null&&St!==null&&xc(te,St,ye,ke,!0)}}e:{if(Y=A?qr(A):window,pe=Y.nodeName&&Y.nodeName.toLowerCase(),pe==="select"||pe==="input"&&Y.type==="file")var be=sp;else if(Jl(Y))if(Xl)be=cp;else{be=op;var Pe=ip}else(pe=Y.nodeName)&&pe.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(be=lp);if(be&&(be=be(e,A))){Yl(te,be,n,X);break e}Pe&&Pe(e,Y,A),e==="focusout"&&(Pe=Y._wrapperState)&&Pe.controlled&&Y.type==="number"&&Oe(Y,"number",Y.value)}switch(Pe=A?qr(A):window,e){case"focusin":(Jl(Pe)||Pe.contentEditable==="true")&&(Hr=Pe,Oi=A,Pa=null);break;case"focusout":Pa=Oi=Hr=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,ic(te,n,X);break;case"selectionchange":if(fp)break;case"keydown":case"keyup":ic(te,n,X)}var Ee;if(Ti)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ur?Kl(e,n)&&(ze="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ze="onCompositionStart");ze&&($l&&n.locale!=="ko"&&(Ur||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ur&&(Ee=Fl()):(sr=X,Pi="value"in sr?sr.value:sr.textContent,Ur=!0)),Pe=xs(A,ze),0<Pe.length&&(ze=new Hl(ze,e,null,n,X),te.push({event:ze,listeners:Pe}),Ee?ze.data=Ee:(Ee=Ql(n),Ee!==null&&(ze.data=Ee)))),(Ee=ep?tp(e,n):np(e,n))&&(A=xs(A,"onBeforeInput"),0<A.length&&(X=new Hl("onBeforeInput","beforeinput",null,n,X),te.push({event:X,listeners:A}),X.data=Ee))}mc(te,t)})}function Ia(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xs(e,t){for(var n=t+"Capture",a=[];e!==null;){var l=e,d=l.stateNode;l.tag===5&&d!==null&&(l=d,d=Sn(e,n),d!=null&&a.unshift(Ia(e,d,l)),d=Sn(e,t),d!=null&&a.push(Ia(e,d,l))),e=e.return}return a}function $r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xc(e,t,n,a,l){for(var d=t._reactName,g=[];n!==null&&n!==a;){var b=n,C=b.alternate,A=b.stateNode;if(C!==null&&C===a)break;b.tag===5&&A!==null&&(b=A,l?(C=Sn(n,d),C!=null&&g.unshift(Ia(n,C,b))):l||(C=Sn(n,d),C!=null&&g.push(Ia(n,C,b)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var gp=/\r\n?/g,xp=/\u0000|\uFFFD/g;function yc(e){return(typeof e=="string"?e:""+e).replace(gp,`
`).replace(xp,"")}function ys(e,t,n){if(t=yc(t),yc(e)!==t&&n)throw Error(o(425))}function vs(){}var $i=null,Wi=null;function qi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ki=typeof setTimeout=="function"?setTimeout:void 0,yp=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,vp=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(wp)}:Ki;function wp(e){setTimeout(function(){throw e})}function Qi(e,t){var n=t,a=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(a===0){e.removeChild(l),ka(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=l}while(n);ka(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),On="__reactFiber$"+Wr,Da="__reactProps$"+Wr,Hn="__reactContainer$"+Wr,Ji="__reactEvents$"+Wr,kp="__reactListeners$"+Wr,bp="__reactHandles$"+Wr;function Nr(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hn]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wc(e);e!==null;){if(n=e[On])return n;e=wc(e)}return t}e=n,n=e.parentNode}return null}function La(e){return e=e[On]||e[Hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function ws(e){return e[Da]||null}var Yi=[],Kr=-1;function lr(e){return{current:e}}function ft(e){0>Kr||(e.current=Yi[Kr],Yi[Kr]=null,Kr--)}function ut(e,t){Kr++,Yi[Kr]=e.current,e.current=t}var cr={},Ut=lr(cr),rn=lr(!1),jr=cr;function Qr(e,t){var n=e.type.contextTypes;if(!n)return cr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in n)l[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function an(e){return e=e.childContextTypes,e!=null}function ks(){ft(rn),ft(Ut)}function kc(e,t,n){if(Ut.current!==cr)throw Error(o(168));ut(Ut,t),ut(rn,n)}function bc(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(o(108,ee(e)||"Unknown",l));return ae({},n,a)}function bs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,jr=Ut.current,ut(Ut,e),ut(rn,rn.current),!0}function Nc(e,t,n){var a=e.stateNode;if(!a)throw Error(o(169));n?(e=bc(e,t,jr),a.__reactInternalMemoizedMergedChildContext=e,ft(rn),ft(Ut),ut(Ut,e)):ft(rn),ut(rn,n)}var Gn=null,Ns=!1,Xi=!1;function jc(e){Gn===null?Gn=[e]:Gn.push(e)}function Np(e){Ns=!0,jc(e)}function ur(){if(!Xi&&Gn!==null){Xi=!0;var e=0,t=lt;try{var n=Gn;for(lt=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}Gn=null,Ns=!1}catch(l){throw Gn!==null&&(Gn=Gn.slice(e+1)),De(dn,ur),l}finally{lt=t,Xi=!1}}return null}var Jr=[],Yr=0,js=null,Ss=0,xn=[],yn=0,Sr=null,$n=1,Wn="";function Cr(e,t){Jr[Yr++]=Ss,Jr[Yr++]=js,js=e,Ss=t}function Sc(e,t,n){xn[yn++]=$n,xn[yn++]=Wn,xn[yn++]=Sr,Sr=e;var a=$n;e=Wn;var l=32-En(a)-1;a&=~(1<<l),n+=1;var d=32-En(t)+l;if(30<d){var g=l-l%5;d=(a&(1<<g)-1).toString(32),a>>=g,l-=g,$n=1<<32-En(t)+l|n<<l|a,Wn=d+e}else $n=1<<d|n<<l|a,Wn=e}function Zi(e){e.return!==null&&(Cr(e,1),Sc(e,1,0))}function eo(e){for(;e===js;)js=Jr[--Yr],Jr[Yr]=null,Ss=Jr[--Yr],Jr[Yr]=null;for(;e===Sr;)Sr=xn[--yn],xn[yn]=null,Wn=xn[--yn],xn[yn]=null,$n=xn[--yn],xn[yn]=null}var pn=null,hn=null,pt=!1,In=null;function Cc(e,t){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pn=e,hn=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pn=e,hn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sr!==null?{id:$n,overflow:Wn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pn=e,hn=null,!0):!1;default:return!1}}function to(e){return(e.mode&1)!==0&&(e.flags&128)===0}function no(e){if(pt){var t=hn;if(t){var n=t;if(!Mc(e,t)){if(to(e))throw Error(o(418));t=or(n.nextSibling);var a=pn;t&&Mc(e,t)?Cc(a,n):(e.flags=e.flags&-4097|2,pt=!1,pn=e)}}else{if(to(e))throw Error(o(418));e.flags=e.flags&-4097|2,pt=!1,pn=e}}}function Pc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pn=e}function Cs(e){if(e!==pn)return!1;if(!pt)return Pc(e),pt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qi(e.type,e.memoizedProps)),t&&(t=hn)){if(to(e))throw Ec(),Error(o(418));for(;t;)Cc(e,t),t=or(t.nextSibling)}if(Pc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){hn=or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}hn=null}}else hn=pn?or(e.stateNode.nextSibling):null;return!0}function Ec(){for(var e=hn;e;)e=or(e.nextSibling)}function Xr(){hn=pn=null,pt=!1}function ro(e){In===null?In=[e]:In.push(e)}var jp=L.ReactCurrentBatchConfig;function Ta(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var a=n.stateNode}if(!a)throw Error(o(147,e));var l=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var b=l.refs;g===null?delete b[d]:b[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ms(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function Ic(e){function t(D,R){if(e){var z=D.deletions;z===null?(D.deletions=[R],D.flags|=16):z.push(R)}}function n(D,R){if(!e)return null;for(;R!==null;)t(D,R),R=R.sibling;return null}function a(D,R){for(D=new Map;R!==null;)R.key!==null?D.set(R.key,R):D.set(R.index,R),R=R.sibling;return D}function l(D,R){return D=yr(D,R),D.index=0,D.sibling=null,D}function d(D,R,z){return D.index=z,e?(z=D.alternate,z!==null?(z=z.index,z<R?(D.flags|=2,R):z):(D.flags|=2,R)):(D.flags|=1048576,R)}function g(D){return e&&D.alternate===null&&(D.flags|=2),D}function b(D,R,z,re){return R===null||R.tag!==6?(R=Qo(z,D.mode,re),R.return=D,R):(R=l(R,z),R.return=D,R)}function C(D,R,z,re){var be=z.type;return be===ue?X(D,R,z.props.children,re,z.key):R!==null&&(R.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ve&&Rc(be)===R.type)?(re=l(R,z.props),re.ref=Ta(D,R,z),re.return=D,re):(re=Ys(z.type,z.key,z.props,null,D.mode,re),re.ref=Ta(D,R,z),re.return=D,re)}function A(D,R,z,re){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=Jo(z,D.mode,re),R.return=D,R):(R=l(R,z.children||[]),R.return=D,R)}function X(D,R,z,re,be){return R===null||R.tag!==7?(R=Tr(z,D.mode,re,be),R.return=D,R):(R=l(R,z),R.return=D,R)}function te(D,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Qo(""+R,D.mode,z),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Q:return z=Ys(R.type,R.key,R.props,null,D.mode,z),z.ref=Ta(D,null,R),z.return=D,z;case Z:return R=Jo(R,D.mode,z),R.return=D,R;case ve:var re=R._init;return te(D,re(R._payload),z)}if(We(R)||ce(R))return R=Tr(R,D.mode,z,null),R.return=D,R;Ms(D,R)}return null}function Y(D,R,z,re){var be=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return be!==null?null:b(D,R,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Q:return z.key===be?C(D,R,z,re):null;case Z:return z.key===be?A(D,R,z,re):null;case ve:return be=z._init,Y(D,R,be(z._payload),re)}if(We(z)||ce(z))return be!==null?null:X(D,R,z,re,null);Ms(D,z)}return null}function pe(D,R,z,re,be){if(typeof re=="string"&&re!==""||typeof re=="number")return D=D.get(z)||null,b(R,D,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Q:return D=D.get(re.key===null?z:re.key)||null,C(R,D,re,be);case Z:return D=D.get(re.key===null?z:re.key)||null,A(R,D,re,be);case ve:var Pe=re._init;return pe(D,R,z,Pe(re._payload),be)}if(We(re)||ce(re))return D=D.get(z)||null,X(R,D,re,be,null);Ms(R,re)}return null}function ye(D,R,z,re){for(var be=null,Pe=null,Ee=R,ze=R=0,Ot=null;Ee!==null&&ze<z.length;ze++){Ee.index>ze?(Ot=Ee,Ee=null):Ot=Ee.sibling;var Xe=Y(D,Ee,z[ze],re);if(Xe===null){Ee===null&&(Ee=Ot);break}e&&Ee&&Xe.alternate===null&&t(D,Ee),R=d(Xe,R,ze),Pe===null?be=Xe:Pe.sibling=Xe,Pe=Xe,Ee=Ot}if(ze===z.length)return n(D,Ee),pt&&Cr(D,ze),be;if(Ee===null){for(;ze<z.length;ze++)Ee=te(D,z[ze],re),Ee!==null&&(R=d(Ee,R,ze),Pe===null?be=Ee:Pe.sibling=Ee,Pe=Ee);return pt&&Cr(D,ze),be}for(Ee=a(D,Ee);ze<z.length;ze++)Ot=pe(Ee,D,ze,z[ze],re),Ot!==null&&(e&&Ot.alternate!==null&&Ee.delete(Ot.key===null?ze:Ot.key),R=d(Ot,R,ze),Pe===null?be=Ot:Pe.sibling=Ot,Pe=Ot);return e&&Ee.forEach(function(vr){return t(D,vr)}),pt&&Cr(D,ze),be}function ke(D,R,z,re){var be=ce(z);if(typeof be!="function")throw Error(o(150));if(z=be.call(z),z==null)throw Error(o(151));for(var Pe=be=null,Ee=R,ze=R=0,Ot=null,Xe=z.next();Ee!==null&&!Xe.done;ze++,Xe=z.next()){Ee.index>ze?(Ot=Ee,Ee=null):Ot=Ee.sibling;var vr=Y(D,Ee,Xe.value,re);if(vr===null){Ee===null&&(Ee=Ot);break}e&&Ee&&vr.alternate===null&&t(D,Ee),R=d(vr,R,ze),Pe===null?be=vr:Pe.sibling=vr,Pe=vr,Ee=Ot}if(Xe.done)return n(D,Ee),pt&&Cr(D,ze),be;if(Ee===null){for(;!Xe.done;ze++,Xe=z.next())Xe=te(D,Xe.value,re),Xe!==null&&(R=d(Xe,R,ze),Pe===null?be=Xe:Pe.sibling=Xe,Pe=Xe);return pt&&Cr(D,ze),be}for(Ee=a(D,Ee);!Xe.done;ze++,Xe=z.next())Xe=pe(Ee,D,ze,Xe.value,re),Xe!==null&&(e&&Xe.alternate!==null&&Ee.delete(Xe.key===null?ze:Xe.key),R=d(Xe,R,ze),Pe===null?be=Xe:Pe.sibling=Xe,Pe=Xe);return e&&Ee.forEach(function(rh){return t(D,rh)}),pt&&Cr(D,ze),be}function St(D,R,z,re){if(typeof z=="object"&&z!==null&&z.type===ue&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Q:e:{for(var be=z.key,Pe=R;Pe!==null;){if(Pe.key===be){if(be=z.type,be===ue){if(Pe.tag===7){n(D,Pe.sibling),R=l(Pe,z.props.children),R.return=D,D=R;break e}}else if(Pe.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ve&&Rc(be)===Pe.type){n(D,Pe.sibling),R=l(Pe,z.props),R.ref=Ta(D,Pe,z),R.return=D,D=R;break e}n(D,Pe);break}else t(D,Pe);Pe=Pe.sibling}z.type===ue?(R=Tr(z.props.children,D.mode,re,z.key),R.return=D,D=R):(re=Ys(z.type,z.key,z.props,null,D.mode,re),re.ref=Ta(D,R,z),re.return=D,D=re)}return g(D);case Z:e:{for(Pe=z.key;R!==null;){if(R.key===Pe)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){n(D,R.sibling),R=l(R,z.children||[]),R.return=D,D=R;break e}else{n(D,R);break}else t(D,R);R=R.sibling}R=Jo(z,D.mode,re),R.return=D,D=R}return g(D);case ve:return Pe=z._init,St(D,R,Pe(z._payload),re)}if(We(z))return ye(D,R,z,re);if(ce(z))return ke(D,R,z,re);Ms(D,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,R!==null&&R.tag===6?(n(D,R.sibling),R=l(R,z),R.return=D,D=R):(n(D,R),R=Qo(z,D.mode,re),R.return=D,D=R),g(D)):n(D,R)}return St}var Zr=Ic(!0),Dc=Ic(!1),Ps=lr(null),Es=null,ea=null,ao=null;function so(){ao=ea=Es=null}function io(e){var t=Ps.current;ft(Ps),e._currentValue=t}function oo(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ta(e,t){Es=e,ao=ea=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(sn=!0),e.firstContext=null)}function vn(e){var t=e._currentValue;if(ao!==e)if(e={context:e,memoizedValue:t,next:null},ea===null){if(Es===null)throw Error(o(308));ea=e,Es.dependencies={lanes:0,firstContext:e}}else ea=ea.next=e;return t}var Mr=null;function lo(e){Mr===null?Mr=[e]:Mr.push(e)}function Lc(e,t,n,a){var l=t.interleaved;return l===null?(n.next=n,lo(t)):(n.next=l.next,l.next=n),t.interleaved=n,qn(e,a)}function qn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dr=!1;function co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Qe&2)!==0){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,qn(e,n)}return l=a.interleaved,l===null?(t.next=t,lo(a)):(t.next=l.next,l.next=t),a.interleaved=t,qn(e,n)}function Rs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ni(e,n)}}function zc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var l=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?l=d=g:d=d.next=g,n=n.next}while(n!==null);d===null?l=d=t:d=d.next=t}else l=d=t;n={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Is(e,t,n,a){var l=e.updateQueue;dr=!1;var d=l.firstBaseUpdate,g=l.lastBaseUpdate,b=l.shared.pending;if(b!==null){l.shared.pending=null;var C=b,A=C.next;C.next=null,g===null?d=A:g.next=A,g=C;var X=e.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==g&&(b===null?X.firstBaseUpdate=A:b.next=A,X.lastBaseUpdate=C))}if(d!==null){var te=l.baseState;g=0,X=A=C=null,b=d;do{var Y=b.lane,pe=b.eventTime;if((a&Y)===Y){X!==null&&(X=X.next={eventTime:pe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var ye=e,ke=b;switch(Y=t,pe=n,ke.tag){case 1:if(ye=ke.payload,typeof ye=="function"){te=ye.call(pe,te,Y);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=ke.payload,Y=typeof ye=="function"?ye.call(pe,te,Y):ye,Y==null)break e;te=ae({},te,Y);break e;case 2:dr=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,Y=l.effects,Y===null?l.effects=[b]:Y.push(b))}else pe={eventTime:pe,lane:Y,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(A=X=pe,C=te):X=X.next=pe,g|=Y;if(b=b.next,b===null){if(b=l.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,l.lastBaseUpdate=Y,l.shared.pending=null}}while(!0);if(X===null&&(C=te),l.baseState=C,l.firstBaseUpdate=A,l.lastBaseUpdate=X,t=l.shared.interleaved,t!==null){l=t;do g|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);Rr|=g,e.lanes=g,e.memoizedState=te}}function Ac(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=n,typeof l!="function")throw Error(o(191,l));l.call(a)}}}var za={},Vn=lr(za),Aa=lr(za),_a=lr(za);function Pr(e){if(e===za)throw Error(o(174));return e}function uo(e,t){switch(ut(_a,t),ut(Aa,e),ut(Vn,za),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:et(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=et(t,e)}ft(Vn),ut(Vn,t)}function na(){ft(Vn),ft(Aa),ft(_a)}function _c(e){Pr(_a.current);var t=Pr(Vn.current),n=et(t,e.type);t!==n&&(ut(Aa,e),ut(Vn,n))}function fo(e){Aa.current===e&&(ft(Vn),ft(Aa))}var gt=lr(0);function Ds(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var po=[];function ho(){for(var e=0;e<po.length;e++)po[e]._workInProgressVersionPrimary=null;po.length=0}var Ls=L.ReactCurrentDispatcher,mo=L.ReactCurrentBatchConfig,Er=0,xt=null,Dt=null,At=null,Ts=!1,Oa=!1,Va=0,Sp=0;function Ht(){throw Error(o(321))}function go(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rn(e[n],t[n]))return!1;return!0}function xo(e,t,n,a,l,d){if(Er=d,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ls.current=e===null||e.memoizedState===null?Ep:Rp,e=n(a,l),Oa){d=0;do{if(Oa=!1,Va=0,25<=d)throw Error(o(301));d+=1,At=Dt=null,t.updateQueue=null,Ls.current=Ip,e=n(a,l)}while(Oa)}if(Ls.current=_s,t=Dt!==null&&Dt.next!==null,Er=0,At=Dt=xt=null,Ts=!1,t)throw Error(o(300));return e}function yo(){var e=Va!==0;return Va=0,e}function Fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?xt.memoizedState=At=e:At=At.next=e,At}function wn(){if(Dt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=At===null?xt.memoizedState:At.next;if(t!==null)At=t,Dt=e;else{if(e===null)throw Error(o(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},At===null?xt.memoizedState=At=e:At=At.next=e}return At}function Fa(e,t){return typeof t=="function"?t(e):t}function vo(e){var t=wn(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=Dt,l=a.baseQueue,d=n.pending;if(d!==null){if(l!==null){var g=l.next;l.next=d.next,d.next=g}a.baseQueue=l=d,n.pending=null}if(l!==null){d=l.next,a=a.baseState;var b=g=null,C=null,A=d;do{var X=A.lane;if((Er&X)===X)C!==null&&(C=C.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),a=A.hasEagerState?A.eagerState:e(a,A.action);else{var te={lane:X,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};C===null?(b=C=te,g=a):C=C.next=te,xt.lanes|=X,Rr|=X}A=A.next}while(A!==null&&A!==d);C===null?g=a:C.next=b,Rn(a,t.memoizedState)||(sn=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=C,n.lastRenderedState=a}if(e=n.interleaved,e!==null){l=e;do d=l.lane,xt.lanes|=d,Rr|=d,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=wn(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var a=n.dispatch,l=n.pending,d=t.memoizedState;if(l!==null){n.pending=null;var g=l=l.next;do d=e(d,g.action),g=g.next;while(g!==l);Rn(d,t.memoizedState)||(sn=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,a]}function Oc(){}function Vc(e,t){var n=xt,a=wn(),l=t(),d=!Rn(a.memoizedState,l);if(d&&(a.memoizedState=l,sn=!0),a=a.queue,ko(Uc.bind(null,n,a,e),[e]),a.getSnapshot!==t||d||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Ba(9,Bc.bind(null,n,a,l,t),void 0,null),_t===null)throw Error(o(349));(Er&30)!==0||Fc(n,t,l)}return l}function Fc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bc(e,t,n,a){t.value=n,t.getSnapshot=a,Hc(t)&&Gc(e)}function Uc(e,t,n){return n(function(){Hc(t)&&Gc(e)})}function Hc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rn(e,n)}catch{return!0}}function Gc(e){var t=qn(e,1);t!==null&&zn(t,e,1,-1)}function $c(e){var t=Fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:e},t.queue=e,e=e.dispatch=Pp.bind(null,xt,e),[t.memoizedState,e]}function Ba(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function Wc(){return wn().memoizedState}function zs(e,t,n,a){var l=Fn();xt.flags|=e,l.memoizedState=Ba(1|t,n,void 0,a===void 0?null:a)}function As(e,t,n,a){var l=wn();a=a===void 0?null:a;var d=void 0;if(Dt!==null){var g=Dt.memoizedState;if(d=g.destroy,a!==null&&go(a,g.deps)){l.memoizedState=Ba(t,n,d,a);return}}xt.flags|=e,l.memoizedState=Ba(1|t,n,d,a)}function qc(e,t){return zs(8390656,8,e,t)}function ko(e,t){return As(2048,8,e,t)}function Kc(e,t){return As(4,2,e,t)}function Qc(e,t){return As(4,4,e,t)}function Jc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yc(e,t,n){return n=n!=null?n.concat([e]):null,As(4,4,Jc.bind(null,t,e),n)}function bo(){}function Xc(e,t){var n=wn();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&go(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Zc(e,t){var n=wn();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&go(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function eu(e,t,n){return(Er&21)===0?(e.baseState&&(e.baseState=!1,sn=!0),e.memoizedState=n):(Rn(n,t)||(n=Rl(),xt.lanes|=n,Rr|=n,e.baseState=!0),t)}function Cp(e,t){var n=lt;lt=n!==0&&4>n?n:4,e(!0);var a=mo.transition;mo.transition={};try{e(!1),t()}finally{lt=n,mo.transition=a}}function tu(){return wn().memoizedState}function Mp(e,t,n){var a=gr(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},nu(e))ru(t,n);else if(n=Lc(e,t,n,a),n!==null){var l=Yt();zn(n,e,a,l),au(n,t,a)}}function Pp(e,t,n){var a=gr(e),l={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(nu(e))ru(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,b=d(g,n);if(l.hasEagerState=!0,l.eagerState=b,Rn(b,g)){var C=t.interleaved;C===null?(l.next=l,lo(t)):(l.next=C.next,C.next=l),t.interleaved=l;return}}catch{}finally{}n=Lc(e,t,l,a),n!==null&&(l=Yt(),zn(n,e,a,l),au(n,t,a))}}function nu(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function ru(e,t){Oa=Ts=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if((n&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ni(e,n)}}var _s={readContext:vn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},Ep={readContext:vn,useCallback:function(e,t){return Fn().memoizedState=[e,t===void 0?null:t],e},useContext:vn,useEffect:qc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zs(4194308,4,Jc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=Fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Fn();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Mp.bind(null,xt,e),[a.memoizedState,e]},useRef:function(e){var t=Fn();return e={current:e},t.memoizedState=e},useState:$c,useDebugValue:bo,useDeferredValue:function(e){return Fn().memoizedState=e},useTransition:function(){var e=$c(!1),t=e[0];return e=Cp.bind(null,e[1]),Fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=xt,l=Fn();if(pt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),_t===null)throw Error(o(349));(Er&30)!==0||Fc(a,t,n)}l.memoizedState=n;var d={value:n,getSnapshot:t};return l.queue=d,qc(Uc.bind(null,a,d,e),[e]),a.flags|=2048,Ba(9,Bc.bind(null,a,d,n,t),void 0,null),n},useId:function(){var e=Fn(),t=_t.identifierPrefix;if(pt){var n=Wn,a=$n;n=(a&~(1<<32-En(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=Va++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rp={readContext:vn,useCallback:Xc,useContext:vn,useEffect:ko,useImperativeHandle:Yc,useInsertionEffect:Kc,useLayoutEffect:Qc,useMemo:Zc,useReducer:vo,useRef:Wc,useState:function(){return vo(Fa)},useDebugValue:bo,useDeferredValue:function(e){var t=wn();return eu(t,Dt.memoizedState,e)},useTransition:function(){var e=vo(Fa)[0],t=wn().memoizedState;return[e,t]},useMutableSource:Oc,useSyncExternalStore:Vc,useId:tu,unstable_isNewReconciler:!1},Ip={readContext:vn,useCallback:Xc,useContext:vn,useEffect:ko,useImperativeHandle:Yc,useInsertionEffect:Kc,useLayoutEffect:Qc,useMemo:Zc,useReducer:wo,useRef:Wc,useState:function(){return wo(Fa)},useDebugValue:bo,useDeferredValue:function(e){var t=wn();return Dt===null?t.memoizedState=e:eu(t,Dt.memoizedState,e)},useTransition:function(){var e=wo(Fa)[0],t=wn().memoizedState;return[e,t]},useMutableSource:Oc,useSyncExternalStore:Vc,useId:tu,unstable_isNewReconciler:!1};function Dn(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function No(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Os={isMounted:function(e){return(e=e._reactInternals)?Se(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Yt(),l=gr(e),d=Kn(a,l);d.payload=t,n!=null&&(d.callback=n),t=fr(e,d,l),t!==null&&(zn(t,e,l,a),Rs(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Yt(),l=gr(e),d=Kn(a,l);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=fr(e,d,l),t!==null&&(zn(t,e,l,a),Rs(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yt(),a=gr(e),l=Kn(n,a);l.tag=2,t!=null&&(l.callback=t),t=fr(e,l,a),t!==null&&(zn(t,e,a,n),Rs(t,e,a))}};function su(e,t,n,a,l,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,g):t.prototype&&t.prototype.isPureReactComponent?!Ma(n,a)||!Ma(l,d):!0}function iu(e,t,n){var a=!1,l=cr,d=t.contextType;return typeof d=="object"&&d!==null?d=vn(d):(l=an(t)?jr:Ut.current,a=t.contextTypes,d=(a=a!=null)?Qr(e,l):cr),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Os,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function ou(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Os.enqueueReplaceState(t,t.state,null)}function jo(e,t,n,a){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},co(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=vn(d):(d=an(t)?jr:Ut.current,l.context=Qr(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(No(e,t,d,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Os.enqueueReplaceState(l,l.state,null),Is(e,n,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ra(e,t){try{var n="",a=t;do n+=Ae(a),a=a.return;while(a);var l=n}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l,digest:null}}function So(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Co(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dp=typeof WeakMap=="function"?WeakMap:Map;function lu(e,t,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){$s||($s=!0,Bo=a),Co(e,t)},n}function cu(e,t,n){n=Kn(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;n.payload=function(){return a(l)},n.callback=function(){Co(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){Co(e,t),typeof a!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),n}function uu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Dp;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(n)||(l.add(n),e=Wp.bind(null,e,t,n),t.then(e,e))}function du(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fu(e,t,n,a,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kn(-1,1),t.tag=2,fr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Lp=L.ReactCurrentOwner,sn=!1;function Jt(e,t,n,a){t.child=e===null?Dc(t,null,n,a):Zr(t,e.child,n,a)}function pu(e,t,n,a,l){n=n.render;var d=t.ref;return ta(t,l),a=xo(e,t,n,a,d,l),n=yo(),e!==null&&!sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Qn(e,t,l)):(pt&&n&&Zi(t),t.flags|=1,Jt(e,t,a,l),t.child)}function hu(e,t,n,a,l){if(e===null){var d=n.type;return typeof d=="function"&&!Ko(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,mu(e,t,d,a,l)):(e=Ys(n.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&l)===0){var g=d.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(g,a)&&e.ref===t.ref)return Qn(e,t,l)}return t.flags|=1,e=yr(d,a),e.ref=t.ref,e.return=t,t.child=e}function mu(e,t,n,a,l){if(e!==null){var d=e.memoizedProps;if(Ma(d,a)&&e.ref===t.ref)if(sn=!1,t.pendingProps=a=d,(e.lanes&l)!==0)(e.flags&131072)!==0&&(sn=!0);else return t.lanes=e.lanes,Qn(e,t,l)}return Mo(e,t,n,a,l)}function gu(e,t,n){var a=t.pendingProps,l=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(sa,mn),mn|=n;else{if((n&1073741824)===0)return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ut(sa,mn),mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:n,ut(sa,mn),mn|=a}else d!==null?(a=d.baseLanes|n,t.memoizedState=null):a=n,ut(sa,mn),mn|=a;return Jt(e,t,l,n),t.child}function xu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,n,a,l){var d=an(n)?jr:Ut.current;return d=Qr(t,d),ta(t,l),n=xo(e,t,n,a,d,l),a=yo(),e!==null&&!sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Qn(e,t,l)):(pt&&a&&Zi(t),t.flags|=1,Jt(e,t,n,l),t.child)}function yu(e,t,n,a,l){if(an(n)){var d=!0;bs(t)}else d=!1;if(ta(t,l),t.stateNode===null)Fs(e,t),iu(t,n,a),jo(t,n,a,l),a=!0;else if(e===null){var g=t.stateNode,b=t.memoizedProps;g.props=b;var C=g.context,A=n.contextType;typeof A=="object"&&A!==null?A=vn(A):(A=an(n)?jr:Ut.current,A=Qr(t,A));var X=n.getDerivedStateFromProps,te=typeof X=="function"||typeof g.getSnapshotBeforeUpdate=="function";te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==a||C!==A)&&ou(t,g,a,A),dr=!1;var Y=t.memoizedState;g.state=Y,Is(t,a,g,l),C=t.memoizedState,b!==a||Y!==C||rn.current||dr?(typeof X=="function"&&(No(t,n,X,a),C=t.memoizedState),(b=dr||su(t,n,b,a,Y,C,A))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=C),g.props=a,g.state=C,g.context=A,a=b):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,Tc(e,t),b=t.memoizedProps,A=t.type===t.elementType?b:Dn(t.type,b),g.props=A,te=t.pendingProps,Y=g.context,C=n.contextType,typeof C=="object"&&C!==null?C=vn(C):(C=an(n)?jr:Ut.current,C=Qr(t,C));var pe=n.getDerivedStateFromProps;(X=typeof pe=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==te||Y!==C)&&ou(t,g,a,C),dr=!1,Y=t.memoizedState,g.state=Y,Is(t,a,g,l);var ye=t.memoizedState;b!==te||Y!==ye||rn.current||dr?(typeof pe=="function"&&(No(t,n,pe,a),ye=t.memoizedState),(A=dr||su(t,n,A,a,Y,ye,C)||!1)?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ye,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ye,C)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ye),g.props=a,g.state=ye,g.context=C,a=A):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),a=!1)}return Po(e,t,n,a,d,l)}function Po(e,t,n,a,l,d){xu(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return l&&Nc(t,n,!1),Qn(e,t,d);a=t.stateNode,Lp.current=t;var b=g&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=Zr(t,e.child,null,d),t.child=Zr(t,null,b,d)):Jt(e,t,b,d),t.memoizedState=a.state,l&&Nc(t,n,!0),t.child}function vu(e){var t=e.stateNode;t.pendingContext?kc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kc(e,t.context,!1),uo(e,t.containerInfo)}function wu(e,t,n,a,l){return Xr(),ro(l),t.flags|=256,Jt(e,t,n,a),t.child}var Eo={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function ku(e,t,n){var a=t.pendingProps,l=gt.current,d=!1,g=(t.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(l&2)!==0),b?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ut(gt,l&1),e===null)return no(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,d?(a=t.mode,d=t.child,g={mode:"hidden",children:g},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=g):d=Xs(g,a,0,null),e=Tr(e,a,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ro(n),t.memoizedState=Eo,e):Io(t,g));if(l=e.memoizedState,l!==null&&(b=l.dehydrated,b!==null))return Tp(e,t,g,a,b,l,n);if(d){d=a.fallback,g=t.mode,l=e.child,b=l.sibling;var C={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=C,t.deletions=null):(a=yr(l,C),a.subtreeFlags=l.subtreeFlags&14680064),b!==null?d=yr(b,d):(d=Tr(d,g,n,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,g=e.child.memoizedState,g=g===null?Ro(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~n,t.memoizedState=Eo,a}return d=e.child,e=d.sibling,a=yr(d,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Io(e,t){return t=Xs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vs(e,t,n,a){return a!==null&&ro(a),Zr(t,e.child,null,n),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tp(e,t,n,a,l,d,g){if(n)return t.flags&256?(t.flags&=-257,a=So(Error(o(422))),Vs(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,l=t.mode,a=Xs({mode:"visible",children:a.children},l,0,null),d=Tr(d,l,g,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,(t.mode&1)!==0&&Zr(t,e.child,null,g),t.child.memoizedState=Ro(g),t.memoizedState=Eo,d);if((t.mode&1)===0)return Vs(e,t,g,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var b=a.dgst;return a=b,d=Error(o(419)),a=So(d,a,void 0),Vs(e,t,g,a)}if(b=(g&e.childLanes)!==0,sn||b){if(a=_t,a!==null){switch(g&-g){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(a.suspendedLanes|g))!==0?0:l,l!==0&&l!==d.retryLane&&(d.retryLane=l,qn(e,l),zn(a,e,l,-1))}return qo(),a=So(Error(o(421))),Vs(e,t,g,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=qp.bind(null,e),l._reactRetry=t,null):(e=d.treeContext,hn=or(l.nextSibling),pn=t,pt=!0,In=null,e!==null&&(xn[yn++]=$n,xn[yn++]=Wn,xn[yn++]=Sr,$n=e.id,Wn=e.overflow,Sr=t),t=Io(t,a.children),t.flags|=4096,t)}function bu(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),oo(e.return,t,n)}function Do(e,t,n,a,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=n,d.tailMode=l)}function Nu(e,t,n){var a=t.pendingProps,l=a.revealOrder,d=a.tail;if(Jt(e,t,a.children,n),a=gt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bu(e,n,t);else if(e.tag===19)bu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ut(gt,a),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ds(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Do(t,!1,l,n,d);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ds(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Do(t,!0,n,null,d);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=yr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zp(e,t,n){switch(t.tag){case 3:vu(t),Xr();break;case 5:_c(t);break;case 1:an(t.type)&&bs(t);break;case 4:uo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;ut(Ps,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ut(gt,gt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?ku(e,t,n):(ut(gt,gt.current&1),e=Qn(e,t,n),e!==null?e.sibling:null);ut(gt,gt.current&1);break;case 19:if(a=(n&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Nu(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ut(gt,gt.current),a)break;return null;case 22:case 23:return t.lanes=0,gu(e,t,n)}return Qn(e,t,n)}var ju,Lo,Su,Cu;ju=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Su=function(e,t,n,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,Pr(Vn.current);var d=null;switch(n){case"input":l=oe(e,l),a=oe(e,a),d=[];break;case"select":l=ae({},l,{value:void 0}),a=ae({},a,{value:void 0}),d=[];break;case"textarea":l=Bt(e,l),a=Bt(e,a),d=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=vs)}Tt(n,a);var g;n=null;for(A in l)if(!a.hasOwnProperty(A)&&l.hasOwnProperty(A)&&l[A]!=null)if(A==="style"){var b=l[A];for(g in b)b.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(u.hasOwnProperty(A)?d||(d=[]):(d=d||[]).push(A,null));for(A in a){var C=a[A];if(b=l?.[A],a.hasOwnProperty(A)&&C!==b&&(C!=null||b!=null))if(A==="style")if(b){for(g in b)!b.hasOwnProperty(g)||C&&C.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in C)C.hasOwnProperty(g)&&b[g]!==C[g]&&(n||(n={}),n[g]=C[g])}else n||(d||(d=[]),d.push(A,n)),n=C;else A==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,b=b?b.__html:void 0,C!=null&&b!==C&&(d=d||[]).push(A,C)):A==="children"?typeof C!="string"&&typeof C!="number"||(d=d||[]).push(A,""+C):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(u.hasOwnProperty(A)?(C!=null&&A==="onScroll"&&dt("scroll",e),d||b===C||(d=[])):(d=d||[]).push(A,C))}n&&(d=d||[]).push("style",n);var A=d;(t.updateQueue=A)&&(t.flags|=4)}},Cu=function(e,t,n,a){n!==a&&(t.flags|=4)};function Ua(e,t){if(!pt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Ap(e,t,n){var a=t.pendingProps;switch(eo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(t),null;case 1:return an(t.type)&&ks(),Gt(t),null;case 3:return a=t.stateNode,na(),ft(rn),ft(Ut),ho(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,In!==null&&(Go(In),In=null))),Lo(e,t),Gt(t),null;case 5:fo(t);var l=Pr(_a.current);if(n=t.type,e!==null&&t.stateNode!=null)Su(e,t,n,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(o(166));return Gt(t),null}if(e=Pr(Vn.current),Cs(t)){a=t.stateNode,n=t.type;var d=t.memoizedProps;switch(a[On]=t,a[Da]=d,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",a),dt("close",a);break;case"iframe":case"object":case"embed":dt("load",a);break;case"video":case"audio":for(l=0;l<Ea.length;l++)dt(Ea[l],a);break;case"source":dt("error",a);break;case"img":case"image":case"link":dt("error",a),dt("load",a);break;case"details":dt("toggle",a);break;case"input":Fe(a,d),dt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},dt("invalid",a);break;case"textarea":Rt(a,d),dt("invalid",a)}Tt(n,d),l=null;for(var g in d)if(d.hasOwnProperty(g)){var b=d[g];g==="children"?typeof b=="string"?a.textContent!==b&&(d.suppressHydrationWarning!==!0&&ys(a.textContent,b,e),l=["children",b]):typeof b=="number"&&a.textContent!==""+b&&(d.suppressHydrationWarning!==!0&&ys(a.textContent,b,e),l=["children",""+b]):u.hasOwnProperty(g)&&b!=null&&g==="onScroll"&&dt("scroll",a)}switch(n){case"input":T(a),qe(a,d,!0);break;case"textarea":T(a),G(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=vs)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Je(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(n,{is:a.is}):(e=g.createElement(n),n==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,n),e[On]=t,e[Da]=a,ju(e,t,!1,!1),t.stateNode=e;e:{switch(g=Zt(n,a),n){case"dialog":dt("cancel",e),dt("close",e),l=a;break;case"iframe":case"object":case"embed":dt("load",e),l=a;break;case"video":case"audio":for(l=0;l<Ea.length;l++)dt(Ea[l],e);l=a;break;case"source":dt("error",e),l=a;break;case"img":case"image":case"link":dt("error",e),dt("load",e),l=a;break;case"details":dt("toggle",e),l=a;break;case"input":Fe(e,a),l=oe(e,a),dt("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=ae({},a,{value:void 0}),dt("invalid",e);break;case"textarea":Rt(e,a),l=Bt(e,a),dt("invalid",e);break;default:l=a}Tt(n,l),b=l;for(d in b)if(b.hasOwnProperty(d)){var C=b[d];d==="style"?ot(e,C):d==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Be(e,C)):d==="children"?typeof C=="string"?(n!=="textarea"||C!=="")&&vt(e,C):typeof C=="number"&&vt(e,""+C):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(u.hasOwnProperty(d)?C!=null&&d==="onScroll"&&dt("scroll",e):C!=null&&_(e,d,C,g))}switch(n){case"input":T(e),qe(e,a,!1);break;case"textarea":T(e),G(e);break;case"option":a.value!=null&&e.setAttribute("value",""+me(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?it(e,!!a.multiple,d,!1):a.defaultValue!=null&&it(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=vs)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gt(t),null;case 6:if(e&&t.stateNode!=null)Cu(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(n=Pr(_a.current),Pr(Vn.current),Cs(t)){if(a=t.stateNode,n=t.memoizedProps,a[On]=t,(d=a.nodeValue!==n)&&(e=pn,e!==null))switch(e.tag){case 3:ys(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ys(a.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[On]=t,t.stateNode=a}return Gt(t),null;case 13:if(ft(gt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pt&&hn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ec(),Xr(),t.flags|=98560,d=!1;else if(d=Cs(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[On]=t}else Xr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Gt(t),d=!1}else In!==null&&(Go(In),In=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(gt.current&1)!==0?Lt===0&&(Lt=3):qo())),t.updateQueue!==null&&(t.flags|=4),Gt(t),null);case 4:return na(),Lo(e,t),e===null&&Ra(t.stateNode.containerInfo),Gt(t),null;case 10:return io(t.type._context),Gt(t),null;case 17:return an(t.type)&&ks(),Gt(t),null;case 19:if(ft(gt),d=t.memoizedState,d===null)return Gt(t),null;if(a=(t.flags&128)!==0,g=d.rendering,g===null)if(a)Ua(d,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Ds(e),g!==null){for(t.flags|=128,Ua(d,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)d=n,e=a,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ut(gt,gt.current&1|2),t.child}e=e.sibling}d.tail!==null&&tt()>ia&&(t.flags|=128,a=!0,Ua(d,!1),t.lanes=4194304)}else{if(!a)if(e=Ds(g),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ua(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!pt)return Gt(t),null}else 2*tt()-d.renderingStartTime>ia&&n!==1073741824&&(t.flags|=128,a=!0,Ua(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(n=d.last,n!==null?n.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=tt(),t.sibling=null,n=gt.current,ut(gt,a?n&1|2:n&1),t):(Gt(t),null);case 22:case 23:return Wo(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(mn&1073741824)!==0&&(Gt(t),t.subtreeFlags&6&&(t.flags|=8192)):Gt(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function _p(e,t){switch(eo(t),t.tag){case 1:return an(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(),ft(rn),ft(Ut),ho(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return fo(t),null;case 13:if(ft(gt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(gt),null;case 4:return na(),null;case 10:return io(t.type._context),null;case 22:case 23:return Wo(),null;case 24:return null;default:return null}}var Bs=!1,$t=!1,Op=typeof WeakSet=="function"?WeakSet:Set,ge=null;function aa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){kt(e,t,a)}else n.current=null}function To(e,t,n){try{n()}catch(a){kt(e,t,a)}}var Mu=!1;function Vp(e,t){if($i=os,e=sc(),_i(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var l=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var g=0,b=-1,C=-1,A=0,X=0,te=e,Y=null;t:for(;;){for(var pe;te!==n||l!==0&&te.nodeType!==3||(b=g+l),te!==d||a!==0&&te.nodeType!==3||(C=g+a),te.nodeType===3&&(g+=te.nodeValue.length),(pe=te.firstChild)!==null;)Y=te,te=pe;for(;;){if(te===e)break t;if(Y===n&&++A===l&&(b=g),Y===d&&++X===a&&(C=g),(pe=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=pe}n=b===-1||C===-1?null:{start:b,end:C}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wi={focusedElem:e,selectionRange:n},os=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var ye=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var ke=ye.memoizedProps,St=ye.memoizedState,D=t.stateNode,R=D.getSnapshotBeforeUpdate(t.elementType===t.type?ke:Dn(t.type,ke),St);D.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(re){kt(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return ye=Mu,Mu=!1,ye}function Ha(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&To(t,n,d)}l=l.next}while(l!==a)}}function Us(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function zo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pu(e){var t=e.alternate;t!==null&&(e.alternate=null,Pu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[On],delete t[Da],delete t[Ji],delete t[kp],delete t[bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eu(e){return e.tag===5||e.tag===3||e.tag===4}function Ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ao(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vs));else if(a!==4&&(e=e.child,e!==null))for(Ao(e,t,n),e=e.sibling;e!==null;)Ao(e,t,n),e=e.sibling}function _o(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(_o(e,t,n),e=e.sibling;e!==null;)_o(e,t,n),e=e.sibling}var Vt=null,Ln=!1;function pr(e,t,n){for(n=n.child;n!==null;)Iu(e,t,n),n=n.sibling}function Iu(e,t,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ts,n)}catch{}switch(n.tag){case 5:$t||aa(n,t);case 6:var a=Vt,l=Ln;Vt=null,pr(e,t,n),Vt=a,Ln=l,Vt!==null&&(Ln?(e=Vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(Ln?(e=Vt,n=n.stateNode,e.nodeType===8?Qi(e.parentNode,n):e.nodeType===1&&Qi(e,n),ka(e)):Qi(Vt,n.stateNode));break;case 4:a=Vt,l=Ln,Vt=n.stateNode.containerInfo,Ln=!0,pr(e,t,n),Vt=a,Ln=l;break;case 0:case 11:case 14:case 15:if(!$t&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var d=l,g=d.destroy;d=d.tag,g!==void 0&&((d&2)!==0||(d&4)!==0)&&To(n,t,g),l=l.next}while(l!==a)}pr(e,t,n);break;case 1:if(!$t&&(aa(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(b){kt(n,t,b)}pr(e,t,n);break;case 21:pr(e,t,n);break;case 22:n.mode&1?($t=(a=$t)||n.memoizedState!==null,pr(e,t,n),$t=a):pr(e,t,n);break;default:pr(e,t,n)}}function Du(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Op),t.forEach(function(a){var l=Kp.bind(null,e,a);n.has(a)||(n.add(a),a.then(l,l))})}}function Tn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];try{var d=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 5:Vt=b.stateNode,Ln=!1;break e;case 3:Vt=b.stateNode.containerInfo,Ln=!0;break e;case 4:Vt=b.stateNode.containerInfo,Ln=!0;break e}b=b.return}if(Vt===null)throw Error(o(160));Iu(d,g,l),Vt=null,Ln=!1;var C=l.alternate;C!==null&&(C.return=null),l.return=null}catch(A){kt(l,t,A)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lu(t,e),t=t.sibling}function Lu(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tn(t,e),Bn(e),a&4){try{Ha(3,e,e.return),Us(3,e)}catch(ke){kt(e,e.return,ke)}try{Ha(5,e,e.return)}catch(ke){kt(e,e.return,ke)}}break;case 1:Tn(t,e),Bn(e),a&512&&n!==null&&aa(n,n.return);break;case 5:if(Tn(t,e),Bn(e),a&512&&n!==null&&aa(n,n.return),e.flags&32){var l=e.stateNode;try{vt(l,"")}catch(ke){kt(e,e.return,ke)}}if(a&4&&(l=e.stateNode,l!=null)){var d=e.memoizedProps,g=n!==null?n.memoizedProps:d,b=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{b==="input"&&d.type==="radio"&&d.name!=null&&Ze(l,d),Zt(b,g);var A=Zt(b,d);for(g=0;g<C.length;g+=2){var X=C[g],te=C[g+1];X==="style"?ot(l,te):X==="dangerouslySetInnerHTML"?Be(l,te):X==="children"?vt(l,te):_(l,X,te,A)}switch(b){case"input":Le(l,d);break;case"textarea":nt(l,d);break;case"select":var Y=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!d.multiple;var pe=d.value;pe!=null?it(l,!!d.multiple,pe,!1):Y!==!!d.multiple&&(d.defaultValue!=null?it(l,!!d.multiple,d.defaultValue,!0):it(l,!!d.multiple,d.multiple?[]:"",!1))}l[Da]=d}catch(ke){kt(e,e.return,ke)}}break;case 6:if(Tn(t,e),Bn(e),a&4){if(e.stateNode===null)throw Error(o(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch(ke){kt(e,e.return,ke)}}break;case 3:if(Tn(t,e),Bn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(t.containerInfo)}catch(ke){kt(e,e.return,ke)}break;case 4:Tn(t,e),Bn(e);break;case 13:Tn(t,e),Bn(e),l=e.child,l.flags&8192&&(d=l.memoizedState!==null,l.stateNode.isHidden=d,!d||l.alternate!==null&&l.alternate.memoizedState!==null||(Fo=tt())),a&4&&Du(e);break;case 22:if(X=n!==null&&n.memoizedState!==null,e.mode&1?($t=(A=$t)||X,Tn(t,e),$t=A):Tn(t,e),Bn(e),a&8192){if(A=e.memoizedState!==null,(e.stateNode.isHidden=A)&&!X&&(e.mode&1)!==0)for(ge=e,X=e.child;X!==null;){for(te=ge=X;ge!==null;){switch(Y=ge,pe=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ha(4,Y,Y.return);break;case 1:aa(Y,Y.return);var ye=Y.stateNode;if(typeof ye.componentWillUnmount=="function"){a=Y,n=Y.return;try{t=a,ye.props=t.memoizedProps,ye.state=t.memoizedState,ye.componentWillUnmount()}catch(ke){kt(a,n,ke)}}break;case 5:aa(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Au(te);continue}}pe!==null?(pe.return=Y,ge=pe):Au(te)}X=X.sibling}e:for(X=null,te=e;;){if(te.tag===5){if(X===null){X=te;try{l=te.stateNode,A?(d=l.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(b=te.stateNode,C=te.memoizedProps.style,g=C!=null&&C.hasOwnProperty("display")?C.display:null,b.style.display=Kt("display",g))}catch(ke){kt(e,e.return,ke)}}}else if(te.tag===6){if(X===null)try{te.stateNode.nodeValue=A?"":te.memoizedProps}catch(ke){kt(e,e.return,ke)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===e)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===e)break e;for(;te.sibling===null;){if(te.return===null||te.return===e)break e;X===te&&(X=null),te=te.return}X===te&&(X=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Tn(t,e),Bn(e),a&4&&Du(e);break;case 21:break;default:Tn(t,e),Bn(e)}}function Bn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Eu(n)){var a=n;break e}n=n.return}throw Error(o(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(vt(l,""),a.flags&=-33);var d=Ru(e);_o(e,d,l);break;case 3:case 4:var g=a.stateNode.containerInfo,b=Ru(e);Ao(e,b,g);break;default:throw Error(o(161))}}catch(C){kt(e,e.return,C)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fp(e,t,n){ge=e,Tu(e)}function Tu(e,t,n){for(var a=(e.mode&1)!==0;ge!==null;){var l=ge,d=l.child;if(l.tag===22&&a){var g=l.memoizedState!==null||Bs;if(!g){var b=l.alternate,C=b!==null&&b.memoizedState!==null||$t;b=Bs;var A=$t;if(Bs=g,($t=C)&&!A)for(ge=l;ge!==null;)g=ge,C=g.child,g.tag===22&&g.memoizedState!==null?_u(l):C!==null?(C.return=g,ge=C):_u(l);for(;d!==null;)ge=d,Tu(d),d=d.sibling;ge=l,Bs=b,$t=A}zu(e)}else(l.subtreeFlags&8772)!==0&&d!==null?(d.return=l,ge=d):zu(e)}}function zu(e){for(;ge!==null;){var t=ge;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:$t||Us(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!$t)if(n===null)a.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Dn(t.type,n.memoizedProps);a.componentDidUpdate(l,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Ac(t,d,a);break;case 3:var g=t.updateQueue;if(g!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ac(t,g,n)}break;case 5:var b=t.stateNode;if(n===null&&t.flags&4){n=b;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&n.focus();break;case"img":C.src&&(n.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var A=t.alternate;if(A!==null){var X=A.memoizedState;if(X!==null){var te=X.dehydrated;te!==null&&ka(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}$t||t.flags&512&&zo(t)}catch(Y){kt(t,t.return,Y)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Au(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function _u(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Us(4,t)}catch(C){kt(t,n,C)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(C){kt(t,l,C)}}var d=t.return;try{zo(t)}catch(C){kt(t,d,C)}break;case 5:var g=t.return;try{zo(t)}catch(C){kt(t,g,C)}}}catch(C){kt(t,t.return,C)}if(t===e){ge=null;break}var b=t.sibling;if(b!==null){b.return=t.return,ge=b;break}ge=t.return}}var Bp=Math.ceil,Hs=L.ReactCurrentDispatcher,Oo=L.ReactCurrentOwner,kn=L.ReactCurrentBatchConfig,Qe=0,_t=null,Pt=null,Ft=0,mn=0,sa=lr(0),Lt=0,Ga=null,Rr=0,Gs=0,Vo=0,$a=null,on=null,Fo=0,ia=1/0,Jn=null,$s=!1,Bo=null,hr=null,Ws=!1,mr=null,qs=0,Wa=0,Uo=null,Ks=-1,Qs=0;function Yt(){return(Qe&6)!==0?tt():Ks!==-1?Ks:Ks=tt()}function gr(e){return(e.mode&1)===0?1:(Qe&2)!==0&&Ft!==0?Ft&-Ft:jp.transition!==null?(Qs===0&&(Qs=Rl()),Qs):(e=lt,e!==0||(e=window.event,e=e===void 0?16:Vl(e.type)),e)}function zn(e,t,n,a){if(50<Wa)throw Wa=0,Uo=null,Error(o(185));ga(e,n,a),((Qe&2)===0||e!==_t)&&(e===_t&&((Qe&2)===0&&(Gs|=n),Lt===4&&xr(e,Ft)),ln(e,a),n===1&&Qe===0&&(t.mode&1)===0&&(ia=tt()+500,Ns&&ur()))}function ln(e,t){var n=e.callbackNode;jf(e,t);var a=as(e,e===_t?Ft:0);if(a===0)n!==null&&at(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&at(n),t===1)e.tag===0?Np(Vu.bind(null,e)):jc(Vu.bind(null,e)),vp(function(){(Qe&6)===0&&ur()}),n=null;else{switch(Il(a)){case 1:n=dn;break;case 4:n=Pn;break;case 16:n=Vr;break;case 536870912:n=El;break;default:n=Vr}n=qu(n,Ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ou(e,t){if(Ks=-1,Qs=0,(Qe&6)!==0)throw Error(o(327));var n=e.callbackNode;if(oa()&&e.callbackNode!==n)return null;var a=as(e,e===_t?Ft:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Js(e,a);else{t=a;var l=Qe;Qe|=2;var d=Bu();(_t!==e||Ft!==t)&&(Jn=null,ia=tt()+500,Dr(e,t));do try{Gp();break}catch(b){Fu(e,b)}while(!0);so(),Hs.current=d,Qe=l,Pt!==null?t=0:(_t=null,Ft=0,t=Lt)}if(t!==0){if(t===2&&(l=ki(e),l!==0&&(a=l,t=Ho(e,l))),t===1)throw n=Ga,Dr(e,0),xr(e,a),ln(e,tt()),n;if(t===6)xr(e,a);else{if(l=e.current.alternate,(a&30)===0&&!Up(l)&&(t=Js(e,a),t===2&&(d=ki(e),d!==0&&(a=d,t=Ho(e,d))),t===1))throw n=Ga,Dr(e,0),xr(e,a),ln(e,tt()),n;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(o(345));case 2:Lr(e,on,Jn);break;case 3:if(xr(e,a),(a&130023424)===a&&(t=Fo+500-tt(),10<t)){if(as(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){Yt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ki(Lr.bind(null,e,on,Jn),t);break}Lr(e,on,Jn);break;case 4:if(xr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var g=31-En(a);d=1<<g,g=t[g],g>l&&(l=g),a&=~d}if(a=l,a=tt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Bp(a/1960))-a,10<a){e.timeoutHandle=Ki(Lr.bind(null,e,on,Jn),a);break}Lr(e,on,Jn);break;case 5:Lr(e,on,Jn);break;default:throw Error(o(329))}}}return ln(e,tt()),e.callbackNode===n?Ou.bind(null,e):null}function Ho(e,t){var n=$a;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=Js(e,t),e!==2&&(t=on,on=n,t!==null&&Go(t)),e}function Go(e){on===null?on=e:on.push.apply(on,e)}function Up(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var l=n[a],d=l.getSnapshot;l=l.value;try{if(!Rn(d(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xr(e,t){for(t&=~Vo,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-En(t),a=1<<n;e[n]=-1,t&=~a}}function Vu(e){if((Qe&6)!==0)throw Error(o(327));oa();var t=as(e,0);if((t&1)===0)return ln(e,tt()),null;var n=Js(e,t);if(e.tag!==0&&n===2){var a=ki(e);a!==0&&(t=a,n=Ho(e,a))}if(n===1)throw n=Ga,Dr(e,0),xr(e,t),ln(e,tt()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lr(e,on,Jn),ln(e,tt()),null}function $o(e,t){var n=Qe;Qe|=1;try{return e(t)}finally{Qe=n,Qe===0&&(ia=tt()+500,Ns&&ur())}}function Ir(e){mr!==null&&mr.tag===0&&(Qe&6)===0&&oa();var t=Qe;Qe|=1;var n=kn.transition,a=lt;try{if(kn.transition=null,lt=1,e)return e()}finally{lt=a,kn.transition=n,Qe=t,(Qe&6)===0&&ur()}}function Wo(){mn=sa.current,ft(sa)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yp(n)),Pt!==null)for(n=Pt.return;n!==null;){var a=n;switch(eo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ks();break;case 3:na(),ft(rn),ft(Ut),ho();break;case 5:fo(a);break;case 4:na();break;case 13:ft(gt);break;case 19:ft(gt);break;case 10:io(a.type._context);break;case 22:case 23:Wo()}n=n.return}if(_t=e,Pt=e=yr(e.current,null),Ft=mn=t,Lt=0,Ga=null,Vo=Gs=Rr=0,on=$a=null,Mr!==null){for(t=0;t<Mr.length;t++)if(n=Mr[t],a=n.interleaved,a!==null){n.interleaved=null;var l=a.next,d=n.pending;if(d!==null){var g=d.next;d.next=l,a.next=g}n.pending=a}Mr=null}return e}function Fu(e,t){do{var n=Pt;try{if(so(),Ls.current=_s,Ts){for(var a=xt.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Ts=!1}if(Er=0,At=Dt=xt=null,Oa=!1,Va=0,Oo.current=null,n===null||n.return===null){Lt=1,Ga=t,Pt=null;break}e:{var d=e,g=n.return,b=n,C=t;if(t=Ft,b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var A=C,X=b,te=X.tag;if((X.mode&1)===0&&(te===0||te===11||te===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var pe=du(g);if(pe!==null){pe.flags&=-257,fu(pe,g,b,d,t),pe.mode&1&&uu(d,A,t),t=pe,C=A;var ye=t.updateQueue;if(ye===null){var ke=new Set;ke.add(C),t.updateQueue=ke}else ye.add(C);break e}else{if((t&1)===0){uu(d,A,t),qo();break e}C=Error(o(426))}}else if(pt&&b.mode&1){var St=du(g);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),fu(St,g,b,d,t),ro(ra(C,b));break e}}d=C=ra(C,b),Lt!==4&&(Lt=2),$a===null?$a=[d]:$a.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var D=lu(d,C,t);zc(d,D);break e;case 1:b=C;var R=d.type,z=d.stateNode;if((d.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(hr===null||!hr.has(z)))){d.flags|=65536,t&=-t,d.lanes|=t;var re=cu(d,b,t);zc(d,re);break e}}d=d.return}while(d!==null)}Hu(n)}catch(be){t=be,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function Bu(){var e=Hs.current;return Hs.current=_s,e===null?_s:e}function qo(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),_t===null||(Rr&268435455)===0&&(Gs&268435455)===0||xr(_t,Ft)}function Js(e,t){var n=Qe;Qe|=2;var a=Bu();(_t!==e||Ft!==t)&&(Jn=null,Dr(e,t));do try{Hp();break}catch(l){Fu(e,l)}while(!0);if(so(),Qe=n,Hs.current=a,Pt!==null)throw Error(o(261));return _t=null,Ft=0,Lt}function Hp(){for(;Pt!==null;)Uu(Pt)}function Gp(){for(;Pt!==null&&!st();)Uu(Pt)}function Uu(e){var t=Wu(e.alternate,e,mn);e.memoizedProps=e.pendingProps,t===null?Hu(e):Pt=t,Oo.current=null}function Hu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Ap(n,t,mn),n!==null){Pt=n;return}}else{if(n=_p(n,t),n!==null){n.flags&=32767,Pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Lt=6,Pt=null;return}}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Lt===0&&(Lt=5)}function Lr(e,t,n){var a=lt,l=kn.transition;try{kn.transition=null,lt=1,$p(e,t,n,a)}finally{kn.transition=l,lt=a}return null}function $p(e,t,n,a){do oa();while(mr!==null);if((Qe&6)!==0)throw Error(o(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(Sf(e,d),e===_t&&(Pt=_t=null,Ft=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Ws||(Ws=!0,qu(Vr,function(){return oa(),null})),d=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||d){d=kn.transition,kn.transition=null;var g=lt;lt=1;var b=Qe;Qe|=4,Oo.current=null,Vp(e,n),Lu(n,e),dp(Wi),os=!!$i,Wi=$i=null,e.current=n,Fp(n),It(),Qe=b,lt=g,kn.transition=d}else e.current=n;if(Ws&&(Ws=!1,mr=e,qs=l),d=e.pendingLanes,d===0&&(hr=null),vf(n.stateNode),ln(e,tt()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],a(l.value,{componentStack:l.stack,digest:l.digest});if($s)throw $s=!1,e=Bo,Bo=null,e;return(qs&1)!==0&&e.tag!==0&&oa(),d=e.pendingLanes,(d&1)!==0?e===Uo?Wa++:(Wa=0,Uo=e):Wa=0,ur(),null}function oa(){if(mr!==null){var e=Il(qs),t=kn.transition,n=lt;try{if(kn.transition=null,lt=16>e?16:e,mr===null)var a=!1;else{if(e=mr,mr=null,qs=0,(Qe&6)!==0)throw Error(o(331));var l=Qe;for(Qe|=4,ge=e.current;ge!==null;){var d=ge,g=d.child;if((ge.flags&16)!==0){var b=d.deletions;if(b!==null){for(var C=0;C<b.length;C++){var A=b[C];for(ge=A;ge!==null;){var X=ge;switch(X.tag){case 0:case 11:case 15:Ha(8,X,d)}var te=X.child;if(te!==null)te.return=X,ge=te;else for(;ge!==null;){X=ge;var Y=X.sibling,pe=X.return;if(Pu(X),X===A){ge=null;break}if(Y!==null){Y.return=pe,ge=Y;break}ge=pe}}}var ye=d.alternate;if(ye!==null){var ke=ye.child;if(ke!==null){ye.child=null;do{var St=ke.sibling;ke.sibling=null,ke=St}while(ke!==null)}}ge=d}}if((d.subtreeFlags&2064)!==0&&g!==null)g.return=d,ge=g;else e:for(;ge!==null;){if(d=ge,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Ha(9,d,d.return)}var D=d.sibling;if(D!==null){D.return=d.return,ge=D;break e}ge=d.return}}var R=e.current;for(ge=R;ge!==null;){g=ge;var z=g.child;if((g.subtreeFlags&2064)!==0&&z!==null)z.return=g,ge=z;else e:for(g=R;ge!==null;){if(b=ge,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Us(9,b)}}catch(be){kt(b,b.return,be)}if(b===g){ge=null;break e}var re=b.sibling;if(re!==null){re.return=b.return,ge=re;break e}ge=b.return}}if(Qe=l,ur(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ts,e)}catch{}a=!0}return a}finally{lt=n,kn.transition=t}}return!1}function Gu(e,t,n){t=ra(n,t),t=lu(e,t,1),e=fr(e,t,1),t=Yt(),e!==null&&(ga(e,1,t),ln(e,t))}function kt(e,t,n){if(e.tag===3)Gu(e,e,n);else for(;t!==null;){if(t.tag===3){Gu(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(hr===null||!hr.has(a))){e=ra(n,e),e=cu(t,e,1),t=fr(t,e,1),e=Yt(),t!==null&&(ga(t,1,e),ln(t,e));break}}t=t.return}}function Wp(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=Yt(),e.pingedLanes|=e.suspendedLanes&n,_t===e&&(Ft&n)===n&&(Lt===4||Lt===3&&(Ft&130023424)===Ft&&500>tt()-Fo?Dr(e,0):Vo|=n),ln(e,t)}function $u(e,t){t===0&&((e.mode&1)===0?t=1:(t=rs,rs<<=1,(rs&130023424)===0&&(rs=4194304)));var n=Yt();e=qn(e,t),e!==null&&(ga(e,t,n),ln(e,n))}function qp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$u(e,n)}function Kp(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(t),$u(e,n)}var Wu;Wu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)sn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return sn=!1,zp(e,t,n);sn=(e.flags&131072)!==0}else sn=!1,pt&&(t.flags&1048576)!==0&&Sc(t,Ss,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Fs(e,t),e=t.pendingProps;var l=Qr(t,Ut.current);ta(t,n),l=xo(null,t,a,e,l,n);var d=yo();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,an(a)?(d=!0,bs(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,co(t),l.updater=Os,t.stateNode=l,l._reactInternals=t,jo(t,a,e,n),t=Po(null,t,a,!0,d,n)):(t.tag=0,pt&&d&&Zi(t),Jt(null,t,l,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Fs(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=Jp(a),e=Dn(a,e),l){case 0:t=Mo(null,t,a,e,n);break e;case 1:t=yu(null,t,a,e,n);break e;case 11:t=pu(null,t,a,e,n);break e;case 14:t=hu(null,t,a,Dn(a.type,e),n);break e}throw Error(o(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Dn(a,l),Mo(e,t,a,l,n);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Dn(a,l),yu(e,t,a,l,n);case 3:e:{if(vu(t),e===null)throw Error(o(387));a=t.pendingProps,d=t.memoizedState,l=d.element,Tc(e,t),Is(t,a,null,n);var g=t.memoizedState;if(a=g.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=ra(Error(o(423)),t),t=wu(e,t,a,n,l);break e}else if(a!==l){l=ra(Error(o(424)),t),t=wu(e,t,a,n,l);break e}else for(hn=or(t.stateNode.containerInfo.firstChild),pn=t,pt=!0,In=null,n=Dc(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xr(),a===l){t=Qn(e,t,n);break e}Jt(e,t,a,n)}t=t.child}return t;case 5:return _c(t),e===null&&no(t),a=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,g=l.children,qi(a,l)?g=null:d!==null&&qi(a,d)&&(t.flags|=32),xu(e,t),Jt(e,t,g,n),t.child;case 6:return e===null&&no(t),null;case 13:return ku(e,t,n);case 4:return uo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Zr(t,null,a,n):Jt(e,t,a,n),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Dn(a,l),pu(e,t,a,l,n);case 7:return Jt(e,t,t.pendingProps,n),t.child;case 8:return Jt(e,t,t.pendingProps.children,n),t.child;case 12:return Jt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,d=t.memoizedProps,g=l.value,ut(Ps,a._currentValue),a._currentValue=g,d!==null)if(Rn(d.value,g)){if(d.children===l.children&&!rn.current){t=Qn(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var b=d.dependencies;if(b!==null){g=d.child;for(var C=b.firstContext;C!==null;){if(C.context===a){if(d.tag===1){C=Kn(-1,n&-n),C.tag=2;var A=d.updateQueue;if(A!==null){A=A.shared;var X=A.pending;X===null?C.next=C:(C.next=X.next,X.next=C),A.pending=C}}d.lanes|=n,C=d.alternate,C!==null&&(C.lanes|=n),oo(d.return,n,t),b.lanes|=n;break}C=C.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(o(341));g.lanes|=n,b=g.alternate,b!==null&&(b.lanes|=n),oo(g,n,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}Jt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,ta(t,n),l=vn(l),a=a(l),t.flags|=1,Jt(e,t,a,n),t.child;case 14:return a=t.type,l=Dn(a,t.pendingProps),l=Dn(a.type,l),hu(e,t,a,l,n);case 15:return mu(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Dn(a,l),Fs(e,t),t.tag=1,an(a)?(e=!0,bs(t)):e=!1,ta(t,n),iu(t,a,l),jo(t,a,l,n),Po(null,t,a,!0,e,n);case 19:return Nu(e,t,n);case 22:return gu(e,t,n)}throw Error(o(156,t.tag))};function qu(e,t){return De(e,t)}function Qp(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,a){return new Qp(e,t,n,a)}function Ko(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jp(e){if(typeof e=="function")return Ko(e)?1:0;if(e!=null){if(e=e.$$typeof,e===le)return 11;if(e===Ve)return 14}return 2}function yr(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,a,l,d){var g=2;if(a=e,typeof e=="function")Ko(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ue:return Tr(n.children,l,d,t);case Me:g=8,l|=8;break;case Re:return e=bn(12,n,t,l|2),e.elementType=Re,e.lanes=d,e;case de:return e=bn(13,n,t,l),e.elementType=de,e.lanes=d,e;case Ne:return e=bn(19,n,t,l),e.elementType=Ne,e.lanes=d,e;case xe:return Xs(n,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:g=10;break e;case ie:g=9;break e;case le:g=11;break e;case Ve:g=14;break e;case ve:g=16,a=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=bn(g,n,t,l),t.elementType=e,t.type=a,t.lanes=d,t}function Tr(e,t,n,a){return e=bn(7,e,a,t),e.lanes=n,e}function Xs(e,t,n,a){return e=bn(22,e,a,t),e.elementType=xe,e.lanes=n,e.stateNode={isHidden:!1},e}function Qo(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function Jo(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yp(e,t,n,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bi(0),this.expirationTimes=bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Yo(e,t,n,a,l,d,g,b,C){return e=new Yp(e,t,n,b,C),t===1?(t=1,d===!0&&(t|=8)):t=0,d=bn(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},co(d),e}function Xp(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Ku(e){if(!e)return cr;e=e._reactInternals;e:{if(Se(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(an(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(an(n))return bc(e,n,t)}return t}function Qu(e,t,n,a,l,d,g,b,C){return e=Yo(n,a,!0,e,l,d,g,b,C),e.context=Ku(null),n=e.current,a=Yt(),l=gr(n),d=Kn(a,l),d.callback=t??null,fr(n,d,l),e.current.lanes=l,ga(e,l,a),ln(e,a),e}function Zs(e,t,n,a){var l=t.current,d=Yt(),g=gr(l);return n=Ku(n),t.context===null?t.context=n:t.pendingContext=n,t=Kn(d,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=fr(l,t,g),e!==null&&(zn(e,l,g,d),Rs(e,l,g)),g}function ei(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ju(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xo(e,t){Ju(e,t),(e=e.alternate)&&Ju(e,t)}function Zp(){return null}var Yu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zo(e){this._internalRoot=e}ti.prototype.render=Zo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));Zs(e,t,null,null)},ti.prototype.unmount=Zo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){Zs(null,e,null,null)}),t[Hn]=null}};function ti(e){this._internalRoot=e}ti.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ar.length&&t!==0&&t<ar[n].priority;n++);ar.splice(n,0,e),n===0&&_l(e)}};function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ni(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xu(){}function eh(e,t,n,a,l){if(l){if(typeof a=="function"){var d=a;a=function(){var A=ei(g);d.call(A)}}var g=Qu(t,a,e,0,null,!1,!1,"",Xu);return e._reactRootContainer=g,e[Hn]=g.current,Ra(e.nodeType===8?e.parentNode:e),Ir(),g}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var b=a;a=function(){var A=ei(C);b.call(A)}}var C=Yo(e,0,!1,null,null,!1,!1,"",Xu);return e._reactRootContainer=C,e[Hn]=C.current,Ra(e.nodeType===8?e.parentNode:e),Ir(function(){Zs(t,C,n,a)}),C}function ri(e,t,n,a,l){var d=n._reactRootContainer;if(d){var g=d;if(typeof l=="function"){var b=l;l=function(){var C=ei(g);b.call(C)}}Zs(t,g,e,l)}else g=eh(n,t,e,l,a);return ei(g)}Dl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ma(t.pendingLanes);n!==0&&(Ni(t,n|1),ln(t,tt()),(Qe&6)===0&&(ia=tt()+500,ur()))}break;case 13:Ir(function(){var a=qn(e,1);if(a!==null){var l=Yt();zn(a,e,1,l)}}),Xo(e,1)}},ji=function(e){if(e.tag===13){var t=qn(e,134217728);if(t!==null){var n=Yt();zn(t,e,134217728,n)}Xo(e,134217728)}},Ll=function(e){if(e.tag===13){var t=gr(e),n=qn(e,t);if(n!==null){var a=Yt();zn(n,e,t,a)}Xo(e,t)}},Tl=function(){return lt},zl=function(e,t){var n=lt;try{return lt=e,t()}finally{lt=n}},Nt=function(e,t,n){switch(t){case"input":if(Le(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var l=ws(a);if(!l)throw Error(o(90));O(a),Le(a,l)}}}break;case"textarea":nt(e,n);break;case"select":t=n.value,t!=null&&it(e,!!n.multiple,t,!1)}},Ge=$o,Ue=Ir;var th={usingClientEntryPoint:!1,Events:[La,qr,ws,$,we,$o]},qa={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nh={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mt(e),e===null?null:e.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||Zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ai=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ai.isDisabled&&ai.supportsFiber)try{ts=ai.inject(nh),_n=ai}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!el(t))throw Error(o(200));return Xp(e,t,null,n)},cn.createRoot=function(e,t){if(!el(e))throw Error(o(299));var n=!1,a="",l=Yu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Yo(e,1,!1,null,null,n,!1,a,l),e[Hn]=t.current,Ra(e.nodeType===8?e.parentNode:e),new Zo(t)},cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Mt(t),e=e===null?null:e.stateNode,e},cn.flushSync=function(e){return Ir(e)},cn.hydrate=function(e,t,n){if(!ni(t))throw Error(o(200));return ri(null,e,t,!0,n)},cn.hydrateRoot=function(e,t,n){if(!el(e))throw Error(o(405));var a=n!=null&&n.hydratedSources||null,l=!1,d="",g=Yu;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),t=Qu(t,null,e,1,n??null,l,!1,d,g),e[Hn]=t.current,Ra(e),a)for(e=0;e<a.length;e++)n=a[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new ti(t)},cn.render=function(e,t,n){if(!ni(t))throw Error(o(200));return ri(null,e,t,!1,n)},cn.unmountComponentAtNode=function(e){if(!ni(e))throw Error(o(40));return e._reactRootContainer?(Ir(function(){ri(null,null,e,!1,function(){e._reactRootContainer=null,e[Hn]=null})}),!0):!1},cn.unstable_batchedUpdates=$o,cn.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!ni(n))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ri(e,t,n,!1,a)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var id;function Hd(){if(id)return rl.exports;id=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),rl.exports=uh(),rl.exports}var od;function dh(){if(od)return si;od=1;var r=Hd();return si.createRoot=r.createRoot,si.hydrateRoot=r.hydrateRoot,si}var fh=dh();const ph=Fd(fh);Hd();function Ya(){return Ya=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},Ya.apply(this,arguments)}var Nn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Nn||(Nn={}));const ld="popstate";function hh(r){r===void 0&&(r={});let{initialEntries:i=["/"],initialIndex:o,v5Compat:c=!1}=r,u;u=i.map((j,S)=>x(j,typeof j=="string"?null:j.state,S===0?"default":void 0));let f=m(o??u.length-1),p=Nn.Pop,h=null;function m(j){return Math.min(Math.max(j,0),u.length-1)}function y(){return u[f]}function x(j,S,M){S===void 0&&(S=null);let P=di(u?y().pathname:"/",j,S,M);return es(P.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(j)),P}function w(j){return typeof j=="string"?j:Xa(j)}return{get index(){return f},get action(){return p},get location(){return y()},createHref:w,createURL(j){return new URL(w(j),"http://localhost")},encodeLocation(j){let S=typeof j=="string"?kr(j):j;return{pathname:S.pathname||"",search:S.search||"",hash:S.hash||""}},push(j,S){p=Nn.Push;let M=x(j,S);f+=1,u.splice(f,u.length,M),c&&h&&h({action:p,location:M,delta:1})},replace(j,S){p=Nn.Replace;let M=x(j,S);u[f]=M,c&&h&&h({action:p,location:M,delta:0})},go(j){p=Nn.Pop;let S=m(f+j),M=u[S];f=S,h&&h({action:p,location:M,delta:j})},listen(j){return h=j,()=>{h=null}}}}function mh(r){r===void 0&&(r={});function i(u,f){let{pathname:p="/",search:h="",hash:m=""}=kr(u.location.hash.substr(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),di("",{pathname:p,search:h,hash:m},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(u,f){let p=u.document.querySelector("base"),h="";if(p&&p.getAttribute("href")){let m=u.location.href,y=m.indexOf("#");h=y===-1?m:m.slice(0,y)}return h+"#"+(typeof f=="string"?f:Xa(f))}function c(u,f){es(u.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(f)+")")}return xh(i,o,c,r)}function yt(r,i){if(r===!1||r===null||typeof r>"u")throw new Error(i)}function es(r,i){if(!r){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function gh(){return Math.random().toString(36).substr(2,8)}function cd(r,i){return{usr:r.state,key:r.key,idx:i}}function di(r,i,o,c){return o===void 0&&(o=null),Ya({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof i=="string"?kr(i):i,{state:o,key:i&&i.key||c||gh()})}function Xa(r){let{pathname:i="/",search:o="",hash:c=""}=r;return o&&o!=="?"&&(i+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(i+=c.charAt(0)==="#"?c:"#"+c),i}function kr(r){let i={};if(r){let o=r.indexOf("#");o>=0&&(i.hash=r.substr(o),r=r.substr(0,o));let c=r.indexOf("?");c>=0&&(i.search=r.substr(c),r=r.substr(0,c)),r&&(i.pathname=r)}return i}function xh(r,i,o,c){c===void 0&&(c={});let{window:u=document.defaultView,v5Compat:f=!1}=c,p=u.history,h=Nn.Pop,m=null,y=x();y==null&&(y=0,p.replaceState(Ya({},p.state,{idx:y}),""));function x(){return(p.state||{idx:null}).idx}function w(){h=Nn.Pop;let P=x(),B=P==null?null:P-y;y=P,m&&m({action:h,location:M.location,delta:B})}function N(P,B){h=Nn.Push;let F=di(M.location,P,B);o&&o(F,P),y=x()+1;let _=cd(F,y),L=M.createHref(F);try{p.pushState(_,"",L)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;u.location.assign(L)}f&&m&&m({action:h,location:M.location,delta:1})}function j(P,B){h=Nn.Replace;let F=di(M.location,P,B);o&&o(F,P),y=x();let _=cd(F,y),L=M.createHref(F);p.replaceState(_,"",L),f&&m&&m({action:h,location:M.location,delta:0})}function S(P){let B=u.location.origin!=="null"?u.location.origin:u.location.href,F=typeof P=="string"?P:Xa(P);return F=F.replace(/ $/,"%20"),yt(B,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,B)}let M={get action(){return h},get location(){return r(u,p)},listen(P){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(ld,w),m=P,()=>{u.removeEventListener(ld,w),m=null}},createHref(P){return i(u,P)},createURL:S,encodeLocation(P){let B=S(P);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:N,replace:j,go(P){return p.go(P)}};return M}var ud;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ud||(ud={}));function yh(r,i,o){return o===void 0&&(o="/"),vh(r,i,o)}function vh(r,i,o,c){let u=typeof i=="string"?kr(i):i,f=pa(u.pathname||"/",o);if(f==null)return null;let p=Gd(r);wh(p);let h=null;for(let m=0;h==null&&m<p.length;++m){let y=Ih(f);h=Eh(p[m],y)}return h}function Gd(r,i,o,c){i===void 0&&(i=[]),o===void 0&&(o=[]),c===void 0&&(c="");let u=(f,p,h)=>{let m={relativePath:h===void 0?f.path||"":h,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};m.relativePath.startsWith("/")&&(yt(m.relativePath.startsWith(c),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(c.length));let y=wr([c,m.relativePath]),x=o.concat(m);f.children&&f.children.length>0&&(yt(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Gd(f.children,i,x,y)),!(f.path==null&&!f.index)&&i.push({path:y,score:Mh(y,f.index),routesMeta:x})};return r.forEach((f,p)=>{var h;if(f.path===""||!((h=f.path)!=null&&h.includes("?")))u(f,p);else for(let m of $d(f.path))u(f,p,m)}),i}function $d(r){let i=r.split("/");if(i.length===0)return[];let[o,...c]=i,u=o.endsWith("?"),f=o.replace(/\?$/,"");if(c.length===0)return u?[f,""]:[f];let p=$d(c.join("/")),h=[];return h.push(...p.map(m=>m===""?f:[f,m].join("/"))),u&&h.push(...p),h.map(m=>r.startsWith("/")&&m===""?"/":m)}function wh(r){r.sort((i,o)=>i.score!==o.score?o.score-i.score:Ph(i.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}const kh=/^:[\w-]+$/,bh=3,Nh=2,jh=1,Sh=10,Ch=-2,dd=r=>r==="*";function Mh(r,i){let o=r.split("/"),c=o.length;return o.some(dd)&&(c+=Ch),i&&(c+=Nh),o.filter(u=>!dd(u)).reduce((u,f)=>u+(kh.test(f)?bh:f===""?jh:Sh),c)}function Ph(r,i){return r.length===i.length&&r.slice(0,-1).every((c,u)=>c===i[u])?r[r.length-1]-i[i.length-1]:0}function Eh(r,i,o){let{routesMeta:c}=r,u={},f="/",p=[];for(let h=0;h<c.length;++h){let m=c[h],y=h===c.length-1,x=f==="/"?i:i.slice(f.length)||"/",w=xl({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},x),N=m.route;if(!w)return null;Object.assign(u,w.params),p.push({params:u,pathname:wr([f,w.pathname]),pathnameBase:Ah(wr([f,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(f=wr([f,w.pathnameBase]))}return p}function xl(r,i){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[o,c]=Rh(r.path,r.caseSensitive,r.end),u=i.match(o);if(!u)return null;let f=u[0],p=f.replace(/(.)\/+$/,"$1"),h=u.slice(1);return{params:c.reduce((y,x,w)=>{let{paramName:N,isOptional:j}=x;if(N==="*"){let M=h[w]||"";p=f.slice(0,f.length-M.length).replace(/(.)\/+$/,"$1")}const S=h[w];return j&&!S?y[N]=void 0:y[N]=(S||"").replace(/%2F/g,"/"),y},{}),pathname:f,pathnameBase:p,pattern:r}}function Rh(r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),es(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let c=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,h,m)=>(c.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(c.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),c]}function Ih(r){try{return r.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return es(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),r}}function pa(r,i){if(i==="/")return r;if(!r.toLowerCase().startsWith(i.toLowerCase()))return null;let o=i.endsWith("/")?i.length-1:i.length,c=r.charAt(o);return c&&c!=="/"?null:r.slice(o)||"/"}const Dh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lh=r=>Dh.test(r);function Th(r,i){i===void 0&&(i="/");let{pathname:o,search:c="",hash:u=""}=typeof r=="string"?kr(r):r,f;if(o)if(Lh(o))f=o;else{if(o.includes("//")){let p=o;o=o.replace(/\/\/+/g,"/"),es(!1,"Pathnames cannot have embedded double slashes - normalizing "+(p+" -> "+o))}o.startsWith("/")?f=fd(o.substring(1),"/"):f=fd(o,i)}else f=i;return{pathname:f,search:_h(c),hash:Oh(u)}}function fd(r,i){let o=i.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?o.length>1&&o.pop():u!=="."&&o.push(u)}),o.length>1?o.join("/"):"/"}function il(r,i,o,c){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zh(r){return r.filter((i,o)=>o===0||i.route.path&&i.route.path.length>0)}function Sl(r,i){let o=zh(r);return i?o.map((c,u)=>u===o.length-1?c.pathname:c.pathnameBase):o.map(c=>c.pathnameBase)}function Cl(r,i,o,c){c===void 0&&(c=!1);let u;typeof r=="string"?u=kr(r):(u=Ya({},r),yt(!u.pathname||!u.pathname.includes("?"),il("?","pathname","search",u)),yt(!u.pathname||!u.pathname.includes("#"),il("#","pathname","hash",u)),yt(!u.search||!u.search.includes("#"),il("#","search","hash",u)));let f=r===""||u.pathname==="",p=f?"/":u.pathname,h;if(p==null)h=o;else{let w=i.length-1;if(!c&&p.startsWith("..")){let N=p.split("/");for(;N[0]==="..";)N.shift(),w-=1;u.pathname=N.join("/")}h=w>=0?i[w]:"/"}let m=Th(u,h),y=p&&p!=="/"&&p.endsWith("/"),x=(f||p===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(y||x)&&(m.pathname+="/"),m}const wr=r=>r.join("/").replace(/\/\/+/g,"/"),Ah=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),_h=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Oh=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Vh(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Wd=["post","put","patch","delete"];new Set(Wd);const Fh=["get",...Wd];new Set(Fh);function Za(){return Za=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},Za.apply(this,arguments)}const gi=v.createContext(null),qd=v.createContext(null),Zn=v.createContext(null),xi=v.createContext(null),er=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Kd=v.createContext(null);function Bh(r,i){let{relative:o}=i===void 0?{}:i;ha()||yt(!1);let{basename:c,navigator:u}=v.useContext(Zn),{hash:f,pathname:p,search:h}=yi(r,{relative:o}),m=p;return c!=="/"&&(m=p==="/"?c:wr([c,p])),u.createHref({pathname:m,search:h,hash:f})}function ha(){return v.useContext(xi)!=null}function br(){return ha()||yt(!1),v.useContext(xi).location}function Qd(r){v.useContext(Zn).static||v.useLayoutEffect(r)}function Ml(){let{isDataRoute:r}=v.useContext(er);return r?em():Uh()}function Uh(){ha()||yt(!1);let r=v.useContext(gi),{basename:i,future:o,navigator:c}=v.useContext(Zn),{matches:u}=v.useContext(er),{pathname:f}=br(),p=JSON.stringify(Sl(u,o.v7_relativeSplatPath)),h=v.useRef(!1);return Qd(()=>{h.current=!0}),v.useCallback(function(y,x){if(x===void 0&&(x={}),!h.current)return;if(typeof y=="number"){c.go(y);return}let w=Cl(y,JSON.parse(p),f,x.relative==="path");r==null&&i!=="/"&&(w.pathname=w.pathname==="/"?i:wr([i,w.pathname])),(x.replace?c.replace:c.push)(w,x.state,x)},[i,c,p,f,r])}function Jd(){let{matches:r}=v.useContext(er),i=r[r.length-1];return i?i.params:{}}function yi(r,i){let{relative:o}=i===void 0?{}:i,{future:c}=v.useContext(Zn),{matches:u}=v.useContext(er),{pathname:f}=br(),p=JSON.stringify(Sl(u,c.v7_relativeSplatPath));return v.useMemo(()=>Cl(r,JSON.parse(p),f,o==="path"),[r,p,f,o])}function Hh(r,i){return Gh(r,i)}function Gh(r,i,o,c){ha()||yt(!1);let{navigator:u}=v.useContext(Zn),{matches:f}=v.useContext(er),p=f[f.length-1],h=p?p.params:{};p&&p.pathname;let m=p?p.pathnameBase:"/";p&&p.route;let y=br(),x;if(i){var w;let P=typeof i=="string"?kr(i):i;m==="/"||(w=P.pathname)!=null&&w.startsWith(m)||yt(!1),x=P}else x=y;let N=x.pathname||"/",j=N;if(m!=="/"){let P=m.replace(/^\//,"").split("/");j="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=yh(r,{pathname:j}),M=Qh(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},h,P.params),pathname:wr([m,u.encodeLocation?u.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?m:wr([m,u.encodeLocation?u.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),f,o,c);return i&&M?v.createElement(xi.Provider,{value:{location:Za({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Nn.Pop}},M):M}function $h(){let r=Zh(),i=Vh(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),o=r instanceof Error?r.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},i),o?v.createElement("pre",{style:u},o):null,null)}const Wh=v.createElement($h,null);class qh extends v.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,o){return o.location!==i.location||o.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:o.error,location:o.location,revalidation:i.revalidation||o.revalidation}}componentDidCatch(i,o){console.error("React Router caught the following error during render",i,o)}render(){return this.state.error!==void 0?v.createElement(er.Provider,{value:this.props.routeContext},v.createElement(Kd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kh(r){let{routeContext:i,match:o,children:c}=r,u=v.useContext(gi);return u&&u.static&&u.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=o.route.id),v.createElement(er.Provider,{value:i},c)}function Qh(r,i,o,c){var u;if(i===void 0&&(i=[]),o===void 0&&(o=null),c===void 0&&(c=null),r==null){var f;if(!o)return null;if(o.errors)r=o.matches;else if((f=c)!=null&&f.v7_partialHydration&&i.length===0&&!o.initialized&&o.matches.length>0)r=o.matches;else return null}let p=r,h=(u=o)==null?void 0:u.errors;if(h!=null){let x=p.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);x>=0||yt(!1),p=p.slice(0,Math.min(p.length,x+1))}let m=!1,y=-1;if(o&&c&&c.v7_partialHydration)for(let x=0;x<p.length;x++){let w=p[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=x),w.route.id){let{loaderData:N,errors:j}=o,S=w.route.loader&&N[w.route.id]===void 0&&(!j||j[w.route.id]===void 0);if(w.route.lazy||S){m=!0,y>=0?p=p.slice(0,y+1):p=[p[0]];break}}}return p.reduceRight((x,w,N)=>{let j,S=!1,M=null,P=null;o&&(j=h&&w.route.id?h[w.route.id]:void 0,M=w.route.errorElement||Wh,m&&(y<0&&N===0?(tm("route-fallback"),S=!0,P=null):y===N&&(S=!0,P=w.route.hydrateFallbackElement||null)));let B=i.concat(p.slice(0,N+1)),F=()=>{let _;return j?_=M:S?_=P:w.route.Component?_=v.createElement(w.route.Component,null):w.route.element?_=w.route.element:_=x,v.createElement(Kh,{match:w,routeContext:{outlet:x,matches:B,isDataRoute:o!=null},children:_})};return o&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?v.createElement(qh,{location:o.location,revalidation:o.revalidation,component:M,error:j,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}var Yd=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Yd||{}),Xd=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Xd||{});function Jh(r){let i=v.useContext(gi);return i||yt(!1),i}function Yh(r){let i=v.useContext(qd);return i||yt(!1),i}function Xh(r){let i=v.useContext(er);return i||yt(!1),i}function Zd(r){let i=Xh(),o=i.matches[i.matches.length-1];return o.route.id||yt(!1),o.route.id}function Zh(){var r;let i=v.useContext(Kd),o=Yh(),c=Zd();return i!==void 0?i:(r=o.errors)==null?void 0:r[c]}function em(){let{router:r}=Jh(Yd.UseNavigateStable),i=Zd(Xd.UseNavigateStable),o=v.useRef(!1);return Qd(()=>{o.current=!0}),v.useCallback(function(u,f){f===void 0&&(f={}),o.current&&(typeof u=="number"?r.navigate(u):r.navigate(u,Za({fromRouteId:i},f)))},[r,i])}const pd={};function tm(r,i,o){pd[r]||(pd[r]=!0)}function ef(r,i){r?.v7_startTransition,r?.v7_relativeSplatPath}const nm="startTransition",hd=Ud[nm];function rm(r){let{basename:i,children:o,initialEntries:c,initialIndex:u,future:f}=r,p=v.useRef();p.current==null&&(p.current=hh({initialEntries:c,initialIndex:u,v5Compat:!0}));let h=p.current,[m,y]=v.useState({action:h.action,location:h.location}),{v7_startTransition:x}=f||{},w=v.useCallback(N=>{x&&hd?hd(()=>y(N)):y(N)},[y,x]);return v.useLayoutEffect(()=>h.listen(w),[h,w]),v.useEffect(()=>ef(f),[f]),v.createElement(tf,{basename:i,children:o,location:m.location,navigationType:m.action,navigator:h,future:f})}function am(r){let{to:i,replace:o,state:c,relative:u}=r;ha()||yt(!1);let{future:f,static:p}=v.useContext(Zn),{matches:h}=v.useContext(er),{pathname:m}=br(),y=Ml(),x=Cl(i,Sl(h,f.v7_relativeSplatPath),m,u==="path"),w=JSON.stringify(x);return v.useEffect(()=>y(JSON.parse(w),{replace:o,state:c,relative:u}),[y,w,u,o,c]),null}function Un(r){yt(!1)}function tf(r){let{basename:i="/",children:o=null,location:c,navigationType:u=Nn.Pop,navigator:f,static:p=!1,future:h}=r;ha()&&yt(!1);let m=i.replace(/^\/*/,"/"),y=v.useMemo(()=>({basename:m,navigator:f,static:p,future:Za({v7_relativeSplatPath:!1},h)}),[m,h,f,p]);typeof c=="string"&&(c=kr(c));let{pathname:x="/",search:w="",hash:N="",state:j=null,key:S="default"}=c,M=v.useMemo(()=>{let P=pa(x,m);return P==null?null:{location:{pathname:P,search:w,hash:N,state:j,key:S},navigationType:u}},[m,x,w,N,j,S,u]);return M==null?null:v.createElement(Zn.Provider,{value:y},v.createElement(xi.Provider,{children:o,value:M}))}function sm(r){let{children:i,location:o}=r;return Hh(yl(i),o)}new Promise(()=>{});function yl(r,i){i===void 0&&(i=[]);let o=[];return v.Children.forEach(r,(c,u)=>{if(!v.isValidElement(c))return;let f=[...i,u];if(c.type===v.Fragment){o.push.apply(o,yl(c.props.children,f));return}c.type!==Un&&yt(!1),!c.props.index||!c.props.children||yt(!1);let p={id:c.props.id||f.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(p.children=yl(c.props.children,f)),o.push(p)}),o}function fi(){return fi=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},fi.apply(this,arguments)}function nf(r,i){if(r==null)return{};var o={},c=Object.keys(r),u,f;for(f=0;f<c.length;f++)u=c[f],!(i.indexOf(u)>=0)&&(o[u]=r[u]);return o}function im(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function om(r,i){return r.button===0&&(!i||i==="_self")&&!im(r)}const lm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cm=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],um="6";try{window.__reactRouterVersion=um}catch{}const dm=v.createContext({isTransitioning:!1}),fm="startTransition",md=Ud[fm];function pm(r){let{basename:i,children:o,future:c,window:u}=r,f=v.useRef();f.current==null&&(f.current=mh({window:u,v5Compat:!0}));let p=f.current,[h,m]=v.useState({action:p.action,location:p.location}),{v7_startTransition:y}=c||{},x=v.useCallback(w=>{y&&md?md(()=>m(w)):m(w)},[m,y]);return v.useLayoutEffect(()=>p.listen(x),[p,x]),v.useEffect(()=>ef(c),[c]),v.createElement(tf,{basename:i,children:o,location:h.location,navigationType:h.action,navigator:p,future:c})}const hm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jn=v.forwardRef(function(i,o){let{onClick:c,relative:u,reloadDocument:f,replace:p,state:h,target:m,to:y,preventScrollReset:x,viewTransition:w}=i,N=nf(i,lm),{basename:j}=v.useContext(Zn),S,M=!1;if(typeof y=="string"&&mm.test(y)&&(S=y,hm))try{let _=new URL(window.location.href),L=y.startsWith("//")?new URL(_.protocol+y):new URL(y),Q=pa(L.pathname,j);L.origin===_.origin&&Q!=null?y=Q+L.search+L.hash:M=!0}catch{}let P=Bh(y,{relative:u}),B=xm(y,{replace:p,state:h,target:m,preventScrollReset:x,relative:u,viewTransition:w});function F(_){c&&c(_),_.defaultPrevented||B(_)}return v.createElement("a",fi({},N,{href:S||P,onClick:M||f?c:F,ref:o,target:m}))}),An=v.forwardRef(function(i,o){let{"aria-current":c="page",caseSensitive:u=!1,className:f="",end:p=!1,style:h,to:m,viewTransition:y,children:x}=i,w=nf(i,cm),N=yi(m,{relative:w.relative}),j=br(),S=v.useContext(qd),{navigator:M,basename:P}=v.useContext(Zn),B=S!=null&&ym(N)&&y===!0,F=M.encodeLocation?M.encodeLocation(N).pathname:N.pathname,_=j.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;u||(_=_.toLowerCase(),L=L?L.toLowerCase():null,F=F.toLowerCase()),L&&P&&(L=pa(L,P)||L);const Q=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let Z=_===F||!p&&_.startsWith(F)&&_.charAt(Q)==="/",ue=L!=null&&(L===F||!p&&L.startsWith(F)&&L.charAt(F.length)==="/"),Me={isActive:Z,isPending:ue,isTransitioning:B},Re=Z?c:void 0,he;typeof f=="function"?he=f(Me):he=[f,Z?"active":null,ue?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let ie=typeof h=="function"?h(Me):h;return v.createElement(jn,fi({},w,{"aria-current":Re,className:he,ref:o,style:ie,to:m,viewTransition:y}),typeof x=="function"?x(Me):x)});var vl;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(vl||(vl={}));var gd;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(gd||(gd={}));function gm(r){let i=v.useContext(gi);return i||yt(!1),i}function xm(r,i){let{target:o,replace:c,state:u,preventScrollReset:f,relative:p,viewTransition:h}=i===void 0?{}:i,m=Ml(),y=br(),x=yi(r,{relative:p});return v.useCallback(w=>{if(om(w,o)){w.preventDefault();let N=c!==void 0?c:Xa(y)===Xa(x);m(r,{replace:N,state:u,preventScrollReset:f,relative:p,viewTransition:h})}},[y,m,x,c,u,o,r,f,p,h])}function ym(r,i){i===void 0&&(i={});let o=v.useContext(dm);o==null&&yt(!1);let{basename:c}=gm(vl.useViewTransitionState),u=yi(r,{relative:i.relative});if(!o.isTransitioning)return!1;let f=pa(o.currentLocation.pathname,c)||o.currentLocation.pathname,p=pa(o.nextLocation.pathname,c)||o.nextLocation.pathname;return xl(u.pathname,p)!=null||xl(u.pathname,f)!=null}var vm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wm=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Wt=(r,i)=>{const o=v.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:f=2,absoluteStrokeWidth:p,className:h="",children:m,...y},x)=>v.createElement("svg",{ref:x,...vm,width:u,height:u,stroke:c,strokeWidth:p?Number(f)*24/Number(u):f,className:["lucide",`lucide-${wm(r)}`,h].join(" "),...y},[...i.map(([w,N])=>v.createElement(w,N)),...Array.isArray(m)?m:[m]]));return o.displayName=`${r}`,o};const xd=Wt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ii=Wt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const km=Wt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const bm=Wt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Nm=Wt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const rf=Wt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const af=Wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const jm=Wt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const pi=Wt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const yd=Wt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const wl=Wt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const kl=Wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Sm=Wt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const vd=Wt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const bl=Wt("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const Cm=Wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Mm=()=>{const[r,i]=v.useState(!1),[o,c]=v.useState(!1),u=br();v.useEffect(()=>{const p=()=>{c(window.scrollY>20)};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),v.useEffect(()=>{i(!1)},[u]);const f=({isActive:p})=>`text-sm font-medium transition-colors duration-300 hover:text-white ${p?"text-white":"text-neutral-300"}`;return s.jsxs("nav",{className:`fixed top-0 left-0 w-full z-50 transition-all duration-300 border-b ${o||r?"bg-neutral-950/80 backdrop-blur-md border-neutral-800 py-4":"bg-transparent border-transparent py-6"}`,children:[s.jsxs("div",{className:"max-w-6xl mx-auto px-6 flex items-center justify-between",children:[s.jsx(An,{to:"/",className:"flex items-center gap-2 group",children:s.jsx("span",{className:"text-lg font-bold tracking-tight text-neutral-100 group-hover:text-white transition-colors",children:"Lucas Zeiger, PhD"})}),s.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[s.jsx(An,{to:"/",className:f,children:"About"}),s.jsx(An,{to:"/research",className:f,children:"Research"}),s.jsx(An,{to:"/news",className:f,children:"News"}),s.jsx(An,{to:"/cv",className:f,children:"CV"}),s.jsx(An,{to:"/playground",className:f,children:"Playground"})]}),s.jsx("button",{className:"md:hidden text-neutral-300 hover:text-white focus:outline-none",onClick:()=>i(!r),children:r?s.jsx(Cm,{size:24}):s.jsx(Sm,{size:24})})]}),s.jsx("div",{className:`md:hidden absolute top-full left-0 w-full bg-neutral-950 border-b border-neutral-800 overflow-hidden transition-all duration-300 ease-in-out ${r?"max-h-64 opacity-100":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-6 py-8",children:[s.jsx(An,{to:"/",className:f,children:"About"}),s.jsx(An,{to:"/research",className:f,children:"Research"}),s.jsx(An,{to:"/news",className:f,children:"News"}),s.jsx(An,{to:"/cv",className:f,children:"CV"}),s.jsx(An,{to:"/playground",className:f,children:"Playground"})]})})]})},Xt={github:"https://github.com/LucasZeiger",linkedin:"https://linkedin.com/in/lucas-zeiger/",twitter:"https://x.com/LBZeiger",scholar:"https://scholar.google.com/citations?user=aIa4KagAAAAJ&hl=en",researchgate:"https://www.researchgate.net/profile/Lucas-Zeiger-2",email:"l.zeiger@crukscotlandinstitute.ac.uk"},Pm=()=>s.jsx("footer",{className:"w-full py-12 border-t border-neutral-900 bg-neutral-950 mt-auto",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"text-neutral-300 text-sm",children:[" ",new Date().getFullYear()," Lucas Zeiger. All rights reserved."]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("a",{href:Xt.github,target:"_blank",rel:"noreferrer",className:"text-neutral-300 hover:text-white transition-colors",children:s.jsx(pi,{size:20})}),s.jsx("a",{href:Xt.linkedin,target:"_blank",rel:"noreferrer",className:"text-neutral-300 hover:text-white transition-colors",children:s.jsx(wl,{size:20})}),s.jsx("a",{href:Xt.twitter,target:"_blank",rel:"noreferrer",className:"text-neutral-300 hover:text-white transition-colors",children:s.jsx(bl,{size:20})}),s.jsx("a",{href:"mailto:contact@lucaszeiger.com",className:"text-neutral-300 hover:text-white transition-colors",children:s.jsx(kl,{size:20})})]})]})}),Em=({children:r})=>s.jsxs("div",{className:"flex flex-col min-h-screen bg-neutral-950 text-neutral-100 font-sans selection:bg-white/20 selection:text-white",children:[s.jsx(Mm,{}),s.jsx("main",{className:"flex-grow pt-10 md:pt-14",children:r}),s.jsx(Pm,{})]}),Rm={label:s.jsx("a",{href:"https://linkedin.com/in/lucas-zeiger/",target:"_blank",rel:"noreferrer",className:"hover:text-emerald-400 transition-colors",children:"Reach out!"})},Im=s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{children:"Hi, I'm Lucas. I have a background in molecular medicine and disease modelling."}),s.jsx("p",{children:"My current work bridges the gap between molecular and computational biology, aiming to understand fundamental and tumour biology through the lense of spatial -omics methods."}),s.jsx("p",{children:"Based at the CRUK Scotland Institute in Glasgow, Scotland, I work with an excellent multidisciplinary team in the computational biology group, led by Prof. Crispin Miller."}),s.jsxs("p",{children:["Please reach out if any of my research interests you,",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"mailto:l.zeiger@crukscotlandinstitute.ac.uk",children:"send me an email"}),", or connect on",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://linkedin.com/in/lucas-zeiger/",target:"_blank",rel:"noreferrer",children:"LinkedIn"}),"!"]})]}),Dm="/assets/spatial_mapk-DUhxDwI6.png",Lm="/assets/Slc7a5-CN9GV8Hf.png",Pl=[{id:"p1",title:"Spatially resolving MAPK dependent CRC plasticiy",category:"Research",description:"Spatial transcriptomics analysis of colorectal cancer and metastases in genetically engineered mouse models.",longDescription:s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mb-4",children:"In collaboration with the colorectal cancer and Wnt signalling group at the CRUK SI, we could demonstrate how colorectal cancer cells are able to shift their phenotype in the context of hyperactive MAPK signalling."}),s.jsx("p",{children:"We used a custom 100 gene panel to spatially resolve cellular plasticity in primary tumors and liver metastases. The publication is available at Nature.com - DOI to follow. The datasets are available at Zenodo - DOI to follow."})]}),openQuestions:["How do we exploit the fact that we can switch cell phenotypes using MAPK inhibitors?","We observed interesting signalling gradients in metastases - how can we better describe these?","Is there correlation between histological phenotype and gene expression programs that are altered as cells shift phenotype?"],imageUrl:Dm,tags:["Spatial Transcriptomics","Xenium","Colorectal cancer","Mouse models","Cell Plasticity","Signalling"],date:"Published 2025",link:"TBC",github:"TBC"},{id:"p2",title:"SLC7A5: An amino acid transporter fuelling colorectal cancer growth",category:"Research",description:"Development of PI3-Kinase hyperactive mouse models and identification of SLC7A5 as a therapeutic target.",longDescription:s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"mb-4",children:"We developed a suite of genetically engineered mouse models of colorectal cancer, harbouring mutations in the PI3-Kinase signalling pathway in combination with other common CRC driver mutations, including APC and KRAS. We found the amino acid transporter SLC7A5 to be upregulated in PI3K mutant tumours, and could show that its genetic deletion leads to a significant extension of survival in these models. Cells display expression of a set of stress response genes and altered amino acid metabolism upon SLC7A5 deletion and in Kras mutant models, SLC7A5 deletion enhances efficacy of MAPK inhibition to extend survival."}),s.jsx("p",{children:"The paper is currently under review at Nature Communications and the preprint can be read here: https://www.researchsquare.com/article/rs-5002395/v1."})]}),openQuestions:["What is the full scope of cellular adaptiations upon Slc7a5 deletion, are there any synthetic lethalities we could exploit?","What setting will Slc7a5 depletion work best in the clinic?","Viewing tumours as ecosystems, what is the impact of Slc7a5 deletion on the local availability of nutrients?"],imageUrl:Lm,tags:["Disease modelling","Genetically engineered mouse models","PI3K signalling","Colorectal Cancer","Metabolism","Slc7a5"],date:"2017 - ongoing",link:"https://www.researchsquare.com/article/rs-5002395/v1",github:"NA"}],sf=[{id:"merry-christmas-2025",title:"Merry Christmas and a happy new year!",date:"2025-12-24",displayDate:"24 Dec 2025",summary:"Snowy greetings from Austria.",body:s.jsx(s.Fragment,{children:s.jsx("p",{children:"Wishing everyone a restful holiday season and a happy new year!"})})},{id:"mapk-plasticity-nature-2025",title:"Early access publication: MAPK-driven epithelial cell plasticity",date:"2025-11-24",displayDate:"24 Nov 2025",summary:"Accelerated early access publication in Nature.",body:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:'Our manuscript, "MAPK-driven epithelial cell plasticity drives colorectal cancer therapeutic resistance," is now available as an accelerated early access publication in Nature.'}),s.jsxs("p",{className:"mt-4",children:["Read the paper at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://www.nature.com/articles/s41586-025-09916-w",target:"_blank",rel:"noreferrer",children:"nature.com"}),", and view the analysis workflow at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://github.com/LucasZeiger/MAPK-Plasticity",target:"_blank",rel:"noreferrer",children:"GitHub"}),"."]})]})},{id:"muspan-workshop-2025",title:"MuSpAn advanced workshop in Glasgow",date:"2025-10-27",displayDate:"27-30 Oct 2025",summary:"Attended MuSpAn at CRUK SI led by Josh Moore and Josh Bull.",body:s.jsx(s.Fragment,{children:s.jsx("p",{children:"Attended the MuSpAn advanced workshop at CRUK Scotland Institute in Glasgow, led by Josh Moore and Josh Bull. Thanks for the great workshop and community."})})},{id:"spatial-biology-conference-2025",title:"Spatial Biology, the melting pot conference",date:"2025-10-14",displayDate:"14-17 Oct 2025",summary:"Presented Poster at the Spatial Biology Society conference at EMBL Heidelberg.",body:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:'Presented a poster at the "Spatial Biology, the melting pot" conference at the EMBL Advanced Training Centre in Heidelberg.'}),s.jsxs("p",{className:"mt-4",children:["Details at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://spatialbiologysociety.eu/conference-2025",target:"_blank",rel:"noreferrer",children:"spatialbiologysociety.eu"}),"."]})]})},{id:"febs-openbio-poster-prize-2025",title:"FEBS-IUBMB-Enable conference and OpenBio poster prize",date:"2025-09-10",displayDate:"10-12 Sep 2025",summary:"Attended FEBS-IUBMB-Enable and won the FEBS OpenBio poster prize.",body:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Attended the FEBS-IUBMB-Enable conference in Glasgow and won the FEBS OpenBio poster prize."}),s.jsxs("p",{className:"mt-4",children:["Conference info at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://febs-iubmb-enableconference.org/glasgow-2025-2/",target:"_blank",rel:"noreferrer",children:"febs-iubmb-enableconference.org"}),", and the prize announcement at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://febs.onlinelibrary.wiley.com/hub/journal/22115463/febs-congress",target:"_blank",rel:"noreferrer",children:"febs.onlinelibrary.wiley.com"}),"."]})]})},{id:"beatson-cancer-conference-2025",title:"Beatson International Cancer Conference: Cancer Models",date:"2025-05-27",displayDate:"27-29 May 2025",summary:"Attended the Beatson International Cancer Conference in Glasgow.",body:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Attended the Beatson International Cancer Conference - Cancer Models: From data to discovery, at the Glasgow Science Centre."}),s.jsxs("p",{className:"mt-4",children:["Details at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://www.beatsonconference.org/",target:"_blank",rel:"noreferrer",children:"beatsonconference.org"}),". Already looking forward to the next one!"]})]})},{id:"crispin-miller-group-2025",title:"Joined Prof. Crispin Miller to work in the Computational biology group at CRUK Scotland Institute",date:"2025-05-01",displayDate:"1 May 2025",summary:"Started a 3+3 year contract in the computational biology group.",body:s.jsx(s.Fragment,{children:s.jsx("p",{children:"Started a position in Prof. Crispin Miller's group as a postdoctoral research scientist at the CRUK Scotland Institute on a 3+3 year contract."})})},{id:"slc7a5-manuscript-2024",title:"First-author manuscript available: SLC7A5 drives PI3K-mutant intestinal cancer",date:"2024-09-26",displayDate:"26 Sep 2024",summary:"Research Square preprint available; revisions are underway.",body:s.jsxs(s.Fragment,{children:[s.jsx("p",{children:'My latest first-author manuscript preprint, "The amino acid transporter SLC7A5 drives progression of PI3K-mutant intestinal cancer models and enhances response to MAPK-targeted therapy," is available on Research Square.'}),s.jsxs("p",{className:"mt-4",children:["Read it at",s.jsx("a",{className:"text-emerald-400 hover:text-emerald-300 ml-1",href:"https://www.researchsquare.com/article/rs-5002395/v1",target:"_blank",rel:"noreferrer",children:"researchsquare.com"}),". Revisions addressing five reviewers' comments are underway."]})]})}],of=[{id:"e1",role:"Postdoctoral Research Scientist, Computational Biology (with Prof. Crispin Miller)",institution:"CRUK Scotland Institute",period:"11/2024 - Present",location:"Glasgow, UK",description:"Computational biology research with a focus on spatial transcriptomics."},{id:"e2",role:"Postdoctoral Research Scientist, Integrative Modelling (with Xiao Fu, Phd)",institution:"CRUK Scotland Institute",period:"03/2024 - 10/2024",location:"Glasgow, UK",description:"Computational biology research with a focus on spatial transcriptomics."},{id:"e3",role:"Postdoctoral Research Scientist, Colorectal Cancer and Wnt Signalling (with Prof. Owen Sansom)",institution:"CRUK Scotland Institute",period:"07/2022 - 03/2024",location:"Glasgow, UK",description:"Investigating oncogenic PI3K signalling using genetically engineered mouse models of colon cancer."},{id:"e4",role:"PhD Studentship, Colorectal Cancer and Wnt Signalling (with Prof. Owen Sansom)",institution:"CRUK Scotland Institute",period:"10/2017 - 07/2022",location:"Glasgow, UK",description:"Investigating oncogenic PI3K signalling using genetically engineered mouse models of colon cancer."},{id:"e5",role:"Master's Thesis, Department of Infectiology, Immunology, Pneumology (with Prof. Ivan Tancevski)",institution:"University clinic department for internal medicine II, Medical University of Innsbruck",period:"02/2017 - 09/2017",location:"Innsbruck, Austria",description:"CRISPR-Cas9 mediated KO of the lipid transporter in J774a.1 macrophages"},{id:"e5",role:"Bachelor's Thesis, Department of  Physiology & Medical Physics (with Prof. Bernhard Flucher)",institution:"Medical University of Innsbruck",period:"03/2015 - 09/2015",location:"Innsbruck, Austria",description:"Expression of Stac3 in dysgenic myotubes"}],lf=[{id:"ed1",degree:"PhD in Cancer Science",institution:"University of Glasgow",year:"2017 - 2022"},{id:"ed2",degree:"Master's degree in Molecular Medicine",institution:"Medical University of Innsbruck",year:"2015 - 2017"},{id:"ed3",degree:"Bachelor's degree in Molecular Medicine",institution:"Medical University of Innsbruck",year:"2012 - 2015"}],cf=[{id:"pub0",title:"MAPK-driven epithelial cell plasticity drives colorectal cancer therapeutic resistance",journal:"Nature",year:2025,authors:"White, Mark; Mills, Megan L.; Millett, Laura M.; Gilroy, Kathryn; Hong, Yourae; Zeiger, Lucas B.; Simpson, Rosalin J.; Corry, Shania M.; Ligeza, Amelia; Lannagan, Tamsin R. M.; Susanti, Susanti; Ridgway, Rachel A.; Yazgili, Ayse S.; Grzesiak, Lucile; Amirkhah, Raheleh; Ford, Catriona A.; Vlahov, Nikola; Tovell, Hannah; Officer-Jones, Leah; Ficken, Catherine; Pennie, Rachel; Najumudeen, Arafath K.; Raven, Alexander; Nasreddin, Nadia; Chauhan, Ekansh; Papanastasiou, Andrew S.; Nixon, Colin; Morrison, Vivienne; Jackstadt, Rene; Graham, Janet S.; Miller, Crispin J.; Ross, Sarah J.; Barry, Simon T.; Pavet, Valeria; Wilson, Richard H.; Le Quesne, John; Dunne, Philip D.; Tejpar, Sabine; Leedham, Simon; Campbell, Andrew D.; Sansom, Owen J."},{id:"pub1",title:"The amino acid transporter SLC7A5 drives progression of PI3K-mutant intestinal cancer models and enhances response to MAPK-targeted therapy",journal:"Research Square",year:2024,authors:"Zeiger, Lucas B.; Ford, Catriona; Millett, Laura; Meniel, Valerie; Najumudeen, Arafath; Pennel, Kathryn; Fisher, Natalie; Gilroy, Kathryn; Sphyris, Nathalie; Uribe, Alejandro Huerta; Sumpton, David; Hatthakarnkul, Phimmada; McLaughlin, Sophie; Jones, Phil; Vanhaesebroeck, Bart; Ridgway, Rachel; Nixon, Colin; Pearson, Helen; Phesse, Toby; Barry, Simon; Edwards, Joanne; Dunne, Philip; Campbell, Andrew; Sansom, Owen"},{id:"pub2",title:"Metabolic profiling stratifies colorectal cancer and reveals adenosylhomocysteinase as a therapeutic target",journal:"Nature Metabolism",year:2023,authors:"Vande Voorde, Johan; Steven, Rory T.; Najumudeen, Arafath K.; Ford, Catriona A.; Dexter, Alex; Gonzalez-Fernandez, Ariadna; Nikula, Chelsea J.; Xiang, Yuchen; Ford, Lauren; Maneta Stavrakaki, Stefania; Gilroy, Kathryn; Zeiger, Lucas B.; Pennel, Kathryn; Hatthakarnkul, Phimmada; Elia, Efstathios A.; Nasif, Ammar; Murta, Teresa; Manoli, Eftychios; Mason, Sam; Gillespie, Michael; Lannagan, Tamsin R. M.; Vlahov, Nikola; Ridgway, Rachel A.; Nixon, Colin; Raven, Alexander; Mills, Megan; Athineos, Dimitris; Kanellos, Georgios; Nourse, Craig; Gay, David M.; Hughes, Mark; Burton, Amy; Yan, Bin; Sellers, Katherine; Wu, Vincen; De Ridder, Kobe; Shokry, Engy; Huerta Uribe, Alejandro; Clark, William; Clark, Graeme; Kirschner, Kristina; Thienpont, Bernard; Li, Vivian S. W.; Maddocks, Oliver D. K.; Barry, Simon T.; Goodwin, Richard J. A.; Kinross, James; Edwards, Joanne; Yuneva, Mariia O.; Sumpton, David; Takats, Zoltan; Campbell, Andrew D.; Bunch, Josephine; Sansom, Owen J."},{id:"pub3",title:"A RAC-GEF network critical for early intestinal tumourigenesis",journal:"Nature Communications",year:2021,authors:"Pickering, K. A.; Gilroy, K.; Cassidy, J. W.; Fey, S. K.; Najumudeen, A. K.; Zeiger, L. B.; Vincent, D. F.; Gay, D. M.; Johansson, J.; Fordham, R. P.; Miller, B.; Clark, W.; Hedley, A.; Unal, E. B.; Kiel, C.; McGhee, E.; Machesky, L. M.; Nixon, C.; Johnsson, A. E.; Bain, M.; Strathdee, D.; van Hoof, S. R.; Medema, J. P.; Anderson, K. I.; Brachmann, S. M.; Stucke, V. M.; Malliri, A.; Drysdale, M.; Turner, M.; Serrano, L.; Myant, K.; Campbell, A. D.; Sansom, O. J."},{id:"pub4",title:"Implications of Peak Selection in the Interpretation of Unsupervised Mass Spectrometry Imaging Data Analyses",journal:"Analytical Chemistry",year:2021,authors:"Murta, Teresa; Steven, Rory T.; Nikula, Chelsea J.; Thomas, Spencer A.; Zeiger, Lucas B.; Dexter, Alex; Elia, Efstathios A.; Yan, Bin; Campbell, Andrew D.; Goodwin, Richard J. A.; Takats, Zoltan; Sansom, Owen J.; Bunch, Josephine"},{id:"pub5",title:"The haemochromatosis gene Hfe and Kupffer cells control LDL cholesterol homeostasis and impact on atherosclerosis development.",journal:"European Heart Journal",year:2020,authors:"Demetz, E.; Tymoszuk, P.; Hilbe, R.; Volani, C.; Haschka, D.; Heim, C.; Auer, K.; Lener, D.; Zeiger, L. B.; Pfeifhofer-Obermair, C.; Boehm, A.; Obermair, G. J.; Ablinger, C.; Weiss, G."},{id:"pub6",title:"Wnt ligands influence tumour initiation by controlling the number of intestinal stem cells.",journal:"Nature Communications",year:2018,authors:"Huels, D. J.; Bruens, L.; Hodder, M. C.; Cammareri, P.; Campbell, A. D.; Ridgway, R. A.; Gay, D. M.; Solar-Abboud, M.; Faller, W. J.; Nixon, C.; Zeiger, L. B.; McLaughlin, M. E.; Sansom, O. J."}],Tm="0000-0002-8712-3112",zm=[{id:"197791245",title:"MAPK-driven epithelial cell plasticity drives colorectal cancer therapeutic resistance",journal:"Nature",year:2025,authors:"Mark White; Megan L. Mills; Laura M. Millett; Kathryn Gilroy; Yourae Hong; Lucas B. Zeiger; Rosalin J. Simpson; Shania M. Corry; Amelia Ligeza; Tamsin R. M. Lannagan; Susanti Susanti; Rachel A. Ridgway; Ayse S. Yazgili; Lucile Grzesiak; Raheleh Amirkhah; Catriona A. Ford; Nikola Vlahov; Hannah Tovell; Leah Officer-Jones; Catherine Ficken; Rachel Pennie; Arafath K. Najumudeen; Alexander Raven; Nadia Nasreddin; Ekansh Chauhan; Andrew S. Papanastasiou; Colin Nixon; Vivienne Morrison; Rene Jackstadt; Janet S. Graham; Crispin J. Miller; Sarah J. Ross; Simon T. Barry; Valeria Pavet; Richard H. Wilson; John Le Quesne; Philip D. Dunne; Sabine Tejpar; Simon Leedham; Andrew D. Campbell; Owen J. Sansom",doi:"10.1038/s41586-025-09916-w",url:"https://doi.org/10.1038/s41586-025-09916-w",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"197761710",title:"The amino acid transporter SLC7A5 drives progression of PI3K-mutant intestinal cancer models and enhances response to MAPK-targeted therapy",journal:"",year:2024,authors:"Lucas Zeiger; Catriona Ford; Laura Millett; Valerie Meniel; Arafath Najumudeen; Kathryn Pennel; Natalie Fisher; Kathryn Gilroy; Nathalie Sphyris; Alejandro Huerta Uribe; David Sumpton; Phimmada Hatthakarnkul; Sophie McLaughlin; Phil Jones; Bart Vanhaesebroeck; Rachel Ridgway; Colin Nixon; Helen Pearson; Toby Phesse; Simon Barry; Joanne Edwards; Philip Dunne; Andrew Campbell; Owen Sansom",doi:"10.21203/rs.3.rs-5002395/v1",url:"http://dx.doi.org/10.21203/rs.3.rs-5002395/v1",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"preprint"},{id:"147191305",title:"Metabolic profiling stratifies colorectal cancer and reveals adenosylhomocysteinase as a therapeutic target",journal:"Nature Metabolism",year:2023,authors:"Johan Vande Voorde; Rory T. Steven; Arafath K. Najumudeen; Catriona A. Ford; Alex Dexter; Ariadna Gonzalez-Fernandez; Chelsea J. Nikula; Yuchen Xiang; Lauren Ford; Stefania Maneta Stavrakaki; Kathryn Gilroy; Lucas B. Zeiger; Kathryn Pennel; Phimmada Hatthakarnkul; Efstathios A. Elia; Ammar Nasif; Teresa Murta; Eftychios Manoli; Sam Mason; Michael Gillespie; Tamsin R. M. Lannagan; Nikola Vlahov; Rachel A. Ridgway; Colin Nixon; Alexander Raven; Megan Mills; Dimitris Athineos; Georgios Kanellos; Craig Nourse; David M. Gay; Mark Hughes; Amy Burton; Bin Yan; Katherine Sellers; Vincen Wu; Kobe De Ridder; Engy Shokry; Alejandro Huerta Uribe; William Clark; Graeme Clark; Kristina Kirschner; Bernard Thienpont; Vivian S. W. Li; Oliver D. K. Maddocks; Simon T. Barry; Richard J. A. Goodwin; James Kinross; Joanne Edwards; Mariia O. Yuneva; David Sumpton; Zoltan Takats",doi:"10.1038/s42255-023-00857-0",url:"http://dx.doi.org/10.1038/s42255-023-00857-0",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"86188577",title:"A RAC-GEF network critical for early intestinal tumourigenesis",journal:"Nature Communications",year:2021,authors:"K. A. Pickering; K. Gilroy; J. W. Cassidy; S. K. Fey; A. K. Najumudeen; L. B. Zeiger; D. F. Vincent; D. M. Gay; J. Johansson; R. P. Fordham; B. Miller; W. Clark; A. Hedley; E. B. Unal; C. Kiel; E. McGhee; L. M. Machesky; C. Nixon; A. E. Johnsson; M. Bain; D. Strathdee; S. R. van Hoof; J. P. Medema; K. I. Anderson; S. M. Brachmann; V. M. Stucke; A. Malliri; M. Drysdale; M. Turner; L. Serrano; K. Myant; A. D. Campbell; O. J. Sansom",doi:"10.1038/s41467-020-20255-4",url:"https://doi.org/10.1038/s41467-020-20255-4",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"200901153",title:"Implications of Peak Selection in the Interpretation of Unsupervised Mass Spectrometry Imaging Data Analyses",journal:"Analytical Chemistry",year:2021,authors:"Teresa Murta; Rory T. Steven; Chelsea J. Nikula; Spencer A. Thomas; Lucas B. Zeiger; Alex Dexter; Efstathios A. Elia; Bin Yan; Andrew D. Campbell; Richard J. A. Goodwin; Zoltan Takts; Owen J. Sansom; Josephine Bunch",doi:"10.1021/acs.analchem.0c04179",url:"https://doi.org/10.1021/acs.analchem.0c04179",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"71821969",title:"The haemochromatosis gene Hfe and Kupffer cells control LDL cholesterol homeostasis and impact on atherosclerosis development",journal:"European Heart Journal",year:2020,authors:"Egon Demetz; Piotr Tymoszuk; Richard Hilbe; Chiara Volani; David Haschka; Christiane Heim; Kristina Auer; Daniela Lener; Lucas B Zeiger; Christa Pfeifhofer-Obermair; Anna Boehm; Gerald J Obermair; Cornelia Ablinger; Stefan Coassin; Claudia Lamina; Juliane Kager; Verena Petzer; Malte Asshoff; Andrea Schroll; Manfred Nairz; Stefanie Dichtl; Markus Seifert; Laura von Raffay; Christine Fischer; Marina Barros-Pinkelnig; Natascha Brigo; Lara Valente de Souza; Sieghart Sopper; Jakob Hirsch; Michael Graber; Can Gollmann-Tepekyl; Johannes Holfeld; Julia Halper; Sophie Macheiner; Johanna Gostner; Georg F Vogel; Raimund Pechlaner; Patrizia Moser; Medea Imboden; Pedro Marques-Vidal; Nicole M Probst-Hensch; Heike Meiselbach; Konstantin Strauch; Annette Peters; Bernhard Paulweber; Johann Willeit; Stefan Kiechl; Florian Kronenberg; Igor Theurl; Ivan Tancevski; Guenter Weiss",doi:"10.1093/eurheartj/ehaa140",url:"https://doi.org/10.1093/eurheartj/ehaa140",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"71489442",title:"The haemochromatosis gene Hfe and Kupffer cells control LDL cholesterol homeostasis and impact on atherosclerosis development.",journal:"European heart journal",year:2020,authors:"Demetz E; Tymoszuk P; Hilbe R; Volani C; Haschka D; Heim C; Auer K; Lener D; Zeiger LB; Pfeifhofer-Obermair C; Boehm A; Obermair GJ; Ablinger C; Weiss G",doi:"10.1093/eurheartj/ehaa140",url:"http://europepmc.org/abstract/med/32227235",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"},{id:"71489443",title:"Wnt ligands influence tumour initiation by controlling the number of intestinal stem cells.",journal:"Nature communications",year:2018,authors:"Huels DJ; Bruens L; Hodder MC; Cammareri P; Campbell AD; Ridgway RA; Gay DM; Solar-Abboud M; Faller WJ; Nixon C; Zeiger LB; McLaughlin ME; Sansom OJ",doi:"10.1038/s41467-018-03426-2",url:"http://europepmc.org/abstract/med/29556067",orcidUrl:"https://orcid.org/0000-0002-8712-3112",type:"journal-article"}],_r={orcid:Tm,publications:zm},uf=({project:r})=>s.jsxs(jn,{to:`/research/${r.id}`,className:"group flex flex-col bg-neutral-900 border border-neutral-800 rounded-xl overflow-hidden hover:border-neutral-600 transition-all duration-300 h-full shadow-sm hover:shadow-lg hover:shadow-neutral-900/50",children:[s.jsxs("div",{className:"h-48 overflow-hidden relative flex-shrink-0",children:[s.jsx("div",{className:"absolute inset-0 bg-neutral-950/20 group-hover:bg-transparent transition-colors z-10"}),s.jsx("img",{src:r.imageUrl,alt:r.title,className:"w-full h-full object-cover transform md:group-hover:scale-105 transition-transform duration-700 grayscale-0 md:grayscale md:group-hover:grayscale-0"}),s.jsx("div",{className:"absolute top-4 right-4 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.jsx("div",{className:"bg-white text-black p-1.5 rounded-full",children:s.jsx(km,{size:16})})})]}),s.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[s.jsx("div",{className:"flex justify-between items-start mb-3",children:s.jsx("span",{className:"text-xs font-mono text-neutral-300 bg-neutral-800 px-2 py-1 rounded border border-neutral-700",children:r.category})}),s.jsx("h3",{className:"text-xl font-bold text-neutral-100 mb-2 group-hover:text-white",children:r.title}),s.jsx("p",{className:"text-neutral-300 text-sm leading-relaxed mb-6 line-clamp-3 flex-grow",children:r.description}),s.jsxs("div",{className:"pt-4 border-t border-neutral-800 mt-auto flex justify-between items-center",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.slice(0,3).map(i=>s.jsxs("span",{className:"text-xs text-neutral-500",children:["#",i]},i))}),s.jsxs("span",{className:"text-xs font-medium text-neutral-200 flex items-center gap-1 group-hover:translate-x-1 transition-transform",children:["Read More ",s.jsx(rf,{size:14})]})]})]})]}),fa=({title:r,subtitle:i,date:o,children:c,tags:u,className:f=""})=>s.jsxs("div",{className:`group p-6 rounded-xl bg-neutral-900/40 border border-neutral-800 hover:border-neutral-700 hover:bg-neutral-900/60 transition-all duration-300 ${f}`,children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-neutral-100 group-hover:text-white transition-colors",children:r}),i&&s.jsx("p",{className:"text-neutral-300 font-medium text-sm mt-1",children:i})]}),o&&s.jsx("span",{className:"text-xs font-mono text-neutral-300 bg-neutral-900 px-2 py-1 rounded border border-neutral-800 whitespace-nowrap",children:o})]}),s.jsx("div",{className:"text-neutral-300 text-sm leading-relaxed mt-3",children:c}),u&&u.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-neutral-800/50",children:u.map(p=>s.jsx("span",{className:"text-xs text-neutral-300 bg-neutral-950 px-2 py-1 rounded border border-neutral-800",children:p},p))})]}),Am="/assets/profile-B2BGmAUo.jpg",_m=()=>{const r=v.useRef(null),i=()=>{r.current&&r.current.scrollBy({left:-320,behavior:"smooth"})},o=()=>{r.current&&r.current.scrollBy({left:320,behavior:"smooth"})},c=_r.publications||[],f=[...c.length>0?c:cf].sort((x,w)=>w.year-x.year),p=`https://orcid.org/${_r.orcid}`,h=[...sf].sort((x,w)=>{const N=new Date(x.date).getTime(),j=new Date(w.date).getTime();return Number.isNaN(N)&&console.warn(`Invalid news date for "${x.title}": ${x.date}`),Number.isNaN(j)&&console.warn(`Invalid news date for "${w.title}": ${w.date}`),Number.isNaN(N)&&Number.isNaN(j)?0:Number.isNaN(N)?1:Number.isNaN(j)?-1:j-N}),m=x=>x.doi?{href:`https://doi.org/${x.doi}`,label:"DOI"}:x.url?{href:x.url,label:"Link"}:x.orcidUrl?{href:x.orcidUrl,label:"ORCID"}:p?{href:p,label:"ORCID"}:null,y=x=>{x.preventDefault(),alert("In a real deployment, this would download 'cv.pdf'. Please ensure you add a file named 'cv.pdf' to your public directory.")};return s.jsxs("div",{className:"animate-in fade-in duration-700",children:[s.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-12 md:py-20 grid md:grid-cols-2 gap-12 items-center min-h-[70vh]",children:[s.jsxs("div",{className:"space-y-6 md:space-y-8 order-2 md:order-1",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-900 border border-neutral-800 text-xs font-medium text-emerald-500",children:[s.jsxs("span",{className:"relative flex h-2 w-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),Rm.label]}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight text-white leading-tight",children:["Mapping the Architecture of ",s.jsx("span",{className:"text-neutral-500",children:"Health and Disease."})]}),s.jsx("p",{className:"text-lg text-neutral-300 leading-relaxed max-w-lg",children:"Lucas Zeiger, PhD | CRUK Scotland Institute | Glasgow"}),s.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-black rounded-lg font-medium hover:bg-neutral-200 transition-colors",onClick:x=>{x.preventDefault(),document.getElementById("research")?.scrollIntoView({behavior:"smooth"})},children:["View Research ",s.jsx(ii,{size:18})]}),s.jsx("button",{className:"inline-flex items-center gap-2 px-6 py-3 bg-neutral-900 border border-neutral-800 text-white rounded-lg font-medium hover:bg-neutral-800 transition-colors",onClick:x=>{x.preventDefault(),document.getElementById("cv")?.scrollIntoView({behavior:"smooth"})},children:"Curriculum Vitae"})]})]}),s.jsxs("div",{className:"relative flex flex-col items-center md:items-end mt-8 md:mt-0 order-1 md:order-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-neutral-800/20 blur-2xl rounded-full transform scale-90"}),s.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80 rounded-2xl overflow-hidden border border-neutral-800 shadow-2xl bg-neutral-900 transition-all duration-700",children:[s.jsx("img",{src:Am,alt:"Lucas Zeiger",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-neutral-950/60 via-transparent to-transparent"})]}),s.jsx("div",{className:"absolute -bottom-6 -right-6 md:bottom-6 md:-left-12 md:right-auto bg-neutral-900/90 backdrop-blur border border-neutral-800 px-6 py-3 rounded-xl shadow-xl z-20",children:s.jsx("p",{className:"text-white font-bold text-lg whitespace-nowrap",children:"Lucas Zeiger, PhD"})})]}),s.jsxs("div",{className:"mt-10 flex gap-3",children:[s.jsx("a",{href:Xt.github,target:"_blank",rel:"noreferrer","aria-label":"GitHub",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(pi,{size:18})}),s.jsx("a",{href:Xt.linkedin,target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(wl,{size:18})}),s.jsx("a",{href:Xt.twitter,target:"_blank",rel:"noreferrer","aria-label":"Twitter/X",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(bl,{size:18})}),s.jsx("a",{href:Xt.scholar,target:"_blank",rel:"noreferrer","aria-label":"Google Scholar",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(yd,{size:18})}),s.jsx("a",{href:Xt.researchgate,target:"_blank",rel:"noreferrer","aria-label":"ResearchGate",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(vd,{size:18})}),s.jsx("a",{href:`mailto:${Xt.email}`,"aria-label":"Email",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(kl,{size:18})})]})]})]}),s.jsx("section",{className:"bg-neutral-900/20 py-16 border-y border-neutral-900",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"About Me"}),s.jsx("div",{className:"text-neutral-300 leading-8 text-lg",children:Im})]})}),s.jsx("section",{id:"research",className:"py-24 border-b border-neutral-900",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[s.jsxs("div",{className:"flex justify-between items-end mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Research Highlights"}),s.jsx("p",{className:"text-neutral-300",children:"Swipe to explore recent projects."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:i,className:"p-2 rounded-full border border-neutral-800 hover:bg-neutral-800 text-neutral-300 hover:text-white transition-colors",children:s.jsx(Nm,{size:20})}),s.jsx("button",{onClick:o,className:"p-2 rounded-full border border-neutral-800 hover:bg-neutral-800 text-neutral-300 hover:text-white transition-colors",children:s.jsx(rf,{size:20})})]})]}),s.jsxs("div",{ref:r,className:"flex gap-6 overflow-x-auto pb-8 -mx-6 px-6 no-scrollbar snap-x snap-mandatory",children:[Pl.map(x=>s.jsx("div",{className:"min-w-[85vw] md:min-w-[350px] lg:min-w-[400px] snap-center",children:s.jsx(uf,{project:x})},x.id)),s.jsx("div",{className:"min-w-[200px] snap-center flex items-center justify-center",children:s.jsxs(jn,{to:"/research",className:"group flex flex-col items-center gap-3 text-neutral-300 hover:text-white transition-colors p-8",children:[s.jsx("div",{className:"p-4 rounded-full border border-neutral-800 bg-neutral-900 group-hover:border-neutral-600 transition-colors",children:s.jsx(ii,{size:24})}),s.jsx("span",{className:"font-medium",children:"View All Projects"})]})})]})]})}),s.jsx("section",{id:"news",className:"py-20 border-b border-neutral-900",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[s.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-6 mb-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"News"}),s.jsx("p",{className:"text-neutral-300",children:"Short updates and recent milestones."})]}),s.jsxs(jn,{to:"/news",className:"inline-flex items-center gap-2 text-sm text-neutral-300 hover:text-white transition-colors",children:["View all news ",s.jsx(ii,{size:16})]})]}),s.jsx("ul",{className:"space-y-2",children:h.map(x=>s.jsxs("li",{className:"text-sm text-neutral-300",children:[s.jsxs("span",{className:"text-neutral-500",children:[x.displayDate," - "]}),s.jsx(jn,{to:`/news?item=${x.id}`,className:"text-neutral-200 hover:text-white transition-colors",children:x.title})]},x.id))})]})}),s.jsxs("section",{id:"cv",className:"max-w-4xl mx-auto px-6 py-24",children:[s.jsxs("div",{className:"flex justify-between items-end mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Curriculum Vitae"}),s.jsx("p",{className:"text-neutral-300",children:"Academic and professional background."})]}),s.jsxs("button",{onClick:y,className:"hidden",children:[s.jsx(af,{size:16}),s.jsx("span",{children:"PDF"})]})]}),s.jsxs("div",{className:"space-y-16",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-6 h-[1px] bg-neutral-700"}),"Experience"]}),s.jsx("div",{className:"space-y-4",children:of.map(x=>s.jsx(fa,{title:x.role,subtitle:x.institution,date:x.period,children:x.description},x.id))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-6 h-[1px] bg-neutral-700"}),"Education"]}),s.jsx("div",{className:"space-y-4",children:lf.map(x=>s.jsx(fa,{title:x.degree,subtitle:x.institution,date:x.year,children:x.details},x.id))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-6 h-[1px] bg-neutral-700"}),"Selected Publications"]}),s.jsx("div",{className:"space-y-4",children:f.map(x=>{const w=m(x),N=x.doi?`https://doi.org/${x.doi}`:void 0,j=x.url?"Publisher":"Link";return s.jsxs(fa,{title:w?s.jsx("a",{href:w.href,target:"_blank",rel:"noreferrer",className:"text-neutral-100 hover:text-white transition-colors underline-offset-4 hover:underline",children:x.title}):x.title,subtitle:x.journal||void 0,date:x.year?x.year.toString():void 0,children:[s.jsx("p",{className:"italic text-neutral-300",children:x.authors}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs uppercase tracking-wider text-neutral-400",children:[N&&s.jsx("a",{href:N,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:"DOI"}),x.url&&s.jsx("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:j}),p&&s.jsx("a",{href:p,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:"ORCID"})]})]},x.id)})})]}),s.jsx("div",{className:"flex justify-center pt-8",children:s.jsxs(jn,{to:"/cv",className:"inline-flex items-center gap-2 px-6 py-3 border border-neutral-800 rounded-lg text-neutral-300 hover:text-white hover:bg-neutral-900 transition-colors",children:["View Full CV ",s.jsx(ii,{size:16})]})}),s.jsxs("div",{className:"flex justify-center gap-3 pt-10",children:[s.jsx("a",{href:Xt.github,target:"_blank",rel:"noreferrer","aria-label":"GitHub",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(pi,{size:18})}),s.jsx("a",{href:Xt.linkedin,target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(wl,{size:18})}),s.jsx("a",{href:Xt.twitter,target:"_blank",rel:"noreferrer","aria-label":"Twitter/X",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(bl,{size:18})}),s.jsx("a",{href:Xt.scholar,target:"_blank",rel:"noreferrer","aria-label":"Google Scholar",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(yd,{size:18})}),s.jsx("a",{href:Xt.researchgate,target:"_blank",rel:"noreferrer","aria-label":"ResearchGate",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(vd,{size:18})}),s.jsx("a",{href:`mailto:${Xt.email}`,"aria-label":"Email",className:"p-2 rounded-full border border-neutral-800 bg-neutral-900 text-neutral-300 hover:text-white hover:border-neutral-600 transition-colors",children:s.jsx(kl,{size:18})})]})]})]})]})},Om=()=>{const r=_r.publications||[],o=[...r.length>0?r:cf].sort((p,h)=>h.year-p.year),c=`https://orcid.org/${_r.orcid}`,u=p=>p.doi?{href:`https://doi.org/${p.doi}`,label:"DOI"}:p.url?{href:p.url,label:"Link"}:p.orcidUrl?{href:p.orcidUrl,label:"ORCID"}:c?{href:c,label:"ORCID"}:null,f=p=>{p.preventDefault(),alert("In a real deployment, this would download 'cv.pdf'. Please ensure you add a file named 'cv.pdf' to your public directory.")};return s.jsxs("div",{className:"max-w-4xl mx-auto px-6 pb-20 animate-in slide-in-from-bottom-4 duration-700 fade-in",children:[s.jsxs("div",{className:"flex justify-between items-end mb-12 border-b border-neutral-800 pb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Curriculum Vitae"}),s.jsx("p",{className:"text-neutral-300",children:"Academic and professional background."})]}),s.jsxs("a",{href:"/cv.pdf",onClick:f,className:"hidden",children:[s.jsx(af,{size:16}),s.jsx("span",{children:"Download PDF"})]})]}),s.jsxs("div",{className:"space-y-16",children:[s.jsxs("section",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-[1px] bg-neutral-700"}),"Research experience"]}),s.jsx("div",{className:"space-y-4",children:of.map(p=>s.jsxs(fa,{title:p.role,subtitle:p.institution,date:p.period,children:[p.description,s.jsx("div",{className:"mt-2 text-xs text-neutral-500 font-medium uppercase tracking-wider",children:p.location})]},p.id))})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-[1px] bg-neutral-700"}),"Education"]}),s.jsx("div",{className:"space-y-4",children:lf.map(p=>s.jsx(fa,{title:p.degree,subtitle:p.institution,date:p.year,children:p.details&&s.jsx("p",{children:p.details})},p.id))})]}),s.jsxs("section",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-3",children:[s.jsx("span",{className:"w-8 h-[1px] bg-neutral-700"}),"Selected Publications"]}),s.jsx("div",{className:"space-y-4",children:o.map(p=>{const h=u(p),m=p.doi?`https://doi.org/${p.doi}`:void 0,y=p.url?"Publisher":"Link";return s.jsxs(fa,{title:h?s.jsx("a",{href:h.href,target:"_blank",rel:"noreferrer",className:"text-neutral-100 hover:text-white transition-colors underline-offset-4 hover:underline",children:p.title}):p.title,subtitle:p.journal||void 0,date:p.year?p.year.toString():void 0,children:[s.jsx("p",{className:"italic text-neutral-300",children:p.authors}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs uppercase tracking-wider text-neutral-400",children:[m&&s.jsx("a",{href:m,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:"DOI"}),p.url&&s.jsx("a",{href:p.url,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:y}),c&&s.jsx("a",{href:c,target:"_blank",rel:"noreferrer",className:"px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600 transition-colors",children:"ORCID"})]})]},p.id)})})]})]})]})},Vm=()=>s.jsxs("div",{className:"max-w-6xl mx-auto px-6 pb-20 animate-in slide-in-from-bottom-4 duration-700 fade-in",children:[s.jsxs("div",{className:"mb-16",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Research"}),s.jsx("p",{className:"text-neutral-300 text-lg max-w-2xl",children:"Selected publications and projects I have led or contributed to."})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pl.map(r=>s.jsx(uf,{project:r},r.id))})]}),Fm=()=>{const{id:r}=Jd(),i=Ml(),o=Pl.find(c=>c.id===r);return v.useEffect(()=>{window.scrollTo(0,0)},[]),o?s.jsxs("div",{className:"max-w-4xl mx-auto px-6 pb-24 animate-in fade-in duration-500",children:[s.jsxs("button",{onClick:()=>i(-1),className:"mb-8 flex items-center gap-2 text-sm text-neutral-300 hover:text-white transition-colors",children:[s.jsx(xd,{size:16})," Back"]}),s.jsxs("div",{className:"space-y-6 mb-12",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[s.jsx("span",{className:"px-3 py-1 rounded-full bg-neutral-900 border border-neutral-800 text-neutral-200",children:o.category}),s.jsxs("span",{className:"flex items-center gap-1 text-neutral-300",children:[s.jsx(bm,{size:14})," ",o.date]})]}),s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white tracking-tight",children:o.title}),s.jsxs("div",{className:"flex gap-4 pt-2",children:[o.link&&s.jsxs("a",{href:o.link,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-white text-black rounded-lg font-medium text-sm hover:bg-neutral-200 transition-colors",children:[s.jsx(jm,{size:16})," Read Paper"]}),o.github&&s.jsxs("a",{href:o.github,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-neutral-900 border border-neutral-800 text-white rounded-lg font-medium text-sm hover:bg-neutral-800 transition-colors",children:[s.jsx(pi,{size:16})," View Code"]})]})]}),s.jsx("div",{className:"w-full aspect-video rounded-xl overflow-hidden border border-neutral-800 mb-12 bg-neutral-900",children:s.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-700"})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-12",children:[s.jsxs("div",{className:"md:col-span-2 space-y-12",children:[s.jsxs("section",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"About the Project"}),s.jsx("div",{className:"text-neutral-300 leading-relaxed text-lg",children:o.longDescription||o.description})]}),o.openQuestions&&s.jsxs("section",{className:"bg-neutral-900/40 border border-neutral-800/50 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Open Questions"}),s.jsx("ul",{className:"space-y-3",children:o.openQuestions.map((c,u)=>s.jsxs("li",{className:"flex gap-3 text-neutral-300",children:[s.jsxs("span",{className:"text-neutral-500 font-mono",children:["0",u+1]}),s.jsx("span",{children:c})]},u))})]})]}),s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"border-t border-neutral-800 pt-6",children:[s.jsx("h4",{className:"text-sm font-semibold text-white mb-4 uppercase tracking-wider",children:"Technologies"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map(c=>s.jsx("span",{className:"px-2 py-1 bg-neutral-900 text-neutral-300 text-xs rounded border border-neutral-800",children:c},c))})]})})]})]}):s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-200",children:"Project Not Found"}),s.jsxs(jn,{to:"/research",className:"text-neutral-300 hover:text-white flex items-center gap-2",children:[s.jsx(xd,{size:16})," Back to Research"]})]})},Bm=()=>{const r=br(),o=new URLSearchParams(r.search).get("item"),c=[...sf].sort((u,f)=>{const p=new Date(u.date).getTime(),h=new Date(f.date).getTime();return Number.isNaN(p)&&console.warn(`Invalid news date for "${u.title}": ${u.date}`),Number.isNaN(h)&&console.warn(`Invalid news date for "${f.title}": ${f.date}`),Number.isNaN(p)&&Number.isNaN(h)?0:Number.isNaN(p)?1:Number.isNaN(h)?-1:h-p});return v.useEffect(()=>{if(!o)return;const u=document.getElementById(o);u&&u.scrollIntoView({behavior:"smooth",block:"start"})},[o]),s.jsxs("div",{className:"max-w-5xl mx-auto px-6 pb-24 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"mb-16",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"News"}),s.jsx("p",{className:"text-neutral-300 text-lg max-w-2xl",children:"Short updates on awards, talks, and milestones."})]}),s.jsx("div",{className:"space-y-10",children:c.map(u=>s.jsxs("article",{id:u.id,className:"scroll-mt-28 border border-neutral-800/70 rounded-xl p-6 bg-neutral-900/30",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-neutral-400",children:[s.jsx("span",{className:"px-2 py-1 rounded-full bg-neutral-900 border border-neutral-800 text-neutral-300",children:u.displayDate}),s.jsx("span",{children:u.summary})]}),s.jsx("h2",{className:"text-2xl font-semibold text-white mt-4",children:u.title}),s.jsx("div",{className:"text-neutral-300 leading-relaxed mt-4",children:u.body})]},u.id))})]})},df=[{id:"cellular-automata",title:"Cellular automata visualizer",description:"Interactive grid-based simulations and rule exploration. Works best in fullscreen.",embedPath:"/playground/cellular-automata/index.html",previewPath:"/playground/cellular-automata/index.html"},{id:"halftone-loop",title:"Halftone loop visualizer",description:"Generate perfect looping halftone animations on a canvas."},{id:"location-pulse",title:"City information dashboard",description:"Live weather, air quality, seismic, and Wikipedia context for any city."},{id:"publications-explorer",title:"Publications explorer",description:"Faceted ORCID search with coauthor graph, and export tools."},{id:"modular-synth",title:"Modular synth canvas",description:"Patchable audio-rate gates, envelopes, and CV with draggable modules."},{id:"dungeon-designer",title:"Procedural Dungeon Designer",description:"Traditional rooms + corridors built step-by-step with transparent decisions (binary space partitioning -> rooms -> minimum spanning tree -> A* path carving).",previewPath:"/playground/dungeon-designer/preview.svg"}],Um=[{id:"kbd1",type:"keyboard",x:20,y:20,width:220},{id:"osc1",type:"osc",x:320,y:20,width:220},{id:"flt1",type:"filter",x:620,y:20,width:220},{id:"env1",type:"adsr",x:320,y:360,width:220},{id:"vca1",type:"vca",x:620,y:360,width:220},{id:"out1",type:"output",x:920,y:280,width:220},{id:"lfo1",type:"lfo",x:20,y:360,width:220},{id:"scp1",type:"scope",x:920,y:20,width:240}],Hm=[{from:{moduleId:"kbd1"},to:{moduleId:"osc1"}},{from:{moduleId:"kbd1"},to:{moduleId:"env1"}},{from:{moduleId:"env1"},to:{moduleId:"vca1"}},{from:{moduleId:"osc1"},to:{moduleId:"flt1"}},{from:{moduleId:"flt1"},to:{moduleId:"vca1"}},{from:{moduleId:"vca1"},to:{moduleId:"out1"}},{from:{moduleId:"lfo1"},to:{moduleId:"flt1"}},{from:{moduleId:"vca1"},to:{moduleId:"scp1"}}],Gm=()=>{const r=v.useRef(null),i=v.useRef(null),o=v.useRef(0),c=120,u=80,f=60,p=8,h=.6,m=4,y=.05,x=1,w="#0b1020",N="#b7f7dc";return v.useEffect(()=>{const j=r.current;if(!j)return;const S=j.getContext("2d");if(!S)return;j.width=c,j.height=u;const M=[];for(let _=Math.floor(p/2);_<c;_+=p)M.push(_);const P=[];for(let _=Math.floor(p/2);_<u;_+=p)P.push(_);const B=_=>{const L=2*Math.PI*x*_/f;S.fillStyle=w,S.fillRect(0,0,c,u);const Q=(h+m)/2,Z=(m-h)/2;for(const ue of P)for(const Me of M){const Re=(Me-c/2)*y,he=(ue-u/2)*y,ie=Math.sqrt(Re*Re+he*he),le=Math.atan2(he,Re),de=Math.cos(le*8+L*2),Ve=.55*Math.sin(ie*10-L)+.45*de,ve=Math.min(m,Math.max(h,Q+Z*Ve));S.beginPath(),S.fillStyle=N,S.ellipse(Me,ue,ve,ve,0,0,Math.PI*2),S.fill()}},F=()=>{o.current=(o.current+1)%f,B(o.current),i.current=requestAnimationFrame(F)};return B(o.current),i.current=requestAnimationFrame(F),()=>{i.current&&cancelAnimationFrame(i.current)}},[]),s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("canvas",{ref:r,className:"w-full h-full"})})},$m=()=>{const r=v.useRef(null),i=v.useRef(null),o=v.useRef(0),c=22,u=14,f=8,p=c*f,h=u*f,m=180;return v.useEffect(()=>{const y=r.current;if(!y)return;const x=y.getContext("2d");if(!x)return;y.width=p,y.height=h;const w=()=>Array.from({length:u},()=>Array(c).fill(0)),N=(_,L)=>{const Q=Math.floor((c-L[0].length)/2),Z=Math.floor((u-L.length)/2);L.forEach((ue,Me)=>{ue.forEach((Re,he)=>{Re&&_[Z+Me]&&_[Z+Me][Q+he]!==void 0&&(_[Z+Me][Q+he]=1)})})},j=[[0,0,0,0,0,0,1,0],[1,1,0,0,0,0,0,0],[0,1,0,0,0,1,1,1]];let S=w();N(S,j);const M=(_,L)=>{let Q=0;for(let Z=-1;Z<=1;Z+=1)for(let ue=-1;ue<=1;ue+=1){if(ue===0&&Z===0)continue;const Me=(_+ue+c)%c,Re=(L+Z+u)%u;Q+=S[Re][Me]}return Q},P=()=>{const _=Array.from({length:u},()=>Array(c).fill(0));for(let L=0;L<u;L+=1)for(let Q=0;Q<c;Q+=1){const Z=M(Q,L),ue=S[L][Q]===1;_[L][Q]=ue?Z===2||Z===3?1:0:Z===3?1:0}S=_},B=()=>{x.fillStyle="#0b0f1b",x.fillRect(0,0,p,h),x.strokeStyle="rgba(148, 163, 184, 0.12)",x.lineWidth=1;for(let _=0;_<=c;_+=1)x.beginPath(),x.moveTo(_*f+.5,0),x.lineTo(_*f+.5,h),x.stroke();for(let _=0;_<=u;_+=1)x.beginPath(),x.moveTo(0,_*f+.5),x.lineTo(p,_*f+.5),x.stroke();x.fillStyle="#5eead4";for(let _=0;_<u;_+=1)for(let L=0;L<c;L+=1)S[_][L]&&x.fillRect(L*f+1,_*f+1,f-2,f-2)},F=_=>{_-o.current>=m&&(P(),B(),o.current=_),i.current=requestAnimationFrame(F)};return B(),i.current=requestAnimationFrame(F),()=>{i.current&&cancelAnimationFrame(i.current)}},[]),s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("canvas",{ref:r,className:"w-full h-full"})})},Wm=(r,i,o,c)=>{const u=o/2,f=c/2,p=Math.min(o,c)*.28,h=r.map((M,P)=>{const B=P/r.length*Math.PI*2;return{id:M,x:u+Math.cos(B)*p,y:f+Math.sin(B)*p}}),m=r.map(()=>({x:0,y:0})),y=new Map(r.map((M,P)=>[M,P])),x=140,w=1200,N=.05,j=.85,S=6;for(let M=0;M<x;M+=1){for(let P=0;P<h.length;P+=1)for(let B=P+1;B<h.length;B+=1){const F=h[P].x-h[B].x,_=h[P].y-h[B].y,L=Math.sqrt(F*F+_*_)||1,Q=w/(L*L),Z=F/L*Q,ue=_/L*Q;m[P].x+=Z,m[P].y+=ue,m[B].x-=Z,m[B].y-=ue}i.forEach(P=>{const B=y.get(P.source),F=y.get(P.target);if(B===void 0||F===void 0)return;const _=h[F].x-h[B].x,L=h[F].y-h[B].y,Q=Math.sqrt(_*_+L*L)||1,Z=N*P.weight,ue=_/Q*Z,Me=L/Q*Z;m[B].x+=ue,m[B].y+=Me,m[F].x-=ue,m[F].y-=Me});for(let P=0;P<h.length;P+=1)m[P].x*=j,m[P].y*=j,h[P].x+=m[P].x,h[P].y+=m[P].y,h[P].x=Math.min(o-S,Math.max(S,h[P].x)),h[P].y=Math.min(c-S,Math.max(S,h[P].y))}return new Map(h.map(M=>[M.id,{x:M.x,y:M.y}]))},qm=()=>{const r=v.useRef(null);return v.useEffect(()=>{const i=r.current;if(!i)return;const o=i.getContext("2d");if(!o)return;const c=120,u=80;i.width=c,i.height=u;const f=new Map;_r.publications.forEach(N=>{(N.authors.includes(";")?N.authors.split(";"):N.authors.split(",")).map(S=>S.trim()).filter(Boolean).forEach(S=>{f.set(S,(f.get(S)??0)+1)})});const p=Math.min(16,f.size),h=Array.from(f.entries()).sort((N,j)=>j[1]-N[1]).slice(0,p).map(([N])=>N),m=new Set(h),y=new Map;_r.publications.forEach(N=>{const S=(N.authors.includes(";")?N.authors.split(";"):N.authors.split(",")).map(M=>M.trim()).filter(M=>m.has(M));for(let M=0;M<S.length;M+=1)for(let P=M+1;P<S.length;P+=1){const B=S[M],F=S[P],_=B<F?`${B}|||${F}`:`${F}|||${B}`;y.set(_,(y.get(_)??0)+1)}});const x=Array.from(y.entries()).map(([N,j])=>{const[S,M]=N.split("|||");return{source:S,target:M,weight:j}}),w=Wm(h,x,c,u);o.fillStyle="#050608",o.fillRect(0,0,c,u),o.strokeStyle="rgba(148, 163, 184, 0.25)",o.lineWidth=1,x.forEach(({source:N,target:j})=>{const S=w.get(N),M=w.get(j);!S||!M||(o.beginPath(),o.moveTo(S.x,S.y),o.lineTo(M.x,M.y),o.stroke())}),h.forEach((N,j)=>{const S=w.get(N);if(!S)return;const M=N.toLowerCase().includes("zeiger");o.beginPath(),o.fillStyle=M?"#f472b6":j%2===0?"#60a5fa":"#34d399",o.arc(S.x,S.y,M?4:3,0,Math.PI*2),o.fill()})},[]),s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("canvas",{ref:r,className:"w-full h-full"})})},Km=({id:r,title:i,previewPath:o})=>r==="cellular-automata"&&o?s.jsx($m,{}):r==="halftone-loop"?s.jsx(Gm,{}):r==="location-pulse"?s.jsx(Qm,{}):r==="publications-explorer"?s.jsx(qm,{}):r==="modular-synth"?s.jsx(Jm,{}):r==="dungeon-designer"&&o?s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("img",{src:o,alt:`${i} preview`,className:"w-full h-full object-cover",loading:"lazy"})}):s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] uppercase tracking-widest text-neutral-500",children:i.split(" ")[0]})}),Qm=()=>{const r=v.useRef(null),i=v.useRef(null);return v.useEffect(()=>{const o=r.current;if(!o)return;const c=o.getContext("2d");if(!c)return;const u=120,f=80;o.width=u,o.height=f;const p=m=>{const y=m/1e3%2,x=.5+.5*Math.sin(y*Math.PI);c.fillStyle="#050608",c.fillRect(0,0,u,f),c.fillStyle="#111827",c.fillRect(6,6,80,10),c.fillRect(6,20,80,8),c.fillRect(6,32,46,12),c.fillRect(56,32,30,12),c.fillRect(6,48,40,10),c.fillRect(50,48,36,10);const w=90,N=6,j=24,S=20;c.fillStyle="#0f172a",c.fillRect(w,N,j,S),c.strokeStyle="rgba(148, 163, 184, 0.25)",c.strokeRect(w,N,j,S);const M=w+j*.55,P=N+S*.55;c.fillStyle="#f43f5e",c.beginPath(),c.arc(M,P,1.6+x*.6,0,Math.PI*2),c.fill(),c.strokeStyle="rgba(244, 63, 94, 0.5)",c.beginPath(),c.arc(M,P,3+x*2,0,Math.PI*2),c.stroke(),c.fillStyle="#0b0f1b",c.fillRect(w,N+S+4,j,8)},h=m=>{p(m),i.current=requestAnimationFrame(h)};return i.current=requestAnimationFrame(h),()=>{i.current&&cancelAnimationFrame(i.current)}},[]),s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("canvas",{ref:r,className:"w-full h-full"})})},Jm=()=>{const r=v.useRef(null);return v.useEffect(()=>{const i=r.current;if(!i)return;const o=i.getContext("2d");if(!o)return;const c=120,u=80;i.width=c,i.height=u;const f=Um,p=Hm,h={scope:190,output:140,default:160},m={keyboard:"#0f172a",osc:"#111827",filter:"#0b1120",adsr:"#111827",vca:"#0f172a",output:"#111827",lfo:"#0b1120",scope:"#0f172a"};let y=1/0,x=1/0,w=-1/0,N=-1/0;f.forEach(ie=>{const le=h[ie.type]??h.default;y=Math.min(y,ie.x),x=Math.min(x,ie.y),w=Math.max(w,ie.x+ie.width),N=Math.max(N,ie.y+le)});const j=6,S=w-y||1,M=N-x||1,P=Math.min((c-j*2)/S,(u-j*2)/M),B=c-j*2-S*P,F=u-j*2-M*P,_=j+B/2-y*P,L=j+F/2-x*P,Q=(ie,le)=>({x:ie*P+_,y:le*P+L});o.fillStyle="#050608",o.fillRect(0,0,c,u),o.strokeStyle="rgba(148, 163, 184, 0.15)",o.lineWidth=1;const Z=120,ue=Math.floor(y/Z)*Z,Me=Math.floor(x/Z)*Z;for(let ie=ue;ie<=w;ie+=Z){const le=Q(ie,x).x;o.beginPath(),o.moveTo(le,j),o.lineTo(le,u-j),o.stroke()}for(let ie=Me;ie<=N;ie+=Z){const le=Q(y,ie).y;o.beginPath(),o.moveTo(j,le),o.lineTo(c-j,le),o.stroke()}const Re=new Map;f.forEach(ie=>{const le=h[ie.type]??h.default,de=Q(ie.x+ie.width/2,ie.y+le/2);Re.set(ie.id,de)}),o.strokeStyle="rgba(56, 189, 248, 0.5)",o.lineWidth=1.5,p.forEach(ie=>{const le=Re.get(ie.from.moduleId),de=Re.get(ie.to.moduleId);!le||!de||(o.beginPath(),o.moveTo(le.x,le.y),o.lineTo(de.x,de.y),o.stroke())});const he=(ie,le,de,Ne,Ve)=>{const ve=Math.min(Ve,de/2,Ne/2);o.beginPath(),o.moveTo(ie+ve,le),o.lineTo(ie+de-ve,le),o.quadraticCurveTo(ie+de,le,ie+de,le+ve),o.lineTo(ie+de,le+Ne-ve),o.quadraticCurveTo(ie+de,le+Ne,ie+de-ve,le+Ne),o.lineTo(ie+ve,le+Ne),o.quadraticCurveTo(ie,le+Ne,ie,le+Ne-ve),o.lineTo(ie,le+ve),o.quadraticCurveTo(ie,le,ie+ve,le),o.closePath()};f.forEach(ie=>{const le=h[ie.type]??h.default,de=Q(ie.x,ie.y),Ne=ie.width*P,Ve=le*P,ve=m[ie.type]??"#0f172a";he(de.x,de.y,Ne,Ve,6),o.fillStyle=ve,o.fill(),o.strokeStyle="#1f2937",o.lineWidth=1,o.stroke(),o.fillStyle="rgba(15, 23, 42, 0.7)",o.fillRect(de.x,de.y,Ne,Math.min(10*P+4,Ve)),ie.type==="scope"&&(o.strokeStyle="rgba(56, 189, 248, 0.5)",o.beginPath(),o.moveTo(de.x+Ne*.2,de.y+Ve*.6),o.lineTo(de.x+Ne*.45,de.y+Ve*.5),o.lineTo(de.x+Ne*.7,de.y+Ve*.6),o.stroke())})},[]),s.jsx("div",{className:"w-24 h-16 rounded-lg border border-neutral-800 bg-neutral-950/70 overflow-hidden",children:s.jsx("canvas",{ref:r,className:"w-full h-full"})})},Ym=()=>s.jsxs("div",{className:"max-w-5xl mx-auto px-6 pb-24 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"mb-16",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Playground"}),s.jsx("p",{className:"text-neutral-300 text-lg max-w-2xl",children:"Experiments, visualizers, and interactive prototypes."})]}),s.jsx("div",{className:"space-y-4",children:df.map(r=>s.jsxs(jn,{to:`/playground/${r.id}`,className:"flex gap-4 items-start border border-neutral-800/70 rounded-xl px-6 py-5 bg-neutral-900/30 hover:border-neutral-600 transition-colors",children:[s.jsx(Km,{id:r.id,title:r.title,previewPath:r.previewPath}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:r.title}),s.jsx("p",{className:"text-neutral-300",children:r.description})]})]},r.id))})]}),Ja=[{id:"aurora",label:"Aurora Drift",width:560,height:520,frames:84,fps:24,spacing:14,rMin:1,rMax:8,waveStrength:.7,waveScale:.022,waveSpeed:1,background:"#0b1020",foreground:"#b7f7dc",pattern:"crossfade"},{id:"sunburst",label:"Solar Bloom",width:540,height:540,frames:72,fps:24,spacing:16,rMin:1,rMax:9,waveStrength:.8,waveScale:.018,waveSpeed:1,background:"#120b05",foreground:"#ffe5a3",pattern:"radial"},{id:"vortex",label:"Vortex Ribbons",width:560,height:520,frames:96,fps:24,spacing:13,rMin:1,rMax:7,waveStrength:.75,waveScale:.02,waveSpeed:2,background:"#0d1015",foreground:"#8dd5ff",pattern:"vortex"},{id:"checker",label:"Pulse Grid",width:520,height:520,frames:60,fps:24,spacing:12,rMin:1,rMax:6,waveStrength:.65,waveScale:.028,waveSpeed:1,background:"#07090f",foreground:"#ffd1f2",pattern:"checker"},{id:"tide",label:"Lagoon Tide",width:580,height:520,frames:90,fps:24,spacing:15,rMin:1,rMax:8,waveStrength:.7,waveScale:.02,waveSpeed:1,background:"#06131a",foreground:"#b4ffe3",pattern:"tide"},{id:"static-noise",label:"Static Mirage",width:560,height:520,frames:96,fps:24,spacing:11,rMin:.8,rMax:6.5,waveStrength:.9,waveScale:.03,waveSpeed:2,background:"#0b0a13",foreground:"#ffd6a5",pattern:"noise-field"},{id:"orbit",label:"Orbiting Choir",width:600,height:520,frames:120,fps:24,spacing:16,rMin:1,rMax:10,waveStrength:.85,waveScale:.016,waveSpeed:2,background:"#05070d",foreground:"#c8d3ff",pattern:"spiral-lattice"},{id:"ripple-loom",label:"Ripple Loom",width:560,height:540,frames:84,fps:24,spacing:12,rMin:1,rMax:7,waveStrength:.8,waveScale:.024,waveSpeed:1,background:"#0f0b0f",foreground:"#e6ffb0",pattern:"radial-burst"},{id:"halo",label:"Halo Cascade",width:540,height:540,frames:72,fps:24,spacing:14,rMin:1,rMax:9,waveStrength:.75,waveScale:.02,waveSpeed:2,background:"#0a0f18",foreground:"#ffb3c8",pattern:"spiral-lattice"},{id:"glass-grid",label:"Glass Grid",width:520,height:520,frames:60,fps:24,spacing:10,rMin:.8,rMax:5.5,waveStrength:.7,waveScale:.03,waveSpeed:1,background:"#0a0a0c",foreground:"#b7f1ff",pattern:"radial-burst"},{id:"moire-lens",label:"Moire Lens",width:560,height:520,frames:96,fps:24,spacing:10,rMin:.8,rMax:6,waveStrength:.75,waveScale:.03,waveSpeed:2,background:"#090c12",foreground:"#c4f0ff",pattern:"moire"},{id:"tessellate",label:"Tessellated Bloom",width:580,height:520,frames:84,fps:24,spacing:13,rMin:1,rMax:8,waveStrength:.8,waveScale:.022,waveSpeed:1,background:"#080a0f",foreground:"#ffdcb2",pattern:"tessellation"}],Et=Ja[0],Xm=(r,i,o)=>Math.min(o,Math.max(i,r)),Yn=r=>{const i=r.replace("#",""),o=i.length===3?i.split("").map(u=>u+u).join(""):i,c=parseInt(o,16);return{r:c>>16&255,g:c>>8&255,b:c&255}},wd=(r,i,o)=>`#${[r,i,o].map(c=>c.toString(16).padStart(2,"0")).join("")}`,Xn=({r,g:i,b:o})=>{const c=r/255,u=i/255,f=o/255,p=Math.max(c,u,f),h=Math.min(c,u,f),m=p-h;let y=0,x=0;const w=(p+h)/2;if(m!==0){switch(x=m/(1-Math.abs(2*w-1)),p){case c:y=(u-f)/m%6;break;case u:y=(f-c)/m+2;break;default:y=(c-u)/m+4}y=Math.round(y*60),y<0&&(y+=360)}return{h:y,s:Math.round(x*100),l:Math.round(w*100)}},kd=(r,i,o)=>{const c=i/100,u=o/100,f=(1-Math.abs(2*u-1))*c,p=f*(1-Math.abs(r/60%2-1)),h=u-f/2;let m=0,y=0,x=0;return r<60?(m=f,y=p):r<120?(m=p,y=f):r<180?(y=f,x=p):r<240?(y=p,x=f):r<300?(m=p,x=f):(m=f,x=p),{r:Math.round((m+h)*255),g:Math.round((y+h)*255),b:Math.round((x+h)*255)}},bd=(r,i,o)=>{const c=[];for(let f=Math.floor(o/2);f<r;f+=o)c.push(f);const u=[];for(let f=Math.floor(o/2);f<i;f+=o)u.push(f);return{xs:c,ys:u}},Zm=()=>{const r=v.useRef(null),i=v.useRef(null),o=v.useRef(null),c=v.useRef(0),u=v.useRef(0),[f,p]=v.useState(Et.id),[h,m]=v.useState(Et.width),[y,x]=v.useState(Et.height),[w,N]=v.useState(Et.frames),[j,S]=v.useState(Et.fps),[M,P]=v.useState(Et.spacing),[B,F]=v.useState(Et.rMin),[_,L]=v.useState(Et.rMax),[Q,Z]=v.useState(Et.waveStrength),[ue,Me]=v.useState(Et.waveScale),[Re,he]=v.useState(Et.waveSpeed),[ie,le]=v.useState(Et.background),[de,Ne]=v.useState(Et.foreground),[Ve,ve]=v.useState(()=>Xn(Yn(Et.background)).h),[xe,K]=v.useState(()=>Xn(Yn(Et.foreground)).h),[ce,ae]=v.useState(()=>Xn(Yn(Et.background)).s),[E,H]=v.useState(()=>Xn(Yn(Et.foreground)).s),[je,Ce]=v.useState(()=>Xn(Yn(Et.background)).l),[Ae,_e]=v.useState(()=>Xn(Yn(Et.foreground)).l),[ee,me]=v.useState(Et.pattern),[se,fe]=v.useState(!0),[T,O]=v.useState(!1),[W,oe]=v.useState(null),[Fe,Ze]=v.useState(!1),Le=v.useMemo(()=>Ja.find(G=>G.id===f)??Ja[0],[f]),qe=Number.isInteger(Re)&&w>0,Oe=v.useMemo(()=>bd(h,y,M),[M,h,y]),We=(G,Je,et,Te)=>{const Be=2*Math.PI*Te.waveSpeed*Je/Te.frames;G.fillStyle=Te.background,G.fillRect(0,0,Te.width,Te.height);const vt=(Te.rMin+Te.rMax)/2,qt=(Te.rMax-Te.rMin)/2;for(const Ct of et.ys)for(const Kt of et.xs){const ot=(Kt-Te.width/2)*Te.waveScale,mt=(Ct-Te.height/2)*Te.waveScale,Tt=Math.sqrt(ot*ot+mt*mt),Zt=Math.atan2(mt,ot);let Ke=0;switch(Te.pattern){case"radial":{Ke=Math.sin(Tt*6-Be)*.7+Math.cos(Zt*4+Be)*.3;break}case"vortex":{Ke=Math.sin(Tt*5+Zt*3-Be*2)*.6+Math.cos(Tt*3-Be)*.4;break}case"checker":{const Nt=(Math.floor(Kt/Te.spacing)+Math.floor(Ct/Te.spacing))%2;Ke=Math.sin(ot*3+Be)*.5+Math.cos(mt*3-Be*2)*.5,Ke+=Nt?.2:-.2;break}case"tide":{Ke=Math.sin(ot*2+Be)*.6+Math.sin(mt*3-Be)*.4;break}case"noise-field":{const Nt=Math.sin(ot*12.3+mt*7.1+Be*2)*Math.cos(ot*5.7-mt*9.2+Be),jt=Math.sin(Tt*8-Be*2);Ke=.65*Nt+.35*jt;break}case"spiral-lattice":{const Nt=Math.sin(Tt*6+Zt*5-Be*2),jt=Math.cos(ot*4-mt*4+Be);Ke=.6*Nt+.4*jt;break}case"radial-burst":{const Nt=Math.cos(Zt*8+Be*2);Ke=.55*Math.sin(Tt*10-Be)+.45*Nt;break}case"moire":{const Nt=Math.sin((ot+mt)*6+Be),jt=Math.sin((ot-mt)*6-Be*2),en=Math.cos(Tt*4-Be);Ke=.5*(Nt+jt)+.2*en;break}case"tessellation":{const Nt=Math.sin(ot*5+Be)+Math.sin(ot*2.5+mt*4-Be),jt=Math.cos(ot*3-mt*1.5+Be*2);Ke=.5*Nt+.5*jt;break}case"crossfade":default:{const Nt=Math.sin(1.3*ot+1.7*mt+Be),jt=Math.sin(-1.9*ot+1.1*mt-Be),en=Math.sin(Tt*4-Be*2);Ke=.5*(Nt+jt)+en*.2;break}}const gn=Xm(vt+qt*(Te.waveStrength*Ke),Te.rMin,Te.rMax);G.beginPath(),G.fillStyle=Te.foreground,G.ellipse(Kt,Ct,gn,gn,0,0,Math.PI*2),G.fill()}};v.useEffect(()=>{const G=r.current;if(!G)return;const Je=G.getContext("2d");if(!Je)return;G.width=h,G.height=y;const et=Be=>We(Je,Be,Oe,{width:h,height:y,frames:w,spacing:M,rMin:B,rMax:_,waveStrength:Q,waveScale:ue,waveSpeed:Re,background:ie,foreground:de,pattern:ee}),Te=Be=>{if(se){const vt=1e3/j;Be-c.current>=vt&&(u.current=(u.current+1)%w,c.current=Be,et(u.current))}o.current=requestAnimationFrame(Te)};return et(u.current),o.current=requestAnimationFrame(Te),()=>{o.current&&cancelAnimationFrame(o.current)}},[h,y,w,j,M,B,_,Q,ue,Re,ie,de,ee,Oe,se]),v.useEffect(()=>{u.current=0,c.current=0},[w]),v.useEffect(()=>{const G=Ja.find(Te=>Te.id===f);if(!G)return;m(G.width),x(G.height),N(G.frames),S(G.fps),P(G.spacing),F(G.rMin),L(G.rMax),Z(G.waveStrength),Me(G.waveScale),he(G.waveSpeed),le(G.background),Ne(G.foreground);const Je=Xn(Yn(G.background)),et=Xn(Yn(G.foreground));ve(Je.h),K(et.h),ae(Je.s),H(et.s),Ce(Je.l),_e(et.l),me(G.pattern)},[f]),v.useEffect(()=>{const G=kd(Ve,ce,je);le(wd(G.r,G.g,G.b))},[Ve,ce,je]),v.useEffect(()=>{const G=kd(xe,E,Ae);Ne(wd(G.r,G.g,G.b))},[xe,E,Ae]),v.useEffect(()=>{const G=()=>{Ze(document.fullscreenElement===i.current)};return document.addEventListener("fullscreenchange",G),()=>document.removeEventListener("fullscreenchange",G)},[]);const it=(G,Je,et,Te,Be)=>{Je(G);const vt=Xn(Yn(G));et(vt.h),Te(vt.s),Be(vt.l)},Bt=(G,Je)=>{const et=URL.createObjectURL(G),Te=document.createElement("a");Te.href=et,Te.download=Je,Te.click(),URL.revokeObjectURL(et)},Rt=async()=>{if(!r.current||T)return;if(typeof MediaRecorder>"u"){oe("MediaRecorder is not available in this browser.");return}const G=document.createElement("canvas");G.width=h,G.height=y;const Je=G.getContext("2d");if(!Je)return;const et=bd(h,y,M),Te=1e3/j,vt=["video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"].find(Ke=>MediaRecorder.isTypeSupported(Ke));if(!vt){oe(`${format.toUpperCase()} export is not supported in this browser.`);return}const qt=se;qt&&fe(!1),O(!0),oe("Rendering WEBM...");const Ct=G.captureStream(j),Kt=new MediaRecorder(Ct,{mimeType:vt}),ot=[];Kt.ondataavailable=Ke=>{Ke.data.size>0&&ot.push(Ke.data)};const mt=new Promise(Ke=>{Kt.onstop=()=>Ke()});Kt.start();for(let Ke=0;Ke<w;Ke+=1)We(Je,Ke,et,{width:h,height:y,frames:w,spacing:M,rMin:B,rMax:_,waveStrength:Q,waveScale:ue,waveSpeed:Re,background:ie,foreground:de,pattern:ee}),await new Promise(gn=>setTimeout(gn,Te));Kt.stop(),await mt;const Tt=new Blob(ot,{type:vt}),Zt=Le.label.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");Bt(Tt,`${Zt||Le.id}.webm`),O(!1),oe("Exported WEBM."),qt&&fe(!0)},nt=async()=>{if(i.current)try{document.fullscreenElement?await document.exitFullscreen():await i.current.requestFullscreen()}catch(G){console.error("Fullscreen request failed",G)}};return s.jsxs("div",{ref:i,className:`border border-transparent rounded-2xl flex flex-col ${Fe?"bg-neutral-950 p-6 h-full":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Halftone Loop"}),s.jsx("p",{className:"text-xs text-neutral-400",children:"Adjust parameters and export perfect loops."})]}),s.jsx("button",{className:"text-xs uppercase tracking-wider px-3 py-1 rounded-full border border-neutral-800 text-neutral-300 hover:text-white",onClick:nt,children:Fe?"Exit fullscreen":"Fullscreen"})]}),s.jsxs("div",{className:`grid lg:grid-cols-[320px_1fr] gap-6 min-h-0 ${Fe?"flex-1":""}`,children:[s.jsxs("div",{className:`border border-neutral-800/70 rounded-xl p-5 bg-neutral-900/30 space-y-4 ${Fe?"max-h-full overflow-auto":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Controls"}),s.jsx("span",{className:`text-[11px] uppercase tracking-widest px-2 py-1 rounded-full border ${qe?"border-emerald-500/40 text-emerald-300 bg-emerald-500/10":"border-amber-500/40 text-amber-300 bg-amber-500/10"}`,children:qe?"Perfect loop":"Loop warning"})]}),s.jsx("button",{className:"text-xs uppercase tracking-wider px-3 py-1 rounded-full border border-neutral-800 text-neutral-300 hover:text-white",onClick:()=>fe(G=>!G),children:se?"Pause":"Play"})]}),s.jsxs("div",{className:"space-y-3 text-sm text-neutral-300",children:[s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Preset"}),s.jsx("select",{value:f,onChange:G=>p(G.target.value),className:"w-44 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right",children:Ja.map(G=>s.jsx("option",{value:G.id,children:G.label},G.id))})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Width"}),s.jsx("input",{type:"number",min:240,max:1200,value:h,onChange:G=>m(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Height"}),s.jsx("input",{type:"number",min:240,max:1200,value:y,onChange:G=>x(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Frames"}),s.jsx("input",{type:"number",min:24,max:240,value:w,onChange:G=>N(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"FPS"}),s.jsx("input",{type:"number",min:6,max:60,value:j,onChange:G=>S(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Spacing"}),s.jsx("input",{type:"number",min:6,max:40,value:M,onChange:G=>P(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Radius Min"}),s.jsx("input",{type:"number",min:.5,max:20,step:.5,value:B,onChange:G=>F(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Radius Max"}),s.jsx("input",{type:"number",min:1,max:30,step:.5,value:_,onChange:G=>L(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Wave Strength"}),s.jsx("input",{type:"number",min:0,max:1,step:.05,value:Q,onChange:G=>Z(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Wave Scale"}),s.jsx("input",{type:"number",min:.005,max:.08,step:.005,value:ue,onChange:G=>Me(Number(G.target.value)),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Wave Speed"}),s.jsx("input",{type:"number",min:1,max:4,step:1,value:Re,onChange:G=>he(Math.round(Number(G.target.value))||1),className:"w-24 bg-neutral-950/60 border border-neutral-800 rounded px-2 py-1 text-right"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Background"}),s.jsx("input",{type:"color",value:ie,onChange:G=>it(G.target.value,le,ve,ae,Ce),className:"h-8 w-20 bg-transparent border border-neutral-800 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Background Hue"}),s.jsx("input",{type:"range",min:0,max:360,value:Ve,onChange:G=>ve(Number(G.target.value)),className:"w-40 accent-emerald-400"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Background Sat"}),s.jsx("input",{type:"range",min:0,max:100,value:ce,onChange:G=>ae(Number(G.target.value)),className:"w-40 accent-emerald-400"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Background Light"}),s.jsx("input",{type:"range",min:5,max:90,value:je,onChange:G=>Ce(Number(G.target.value)),className:"w-40 accent-emerald-400"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Foreground"}),s.jsx("input",{type:"color",value:de,onChange:G=>it(G.target.value,Ne,K,H,_e),className:"h-8 w-20 bg-transparent border border-neutral-800 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Foreground Hue"}),s.jsx("input",{type:"range",min:0,max:360,value:xe,onChange:G=>K(Number(G.target.value)),className:"w-40 accent-pink-300"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Foreground Sat"}),s.jsx("input",{type:"range",min:0,max:100,value:E,onChange:G=>H(Number(G.target.value)),className:"w-40 accent-pink-300"})]}),s.jsxs("label",{className:"flex items-center justify-between gap-4",children:[s.jsx("span",{children:"Foreground Light"}),s.jsx("input",{type:"range",min:10,max:95,value:Ae,onChange:G=>_e(Number(G.target.value)),className:"w-40 accent-pink-300"})]})]}),s.jsxs("div",{className:"border-t border-neutral-800 pt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-400",children:"Export Loop"}),W&&s.jsx("span",{className:"text-xs text-neutral-400",children:W})]}),s.jsx("div",{className:"text-xs uppercase tracking-wider",children:s.jsx("button",{onClick:()=>Rt(),disabled:T,className:"w-full rounded-lg border border-neutral-800 px-3 py-2 text-neutral-200 hover:text-white hover:border-neutral-600 disabled:opacity-40",children:"Export WebM"})})]})]}),s.jsx("div",{className:"border border-neutral-800/70 rounded-xl p-4 bg-neutral-900/30 flex flex-col min-h-0",children:s.jsx("canvas",{ref:r,className:`rounded-lg bg-neutral-950 ${Fe?"w-full h-full flex-1":"w-full"}`})})]})]})},Nd="Glasgow",e0=900*1e3,t0=1200*1e3,n0=600*1e3,jd=1,Sd=9.5,ht=(r,i=1)=>r===void 0||Number.isNaN(r)?"":r.toFixed(i),Cd=r=>r?r.length>=16?r.slice(11,16):r:"",r0=r=>r?Intl.NumberFormat("en-GB").format(Math.round(r)):"",a0=r=>r?`${ht(r,1)} km`:"",s0=(r,i)=>{if(!r||!i)return"";const o=new Date(r);return Number.isNaN(o.getTime())?"":new Intl.DateTimeFormat("en-GB",{timeZone:i,timeStyle:"short"}).format(o)},ol=r=>{const i=r?.amount;if(!i)return;const o=Number(i);return Number.isFinite(o)?o:void 0},i0=r=>{const i=r?.time;if(i)return i.startsWith("+")?i.slice(1).split("T")[0]:i.split("T")[0]},Md=(r,i,o,c)=>{const u=y=>y*Math.PI/180,f=u(o-r),p=u(c-i),h=Math.sin(f/2)*Math.sin(f/2)+Math.cos(u(r))*Math.cos(u(o))*Math.sin(p/2)*Math.sin(p/2);return 6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))},o0=r=>{const[i,o]=v.useState(()=>new Date);return v.useEffect(()=>{const u=window.setInterval(()=>o(new Date),1e3);return()=>window.clearInterval(u)},[]),v.useMemo(()=>r?new Intl.DateTimeFormat("en-GB",{timeZone:r,dateStyle:"medium",timeStyle:"medium"}).format(i):"",[i,r])},Pd=r=>r===0?"Clear sky":r===1||r===2?"Mainly clear":r===3?"Overcast":r===45||r===48?"Fog":r>=51&&r<=57?"Drizzle":r>=61&&r<=67?"Rain":r>=71&&r<=77?"Snow":r>=80&&r<=82?"Rain showers":r>=85&&r<=86?"Snow showers":r>=95&&r<=99?"Thunderstorm":"Mixed conditions",l0=r=>r===void 0||Number.isNaN(r)?null:r<=50?{label:"Good",guidance:"No special precautions.",index:0,color:"emerald"}:r<=100?{label:"Moderate",guidance:"Sensitive groups: consider reducing prolonged outdoor exertion.",index:1,color:"amber"}:r<=150?{label:"Unhealthy for Sensitive Groups",guidance:"Sensitive groups: reduce outdoor exertion.",index:2,color:"orange"}:r<=200?{label:"Unhealthy",guidance:"Sensitive groups: reduce outdoor exertion.",index:3,color:"rose"}:r<=300?{label:"Very Unhealthy",guidance:"Sensitive groups: reduce outdoor exertion.",index:4,color:"red"}:{label:"Hazardous",guidance:"Sensitive groups: reduce outdoor exertion.",index:5,color:"red"},c0=r=>{switch(r){case"emerald":return"border-emerald-500/50 text-emerald-300";case"amber":return"border-amber-500/50 text-amber-300";case"orange":return"border-orange-500/50 text-orange-300";case"rose":return"border-rose-500/50 text-rose-300";case"red":return"border-red-500/50 text-red-300";default:return"border-neutral-700 text-neutral-300"}},u0=r=>{switch(r){case"emerald":return"bg-emerald-400";case"amber":return"bg-amber-400";case"orange":return"bg-orange-400";case"rose":return"bg-rose-500";case"red":return"bg-red-600";default:return"bg-neutral-700"}},d0=r=>{if(!r)return null;const i=r.co!==void 0?r.co/1e3:void 0,o=[{key:"PM2.5",value:r.pm25,scale:35},{key:"PM10",value:r.pm10,scale:50},{key:"O",value:r.o3,scale:100},{key:"NO",value:r.no2,scale:200},{key:"CO",value:i,scale:10,isMg:!0}].filter(c=>c.value!==void 0);return o.length===0?null:(o.sort((c,u)=>u.value/u.scale-c.value/c.scale),o[0].key)},f0=()=>{const[r,i]=v.useState(Nd),[o,c]=v.useState(Nd),[u,f]=v.useState(null),[p,h]=v.useState(null),[m,y]=v.useState(null),[x,w]=v.useState(null),[N,j]=v.useState(null),[S,M]=v.useState(null),[P,B]=v.useState(null),[F,_]=v.useState(!1),[L,Q]=v.useState(null),Z=v.useRef(null),ue=v.useRef(null),Me=v.useRef(null),Re=v.useRef(null),he=v.useRef(null),ie=v.useRef(null),le=v.useRef(!1),de=v.useRef(null),Ne=o0(u?.timezone),Ve=v.useMemo(()=>l0(m?.aqi),[m?.aqi]),ve=v.useMemo(()=>d0(m),[m]),xe=v.useCallback(()=>{Z.current&&window.clearInterval(Z.current),ue.current&&window.clearInterval(ue.current),Me.current&&window.clearInterval(Me.current),Z.current=null,ue.current=null,Me.current=null},[]);v.useEffect(()=>{let ee=!0;const me=async()=>{if(window.L)return window.L;if(!document.querySelector("link[data-leaflet]")){const fe=document.createElement("link");fe.rel="stylesheet",fe.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",fe.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",fe.crossOrigin="",fe.setAttribute("data-leaflet","true"),document.head.appendChild(fe)}return new Promise((fe,T)=>{const O=document.querySelector("script[data-leaflet]");if(O){O.addEventListener("load",()=>fe(window.L)),O.addEventListener("error",()=>T(new Error("Leaflet failed to load.")));return}const W=document.createElement("script");W.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",W.integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",W.crossOrigin="",W.setAttribute("data-leaflet","true"),W.async=!0,W.onload=()=>fe(window.L),W.onerror=()=>T(new Error("Leaflet failed to load.")),document.body.appendChild(W)})};return(async()=>{if(Re.current)try{const fe=await me();if(!ee||!Re.current)return;if(he.current||(he.current=fe.map(Re.current,{zoomControl:!1,attributionControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1,touchZoom:!1,zoomSnap:.5,zoomDelta:.5,minZoom:1,maxZoom:13}),fe.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"&copy; OpenStreetMap contributors"}).addTo(he.current)),u){const T=le.current?Sd:jd;he.current.setView([u.latitude,u.longitude],T),ie.current?ie.current.setLatLng([u.latitude,u.longitude]):ie.current=fe.marker([u.latitude,u.longitude]).addTo(he.current)}}catch{B("Map failed to load.")}})(),()=>{ee=!1,he.current&&(he.current.remove(),he.current=null,ie.current=null)}},[u]);const K=v.useCallback(async ee=>{const me=de.current?.signal,se=new URL("https://api.open-meteo.com/v1/forecast");se.searchParams.set("latitude",ee.latitude.toString()),se.searchParams.set("longitude",ee.longitude.toString()),se.searchParams.set("current_weather","true"),se.searchParams.set("daily","sunrise,sunset,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,windspeed_10m_max,windgusts_10m_max,weathercode"),se.searchParams.set("forecast_days","8"),se.searchParams.set("timezone","auto");const fe=await fetch(se.toString(),{signal:me});if(!fe.ok)throw new Error("Weather service is unavailable.");const T=await fe.json(),O=T.current_weather,W=T.daily,oe=Array.isArray(W?.time)?W.time.slice(1,8).map((Fe,Ze)=>{const Le=Ze+1;return{date:Fe,weathercode:W.weathercode?.[Le],tempMax:W.temperature_2m_max?.[Le],tempMin:W.temperature_2m_min?.[Le],precipSum:W.precipitation_sum?.[Le],precipProb:W.precipitation_probability_max?.[Le],windMax:W.windspeed_10m_max?.[Le],gustsMax:W.windgusts_10m_max?.[Le]}}):void 0;h({temperature:O?.temperature,windspeed:O?.windspeed,winddirection:O?.winddirection,weathercode:O?.weathercode,sunrise:W?.sunrise?.[0],sunset:W?.sunset?.[0],tempMax:W?.temperature_2m_max?.[0],tempMin:W?.temperature_2m_min?.[0],forecast:oe})},[]),ce=v.useCallback(async ee=>{const me=de.current?.signal,se=new URL("https://air-quality-api.open-meteo.com/v1/air-quality");se.searchParams.set("latitude",ee.latitude.toString()),se.searchParams.set("longitude",ee.longitude.toString()),se.searchParams.set("current","us_aqi,pm10,pm2_5,carbon_monoxide,nitrogen_dioxide,ozone"),se.searchParams.set("timezone","auto");const fe=await fetch(se.toString(),{signal:me});if(!fe.ok)throw new Error("Air quality service is unavailable.");const O=(await fe.json()).current||{};y({aqi:O.us_aqi,pm10:O.pm10,pm25:O.pm2_5,co:O.carbon_monoxide,no2:O.nitrogen_dioxide,o3:O.ozone,time:O.time})},[]),ae=v.useCallback(async ee=>{const me=de.current?.signal;let fe=ee.name;const T=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(fe)}`,{signal:me});let O=null;if(T.ok&&(O=await T.json()),!O||O.type==="disambiguation"){const We=new URL("https://en.wikipedia.org/w/api.php");We.searchParams.set("action","query"),We.searchParams.set("list","search"),We.searchParams.set("srsearch",`${ee.name} ${ee.country}`),We.searchParams.set("srlimit","5"),We.searchParams.set("format","json"),We.searchParams.set("origin","*");const it=await fetch(We.toString(),{signal:me});if(!it.ok)throw new Error("Wikipedia search is unavailable.");const Rt=(await it.json()).query?.search||[],nt=Rt.find(Je=>Je.title.toLowerCase()===ee.name.toLowerCase())||Rt[0];if(!nt?.title){w(null);return}fe=nt.title;const G=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(fe)}`,{signal:me});if(!G.ok)throw new Error("Wikipedia summary is unavailable.");O=await G.json()}let W;const oe=new URL("https://en.wikipedia.org/w/api.php");oe.searchParams.set("action","query"),oe.searchParams.set("prop","pageprops"),oe.searchParams.set("titles",fe),oe.searchParams.set("format","json"),oe.searchParams.set("origin","*");const Fe=await fetch(oe.toString(),{signal:me});if(Fe.ok){const it=(await Fe.json()).query?.pages||{};W=Object.values(it)[0]?.pageprops?.wikibase_item}let Ze,Le,qe,Oe;if(W){const We=await fetch(`https://www.wikidata.org/wiki/Special:EntityData/${W}.json`,{signal:me});if(We.ok){const Rt=(await We.json()).entities?.[W]?.claims||{},nt=Rt.P1082?.[0]?.mainsnak?.datavalue?.value,G=Rt.P2046?.[0]?.mainsnak?.datavalue?.value,Je=Rt.P2044?.[0]?.mainsnak?.datavalue?.value,et=Rt.P571?.[0]?.mainsnak?.datavalue?.value;Ze=ol(nt);const Te=ol(G);Te!==void 0&&(Le=Te>1e4?Te/1e6:Te),qe=ol(Je),Oe=i0(et)}}w({title:O.title||fe,extract:O.extract||"No summary available.",url:O.content_urls?.desktop?.page||`https://en.wikipedia.org/wiki/${encodeURIComponent(fe)}`,population:Ze,areaKm2:Le,elevationM:qe,inception:Oe})},[]),E=v.useCallback(async ee=>{const me=de.current?.signal,se=await fetch("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson",{signal:me});if(!se.ok)throw new Error("Earthquake feed is unavailable.");const O=((await se.json()).features||[]).map(oe=>{const Fe=oe.geometry?.coordinates||[],Ze=Fe[0],Le=Fe[1],qe=Md(ee.latitude,ee.longitude,Le,Ze);return{title:oe.properties?.title||"Unknown event",place:oe.properties?.place||"Unknown location",time:oe.properties?.time||0,magnitude:oe.properties?.mag??0,distanceKm:qe}}).filter(oe=>Number.isFinite(oe.distanceKm)).sort((oe,Fe)=>oe.distanceKm-Fe.distanceKm),W=O.find(oe=>oe.distanceKm<=500);j(W||O[0]||null)},[]),H=v.useCallback(async ee=>{const me=de.current?.signal,se=new Date,fe=new Date(se.getTime()-1e3*60*60*24*30),T=new URL("https://earthquake.usgs.gov/fdsnws/event/1/query");T.searchParams.set("format","geojson"),T.searchParams.set("starttime",fe.toISOString().slice(0,10)),T.searchParams.set("endtime",se.toISOString().slice(0,10)),T.searchParams.set("latitude",ee.latitude.toString()),T.searchParams.set("longitude",ee.longitude.toString()),T.searchParams.set("maxradiuskm","50"),T.searchParams.set("orderby","time");const O=await fetch(T.toString(),{signal:me});if(!O.ok)throw new Error("Local seismic history is unavailable.");const oe=(await O.json()).features?.[0];if(!oe){M(null);return}const Fe=oe.geometry?.coordinates||[],Ze=Fe[0],Le=Fe[1],qe=Md(ee.latitude,ee.longitude,Le,Ze);M({title:oe.properties?.title||"Recent event",place:oe.properties?.place||"Unknown location",time:oe.properties?.time||0,magnitude:oe.properties?.mag??0,distanceKm:qe})},[]),je=v.useCallback(async ee=>{const me=await Promise.allSettled([K(ee),ce(ee),ae(ee),E(ee),H(ee)]),se=me.filter(fe=>fe.status==="rejected").length;if(se===me.length)throw new Error("All data sources are unavailable.");return Q(new Date),{failed:se,total:me.length}},[ce,E,H,K,ae]),Ce=v.useCallback(async ee=>{const me=de.current?.signal,se=new URL("https://geocoding-api.open-meteo.com/v1/search");se.searchParams.set("name",ee),se.searchParams.set("count","1"),se.searchParams.set("language","en"),se.searchParams.set("format","json");const fe=await fetch(se.toString(),{signal:me});if(!fe.ok)throw new Error("Geocoding service is unavailable.");const O=(await fe.json()).results?.[0];if(!O)throw new Error("No results for that location.");return{name:O.name,country:O.country,admin1:O.admin1,latitude:O.latitude,longitude:O.longitude,timezone:O.timezone}},[]);v.useEffect(()=>{let ee=!0;return(async()=>{_(!0),B(null),xe(),de.current&&de.current.abort(),de.current=new AbortController;try{const se=await Ce(o);if(!ee||(f(se),await je(se),!ee))return;Z.current=window.setInterval(()=>K(se),e0),ue.current=window.setInterval(()=>ce(se),t0),Me.current=window.setInterval(()=>E(se),n0)}catch(se){if(!ee)return;B(se instanceof Error?se.message:"Something went wrong.")}finally{ee&&_(!1)}})(),()=>{ee=!1,xe(),de.current&&de.current.abort()}},[o,ce,je,Ce,E,K,xe]);const Ae=ee=>{ee.preventDefault();const me=r.trim();me.length>0&&me!==o&&c(me)},_e=u?`${u.name}${u.admin1?`, ${u.admin1}`:""}, ${u.country}`:o;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-neutral-800 bg-neutral-900/30 p-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-neutral-500",children:"City information dashboard"}),s.jsx("h2",{className:"text-2xl font-semibold text-white",children:_e}),s.jsx("p",{className:"text-sm text-neutral-400",children:"Weather, air quality, seismic, and Wikipedia context in one place."})]}),s.jsx("div",{className:"w-full max-w-sm md:max-w-[240px]",children:s.jsxs("div",{className:"relative isolate z-0 h-36 w-full overflow-hidden rounded-xl border border-neutral-800 bg-neutral-950/70",onMouseEnter:()=>{le.current=!0,u&&he.current&&he.current.flyTo([u.latitude,u.longitude],Sd,{duration:1.4})},onMouseLeave:()=>{le.current=!1,u&&he.current&&he.current.flyTo([u.latitude,u.longitude],jd,{duration:1.4})},children:[s.jsx("div",{ref:Re,className:"absolute inset-0 pointer-events-none z-0"}),s.jsx("div",{className:"absolute bottom-2 left-2 rounded-full border border-neutral-800 bg-neutral-900/80 px-2 py-1 text-[10px] uppercase tracking-widest text-neutral-400",children:"Map"})]})})]}),s.jsxs("form",{onSubmit:Ae,className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[s.jsx("input",{type:"text",value:r,onChange:ee=>i(ee.target.value),placeholder:"Enter a city or region",className:"flex-1 rounded-lg border border-neutral-800 bg-neutral-950/70 px-4 py-2 text-sm text-neutral-200 focus:border-neutral-500 focus:outline-none"}),s.jsx("button",{type:"submit",className:"rounded-lg bg-white px-4 py-2 text-sm font-semibold text-black hover:bg-neutral-200",children:"Search"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-neutral-400",children:[s.jsxs("span",{children:["Local time: ",Ne]}),L&&s.jsxs("span",{children:["Last update: ",L.toLocaleTimeString("en-GB")]}),u&&s.jsxs("span",{children:["Lat ",ht(u.latitude,3)," / Lon ",ht(u.longitude,3)]})]}),P&&s.jsx("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-200",children:P})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("section",{className:"rounded-2xl border border-neutral-800 bg-neutral-900/30 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Weather"}),s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"Open-Meteo"})]}),s.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"Temperature"}),s.jsxs("p",{className:"text-3xl font-semibold text-white",children:[ht(p?.temperature),"C"]}),s.jsx("p",{className:"text-xs text-neutral-500",children:p?Pd(p.weathercode):""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"Wind"}),s.jsxs("p",{className:"text-lg text-neutral-100",children:[ht(p?.windspeed)," km/h"]}),s.jsxs("p",{className:"text-xs text-neutral-500",children:["Direction ",ht(p?.winddirection,0),""]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"High / Low"}),s.jsxs("p",{className:"text-lg text-neutral-100",children:[ht(p?.tempMax)," / ",ht(p?.tempMin),""]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"Sunrise / Sunset"}),s.jsxs("p",{className:"text-lg text-neutral-100",children:[Cd(p?.sunrise)," / ",Cd(p?.sunset)]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold text-white",children:"Next 7 days"}),s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"Daily"})]}),s.jsxs("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-2",children:[(p?.forecast||[]).map(ee=>s.jsxs("div",{className:"min-w-[160px] rounded-xl border border-neutral-800/80 bg-neutral-950/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wider text-neutral-500",children:new Date(ee.date).toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"})}),s.jsxs("div",{className:"mt-2 text-lg font-semibold text-white",children:[ht(ee.tempMax)," / ",ht(ee.tempMin),""]}),s.jsx("div",{className:"mt-1 text-xs text-neutral-400",children:Pd(ee.weathercode??0)}),s.jsxs("div",{className:"mt-3 space-y-1 text-xs text-neutral-400",children:[s.jsxs("div",{children:["Precip: ",ht(ee.precipSum)," mm"]}),s.jsxs("div",{children:["Chance: ",ht(ee.precipProb,0),"%"]}),s.jsxs("div",{children:["Wind: ",ht(ee.windMax)," km/h"]}),s.jsxs("div",{children:["Gusts: ",ht(ee.gustsMax)," km/h"]})]})]},ee.date)),(!p?.forecast||p.forecast.length===0)&&s.jsx("div",{className:"text-sm text-neutral-400",children:"Forecast unavailable."})]})]})]}),s.jsxs("section",{className:"rounded-2xl border border-neutral-800 bg-neutral-900/30 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Air quality"}),s.jsx("a",{href:"https://open-meteo.com/",target:"_blank",rel:"noreferrer",className:"text-xs uppercase tracking-wider text-neutral-500 hover:text-neutral-300",children:"Open-Meteo"})]}),s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"US AQI"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("p",{className:"text-3xl font-semibold text-white",children:ht(m?.aqi,0)}),Ve&&s.jsx("span",{className:`rounded-full border px-3 py-1 text-xs uppercase tracking-wider ${c0(Ve.color)}`,children:Ve.label})]}),s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:6}).map((ee,me)=>s.jsx("span",{className:`h-1.5 flex-1 rounded-full ${Ve&&me<=Ve.index?u0(Ve.color):"bg-neutral-800"}`},me))}),s.jsx("p",{className:"mt-2 text-xs text-neutral-400",children:Ve?.guidance||"AQI unavailable."}),s.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:ve?`Driver: ${ve}`:"Driver: "})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-neutral-500",children:[s.jsx("span",{className:"uppercase tracking-wider",children:"Current concentrations"}),s.jsx("span",{children:"Instantaneous estimate; health categories use AQI."})]}),s.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[s.jsxs("div",{className:"rounded-lg border border-neutral-800/70 bg-neutral-950/40 px-3 py-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"PM2.5"}),s.jsxs("p",{className:"text-sm text-neutral-100",children:[ht(m?.pm25)," g/m"]})]}),s.jsxs("div",{className:"rounded-lg border border-neutral-800/70 bg-neutral-950/40 px-3 py-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"PM10"}),s.jsxs("p",{className:"text-sm text-neutral-100",children:[ht(m?.pm10)," g/m"]})]}),s.jsxs("div",{className:"rounded-lg border border-neutral-800/70 bg-neutral-950/40 px-3 py-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"O"}),s.jsxs("p",{className:"text-sm text-neutral-100",children:[ht(m?.o3)," g/m"]})]}),s.jsxs("div",{className:"rounded-lg border border-neutral-800/70 bg-neutral-950/40 px-3 py-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"NO"}),s.jsxs("p",{className:"text-sm text-neutral-100",children:[ht(m?.no2)," g/m"]})]}),s.jsxs("div",{className:"rounded-lg border border-neutral-800/70 bg-neutral-950/40 px-3 py-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"CO"}),s.jsxs("p",{className:"text-sm text-neutral-100",children:[m?.co!==void 0?ht(m.co/1e3,2):""," mg/m"]})]})]})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-xs text-neutral-400",children:[s.jsx("span",{children:_e}),s.jsxs("span",{children:["Updated ",s0(m?.time,u?.timezone)," local"]})]})]}),s.jsxs("section",{className:"rounded-2xl border border-neutral-800 bg-neutral-900/30 p-6 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Wikipedia snapshot"}),s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"MediaWiki"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-lg font-semibold text-white",children:x?.title||"No entry found"}),s.jsx("p",{className:"mt-2 text-sm leading-relaxed text-neutral-300",children:x?.extract||"We could not find a nearby Wikipedia entry."}),s.jsxs("div",{className:"mt-4 grid gap-3 text-xs text-neutral-400 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wider text-neutral-500",children:"Population"}),s.jsx("p",{className:"text-sm text-neutral-200",children:r0(x?.population)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wider text-neutral-500",children:"Area"}),s.jsx("p",{className:"text-sm text-neutral-200",children:a0(x?.areaKm2)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wider text-neutral-500",children:"Elevation"}),s.jsx("p",{className:"text-sm text-neutral-200",children:x?.elevationM?`${ht(x.elevationM,0)} m`:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wider text-neutral-500",children:"Established"}),s.jsx("p",{className:"text-sm text-neutral-200",children:x?.inception||""})]})]}),x?.url&&s.jsx("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"mt-3 inline-flex text-sm text-neutral-200 underline-offset-4 hover:underline",children:"Read more on Wikipedia"})]})]}),s.jsxs("section",{className:"rounded-2xl border border-neutral-800 bg-neutral-900/30 p-6 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Nearest seismic activity"}),s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-500",children:"USGS (last 24h)"})]}),s.jsxs("div",{className:"mt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-neutral-400",children:"Closest event"}),s.jsx("p",{className:"text-lg font-semibold text-white",children:N?.title||"No events found"}),s.jsx("p",{className:"text-xs text-neutral-500",children:N?`${ht(N.distanceKm,0)} km away  M${ht(N.magnitude,1)}  ${N.place}`:"Check back later."}),N&&N.distanceKm>500&&s.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"No seismic activity detected within 500 km in the last 24 hours."})]}),N&&s.jsx("div",{className:"text-xs text-neutral-400",children:new Date(N.time).toLocaleString("en-GB",{dateStyle:"medium",timeStyle:"short"})})]}),s.jsx("div",{className:"mt-4 border-t border-neutral-800 pt-4 text-xs text-neutral-400",children:S?s.jsxs("span",{children:["Last event within 50 km (last 30 days): ",new Date(S.time).toLocaleDateString("en-GB"),"  M",ht(S.magnitude,1)]}):s.jsx("span",{children:"No events within 50 km in the last 30 days."})})]})]}),F&&s.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-neutral-500",children:"Loading live sources"})]})},p0=["zeiger","lucas"],la=840,ca=560,h0=.6,m0=2.4,Qa=(r,i)=>r.includes(i)?r.filter(o=>o!==i):[...r,i],ff=r=>(r.includes(";")?r.split(";"):r.split(",")).map(o=>o.trim()).filter(Boolean),hi={"zeiger lb":"Lucas Zeiger","zeiger l b":"Lucas Zeiger","zeiger l. b.":"Lucas Zeiger","zeiger lucas":"Lucas Zeiger","lucas b zeiger":"Lucas Zeiger","lucas b. zeiger":"Lucas Zeiger","lucas zeiger":"Lucas Zeiger","lucas z":"Lucas Zeiger","sansom oj":"Owen Sansom","sansom o j":"Owen Sansom","o j sansom":"Owen Sansom"},vi=r=>r.toLowerCase().replace(/[^a-z\s.]/g," ").replace(/\s+/g," ").trim(),Ed=r=>r.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "),pf=r=>{const o=vi(r).split(" ").filter(Boolean);if(!o.length)return"";if(o.length===1)return o[0];if(o.length===2&&o[1].length<=3)return`${o[0]}-${o[1].charAt(0)}`;const c=o[0];return`${o[o.length-1]}-${c.charAt(0)}`},hf=r=>{const i=vi(r);if(hi[i])return hi[i];const o=i.split(" ").filter(Boolean);if(o.length===0)return r.trim();if(o.length>=2){const[c,...u]=o,f=u[u.length-1],p=u.slice(0,-1).join(" ");if(p.length>0&&p.length<=3)return Ed(`${c} ${f}`)}return Ed(i)},g0=r=>{const i=new Map;r.flatMap(u=>ff(u.authors)).forEach(u=>{const f=vi(u),p=hi[f],h=p??hf(u),m=pf(p??u);if(!m)return;i.has(m)||i.set(m,new Map);const y=i.get(m);y&&y.set(h,(y.get(h)??0)+1)});const c=new Map;return i.forEach((u,f)=>{const p=Array.from(u.entries()).sort((h,m)=>m[1]!==h[1]?m[1]-h[1]:m[0].length-h[0].length);p.length&&c.set(f,p[0][0])}),c},x0=r=>r.map(i=>{const u=`${(i.authorsList[0]||"author").split(" ").slice(-1)[0].toLowerCase()}${i.year}`,f=[`title={${i.title}}`,`author={${i.authorsList.join(" and ")}}`,`year={${i.year}}`,i.journal?`journal={${i.journal}}`:"",i.doi?`doi={${i.doi}}`:"",i.url?`url={${i.url}}`:""].filter(Boolean);return`@article{${u},
  ${f.join(`,
  `)}
}`}).join(`

`),y0=r=>JSON.stringify(r.map(i=>({id:i.id,type:"article-journal",title:i.title,issued:{"date-parts":[[i.year]]},"container-title":i.journal||void 0,author:i.authorsList.map(o=>({literal:o})),DOI:i.doi||void 0,URL:i.url||void 0})),null,2),v0=(r,i,o)=>Math.min(o,Math.max(i,r)),w0=(r,i,o,c)=>{const u=Math.min(o,c)*.35,f=r.map((N,j)=>{const S=j/r.length*Math.PI*2;return{...N,x:o/2+Math.cos(S)*u,y:c/2+Math.sin(S)*u}}),p=r.map(()=>({x:0,y:0})),h=new Map(r.map((N,j)=>[N.id,j])),m=160,y=2200,x=.03,w=.85;for(let N=0;N<m;N+=1){for(let j=0;j<f.length;j+=1)for(let S=j+1;S<f.length;S+=1){const M=f[j].x-f[S].x,P=f[j].y-f[S].y,B=Math.sqrt(M*M+P*P)||1,F=y/(B*B),_=M/B*F,L=P/B*F;p[j].x+=_,p[j].y+=L,p[S].x-=_,p[S].y-=L}i.forEach(j=>{const S=h.get(j.source),M=h.get(j.target);if(S===void 0||M===void 0)return;const P=f[M].x-f[S].x,B=f[M].y-f[S].y,F=Math.sqrt(P*P+B*B)||1,_=x*j.weight,L=P/F*_,Q=B/F*_;p[S].x+=L,p[S].y+=Q,p[M].x-=L,p[M].y-=Q});for(let j=0;j<f.length;j+=1)p[j].x*=w,p[j].y*=w,f[j].x+=p[j].x,f[j].y+=p[j].y,f[j].x=Math.min(o-20,Math.max(20,f[j].x)),f[j].y=Math.min(c-20,Math.max(20,f[j].y))}return f},k0=()=>{const r=v.useMemo(()=>{const T=_r.publications,O=g0(T),W=oe=>{const Fe=vi(oe),Ze=hi[Fe],Le=pf(Ze??oe);return O.get(Le)??Ze??hf(oe)};return T.map(oe=>({...oe,id:String(oe.id),journal:oe.journal||"Unknown journal",authorsList:Array.from(new Set(ff(oe.authors).map(W)))})).sort((oe,Fe)=>Fe.year-oe.year)},[]),i=T=>String(T.id),[o,c]=v.useState(""),[u,f]=v.useState([]),[p,h]=v.useState([]),[m,y]=v.useState([]),[x,w]=v.useState([]),[N,j]=v.useState({}),[S,M]=v.useState(""),[P,B]=v.useState(!1),[F,_]=v.useState(!1),[L,Q]=v.useState(1),[Z,ue]=v.useState({}),Me=v.useRef(null),Re=v.useRef(null),he=v.useRef({id:null,offsetX:0,offsetY:0,moved:!1}),ie=v.useMemo(()=>Array.from(new Set(r.map(T=>T.year))).sort((T,O)=>O-T),[r]),le=v.useMemo(()=>{const T=new Map;return r.forEach(O=>T.set(O.journal,(T.get(O.journal)??0)+1)),Array.from(T.entries()).sort((O,W)=>W[1]-O[1])},[r]),de=v.useMemo(()=>{const T=new Map;return r.forEach(O=>T.set(O.type,(T.get(O.type)??0)+1)),Array.from(T.entries()).sort((O,W)=>W[1]-O[1])},[r]),Ne=v.useMemo(()=>{const T=new Map;return r.forEach(O=>{O.authorsList.forEach(W=>{T.set(W,(T.get(W)??0)+1)})}),Array.from(T.entries()).sort((O,W)=>W[1]-O[1])},[r]),Ve=v.useMemo(()=>{const T=o.trim().toLowerCase();return r.filter(O=>{if(u.length&&!u.includes(O.year)||p.length&&!p.includes(O.journal)||m.length&&!m.includes(O.type)||x.length&&!O.authorsList.some(W=>x.includes(W)))return!1;if(T){const W=O.title.toLowerCase().includes(T),oe=O.journal.toLowerCase().includes(T),Fe=O.authorsList.some(Ze=>Ze.toLowerCase().includes(T));return W||oe||Fe}return!0})},[r,o,u,p,m,x]),ve=v.useMemo(()=>r.filter(T=>N[i(T)]),[r,N]);v.useEffect(()=>{const T={};Ve.forEach(O=>{T[i(O)]=!0}),j(T)},[Ve]);const xe=v.useMemo(()=>{const T=new Map;ve.forEach(Le=>{Le.authorsList.forEach(qe=>{T.set(qe,(T.get(qe)??0)+1)})});const O=Array.from(T.entries()).sort((Le,qe)=>qe[1]-Le[1]).slice(0,24).map(([Le,qe])=>({id:Le,label:Le,count:qe})),W=new Set(O.map(Le=>Le.id)),oe=new Map;ve.forEach(Le=>{const qe=Le.authorsList.filter(Oe=>W.has(Oe));for(let Oe=0;Oe<qe.length;Oe+=1)for(let We=Oe+1;We<qe.length;We+=1){const it=`${qe[Oe]}|||${qe[We]}`;oe.set(it,(oe.get(it)??0)+1)}});const Fe=Array.from(oe.entries()).map(([Le,qe])=>{const[Oe,We]=Le.split("|||");return{source:Oe,target:We,weight:qe}});return{nodes:w0(O,Fe,la,ca),edges:Fe}},[ve]),K=v.useMemo(()=>{const T=new Map;return xe.nodes.forEach(O=>{T.set(O.id,{x:O.x,y:O.y})}),T},[xe]),ce=async(T,O)=>{try{await navigator.clipboard.writeText(T),M(`${O} copied to clipboard`)}catch{M("Copy failed: please try again")}window.setTimeout(()=>M(""),2e3)},ae=()=>{const T={};r.forEach(O=>{T[i(O)]=!0}),j(T)},E=()=>{j({})},H=()=>{c(""),f([]),h([]),y([]),w([])},je=T=>p0.some(O=>T.toLowerCase().includes(O)),Ce=T=>{const O=T<0?1.08:.92;Q(W=>v0(W*O,h0,m0))};v.useEffect(()=>{const T=Me.current;if(!T)return;const O=W=>{W.preventDefault(),W.stopPropagation(),Ce(W.deltaY)};return T.addEventListener("wheel",O,{passive:!1}),()=>{T.removeEventListener("wheel",O)}},[]);const Ae=()=>{Q(1)},_e=T=>{const O=Re.current;if(!O)return{x:0,y:0};const W=O.getBoundingClientRect(),oe=la/W.width,Fe=ca/W.height,Ze=(T.clientX-W.left)*oe,Le=(T.clientY-W.top)*Fe,qe=la/2,Oe=ca/2;return{x:qe+(Ze-qe)/L,y:Oe+(Le-Oe)/L}},ee=(T,O)=>{T.stopPropagation();const W=_e(T),oe=Z[O]??K.get(O);oe&&(he.current={id:O,offsetX:W.x-oe.x,offsetY:W.y-oe.y,moved:!1})},me=T=>{const O=he.current.id;if(!O)return;const W=_e(T);(Math.abs(W.x-(Z[O]?.x??0))>.5||Math.abs(W.y-(Z[O]?.y??0))>.5)&&(he.current.moved=!0),ue(oe=>({...oe,[O]:{x:W.x-he.current.offsetX,y:W.y-he.current.offsetY}}))},se=()=>{he.current.id=null,he.current.moved=!1},fe=T=>{if(he.current.moved){he.current.moved=!1,he.current.id=null;return}w(O=>Qa(O,T)),he.current.id=null};return v.useEffect(()=>{const T={};xe.nodes.forEach(O=>{T[O.id]={x:O.x,y:O.y}}),ue(T)},[xe]),s.jsx("div",{className:"space-y-10",children:s.jsxs("section",{className:"grid gap-8 lg:grid-cols-[280px_1fr]",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-sm uppercase tracking-[0.2em] text-neutral-500",children:"Search"}),s.jsx("input",{value:o,onChange:T=>c(T.target.value),placeholder:"Title, journal, author",className:"w-full rounded-lg border border-neutral-800 bg-neutral-950/40 px-3 py-2 text-sm text-neutral-100 placeholder:text-neutral-500 focus:outline-none focus:ring-2 focus:ring-emerald-400/50"}),s.jsx("button",{type:"button",onClick:H,className:"text-xs text-neutral-400 hover:text-white",children:"Clear all filters"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-neutral-200",children:"Year"}),s.jsx("div",{className:"space-y-2",children:ie.map(T=>s.jsx("label",{className:"flex items-center justify-between text-sm text-neutral-300",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.includes(T),onChange:()=>f(O=>Qa(O,T)),className:"accent-emerald-400"}),T]})},T))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-neutral-200",children:"Type"}),s.jsx("div",{className:"space-y-2",children:de.map(([T,O])=>s.jsxs("label",{className:"flex items-center justify-between text-sm text-neutral-300",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:m.includes(T),onChange:()=>y(W=>Qa(W,T)),className:"accent-emerald-400"}),T]}),s.jsx("span",{className:"text-xs text-neutral-500",children:O})]},T))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-neutral-200",children:"Journal"}),s.jsx("div",{className:"space-y-2",children:(F?le:le.slice(0,6)).map(([T,O])=>s.jsxs("label",{className:"flex items-center justify-between text-sm text-neutral-300",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:p.includes(T),onChange:()=>h(W=>Qa(W,T)),className:"accent-emerald-400"}),s.jsx("span",{className:"truncate",children:T})]}),s.jsx("span",{className:"text-xs text-neutral-500",children:O})]},T))}),le.length>6?s.jsx("button",{type:"button",onClick:()=>_(T=>!T),className:"text-xs text-neutral-400 hover:text-white",children:F?"Show fewer journals":"Show all journals"}):null]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-neutral-200",children:"Coauthors"}),s.jsx("div",{className:"space-y-2",children:(P?Ne:Ne.slice(0,8)).map(([T,O])=>s.jsxs("label",{className:"flex items-center justify-between text-sm text-neutral-300",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:x.includes(T),onChange:()=>w(W=>Qa(W,T)),className:"accent-emerald-400"}),s.jsx("span",{className:"truncate",children:T})]}),s.jsx("span",{className:"text-xs text-neutral-500",children:O})]},T))}),Ne.length>8?s.jsx("button",{type:"button",onClick:()=>B(T=>!T),className:"text-xs text-neutral-400 hover:text-white",children:P?"Show fewer coauthors":"Show all coauthors"}):null]})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"rounded-2xl border border-neutral-800/70 bg-neutral-900/40 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-neutral-500",children:"Results"}),s.jsxs("h2",{className:"text-2xl font-semibold text-white",children:[ve.length," publications"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("button",{type:"button",onClick:ae,className:"rounded-full border border-emerald-500/30 px-4 py-2 text-sm text-emerald-100 hover:bg-emerald-500/10",children:"Select all"}),s.jsx("button",{type:"button",onClick:E,className:"rounded-full border border-neutral-700 px-4 py-2 text-sm text-neutral-300 hover:border-neutral-500",children:"Clear selection"})]})]})}),s.jsxs("div",{className:"rounded-2xl border border-neutral-800/70 bg-neutral-900/40 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Coauthor graph"}),s.jsx("p",{className:"text-sm text-neutral-400",children:"Click nodes to filter publications by collaborator."})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-neutral-500",children:[s.jsxs("span",{children:["Top ",xe.nodes.length]}),s.jsx("button",{type:"button",onClick:Ae,className:"rounded-full border border-neutral-700 px-3 py-1 text-xs text-neutral-300 hover:border-neutral-500",children:"Reset view"})]})]}),s.jsx("div",{ref:Me,className:"mt-4 overflow-hidden rounded-xl border border-neutral-800 bg-neutral-950/40",style:{touchAction:"none",overscrollBehavior:"contain"},children:s.jsx("svg",{ref:Re,viewBox:`0 0 ${la} ${ca}`,className:"h-[620px] w-full",onPointerMove:me,onPointerUp:se,onPointerLeave:se,onPointerCancel:se,style:{touchAction:"none"},children:s.jsxs("g",{transform:`translate(${la/2} ${ca/2}) scale(${L}) translate(${-la/2} ${-ca/2})`,children:[xe.edges.map(T=>{const O=Z[T.source]??K.get(T.source),W=Z[T.target]??K.get(T.target);return!O||!W?null:s.jsx("line",{x1:O.x,y1:O.y,x2:W.x,y2:W.y,stroke:"rgba(148, 163, 184, 0.25)",strokeWidth:Math.max(1,T.weight*.5)},`${T.source}-${T.target}`)}),xe.nodes.map(T=>{const O=x.includes(T.id),W=je(T.label),oe=Z[T.id]??{x:T.x,y:T.y};return s.jsxs("g",{onPointerDown:Fe=>ee(Fe,T.id),onPointerUp:()=>fe(T.id),className:"cursor-pointer",children:[s.jsx("circle",{cx:oe.x,cy:oe.y,r:W?14:10,fill:O?"#34d399":W?"#f472b6":"#60a5fa",stroke:"rgba(15, 23, 42, 0.7)",strokeWidth:2}),s.jsx("text",{x:oe.x+14,y:oe.y+5,fontSize:"12",fill:"rgba(226, 232, 240, 0.8)",children:T.label})]},T.id)})]})})}),s.jsx("p",{className:"mt-3 text-xs text-neutral-500",children:"Scroll to zoom  drag nodes to reposition"})]}),s.jsxs("div",{className:"rounded-2xl border border-neutral-800/70 bg-neutral-900/40 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Export selected"}),s.jsx("p",{className:"text-sm text-neutral-400",children:"Export the currently selected publications as BibTeX or CSL JSON."}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[s.jsx("button",{type:"button",onClick:()=>ce(x0(ve),"BibTeX"),className:"rounded-full border border-emerald-500/60 px-4 py-2 text-sm text-emerald-200 hover:bg-emerald-500/10 disabled:opacity-50",disabled:!ve.length,children:"Copy BibTeX"}),s.jsx("button",{type:"button",onClick:()=>ce(y0(ve),"CSL JSON"),className:"rounded-full border border-blue-500/60 px-4 py-2 text-sm text-blue-200 hover:bg-blue-500/10 disabled:opacity-50",disabled:!ve.length,children:"Copy CSL JSON"}),s.jsx("span",{className:"text-sm text-neutral-400",children:ve.length?`${ve.length} selected`:"No publications selected"})]}),S?s.jsx("p",{className:"mt-3 text-sm text-emerald-300",children:S}):null]}),s.jsxs("div",{className:"space-y-4",children:[ve.map(T=>{const O=!!N[i(T)],W=T.url||(T.doi?`https://doi.org/${T.doi}`:void 0);return s.jsx("div",{className:"rounded-2xl border border-neutral-800/70 bg-neutral-900/40 p-5",children:s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:()=>{const oe=i(T);j(Fe=>{const Ze={...Fe};return Ze[oe]?delete Ze[oe]:Ze[oe]=!0,Ze})},className:"mt-1 accent-emerald-400"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:T.title}),s.jsxs("p",{className:"text-sm text-neutral-400",children:[T.journal,"  ",T.year,"  ",T.type]}),s.jsxs("p",{className:"text-sm text-neutral-500",children:[T.authorsList.slice(0,6).join(", "),T.authorsList.length>6?"":""]})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-2",children:W?s.jsx("a",{href:W,target:"_blank",rel:"noreferrer",className:"text-sm text-emerald-300 hover:text-emerald-200",children:"Open"}):null})]})},T.id)}),ve.length?null:s.jsx("div",{className:"rounded-2xl border border-neutral-800/70 bg-neutral-900/40 p-6 text-neutral-300",children:Ve.length?"No publications selected.":"No publications match these filters."})]})]})]})})};var bt=(r=>(r[r.Wall=0]="Wall",r[r.Room=1]="Room",r[r.Corridor=2]="Corridor",r[r.Door=3]="Door",r))(bt||{});function b0(r){let i=1779033703^r.length;for(let o=0;o<r.length;o++)i=Math.imul(i^r.charCodeAt(o),3432918353),i=i<<13|i>>>19;return i=Math.imul(i^i>>>16,2246822507),i=Math.imul(i^i>>>13,3266489909),i^=i>>>16,i>>>0}function N0(r){let i=r>>>0;return()=>{i+=1831565813;let o=i;return o=Math.imul(o^o>>>15,o|1),o^=o+Math.imul(o^o>>>7,o|61),((o^o>>>14)>>>0)/4294967296}}function zr(r,i,o){const c=r(),u=o-i+1;return i+Math.floor(c*u)}class j0{constructor(i){this.parent=new Map,this.rank=new Map;for(const o of i)this.parent.set(o,o),this.rank.set(o,0)}find(i){const o=this.parent.get(i);if(!o)throw new Error(`UnionFind: missing item ${i}`);if(o===i)return i;const c=this.find(o);return this.parent.set(i,c),c}union(i,o){let c=this.find(i),u=this.find(o);if(c===u)return!1;const f=this.rank.get(c)??0,p=this.rank.get(u)??0;return f<p&&([c,u]=[u,c]),this.parent.set(u,c),f===p&&this.rank.set(c,f+1),!0}}class S0{constructor(){this.data=[]}get size(){return this.data.length}push(i){this.data.push(i),this.bubbleUp(this.data.length-1)}pop(){if(this.data.length===0)return;const i=this.data[0],o=this.data.pop();return this.data.length>0&&(this.data[0]=o,this.bubbleDown(0)),i}bubbleUp(i){for(;i>0;){const o=i-1>>1;if(this.data[o].key<=this.data[i].key)break;[this.data[o],this.data[i]]=[this.data[i],this.data[o]],i=o}}bubbleDown(i){const o=this.data.length;for(;;){const c=i*2+1,u=c+1;let f=i;if(c<o&&this.data[c].key<this.data[f].key&&(f=c),u<o&&this.data[u].key<this.data[f].key&&(f=u),f===i)break;[this.data[f],this.data[i]]=[this.data[i],this.data[f]],i=f}}}function ll(r,i,o){return i*o+r}function C0(r,i){return Math.abs(r.x-i.x)+Math.abs(r.y-i.y)}function M0(r){const{tiles:i,width:o,height:c,start:u,goal:f,roomPenalty:p,reuseCorridorsBias:h,turnPenalty:m}=r,y=ll(u.x,u.y,o),x=ll(f.x,f.y,o),w=new Float64Array(o*c),N=new Int32Array(o*c),j=new Int8Array(o*c),S=new Uint8Array(o*c);for(let Z=0;Z<w.length;Z++)w[Z]=Number.POSITIVE_INFINITY,N[Z]=-1,j[Z]=-1,S[Z]=0;const M=new S0,P=Math.min(1,h);w[y]=0,M.push({key:C0(u,f)*P,value:y});let B=0;const F=[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1}],_=Z=>Z===bt.Wall?1:Z===bt.Corridor||Z===bt.Door?h:Z===bt.Room?p:1;for(;M.size>0;){const ue=M.pop().value;if(S[ue])continue;if(S[ue]=1,B++,ue===x)break;const Me=ue%o,Re=Math.floor(ue/o);for(let he=0;he<F.length;he++){const ie=F[he],le=Me+ie.dx,de=Re+ie.dy;if(le<0||de<0||le>=o||de>=c)continue;const Ne=ll(le,de,o);if(S[Ne])continue;const Ve=_(i[Ne]),ve=j[ue],xe=ve!==-1&&ve!==he?m:0,K=w[ue]+Ve+xe;if(K<w[Ne]){w[Ne]=K,N[Ne]=ue,j[Ne]=he;const ce=(Math.abs(le-f.x)+Math.abs(de-f.y))*P;M.push({key:K+ce,value:Ne})}}}if(N[x]===-1&&y!==x)return{path:[u,f],visited:B,cost:Number.POSITIVE_INFINITY};const L=[];let Q=x;for(L.push({x:x%o,y:Math.floor(x/o)});Q!==y&&(Q=N[Q],Q!==-1);)L.push({x:Q%o,y:Math.floor(Q/o)});return L.reverse(),{path:L,visited:B,cost:w[x]}}function oi(r){return r.w*r.h}function mi(r,i,o){return Math.max(i,Math.min(o,r))}function P0(r,i){const o=r.x-i.x,c=r.y-i.y;return o*o+c*c}function li(r,i,o){return i*o+r}function E0(r){return{x:Math.floor(r.x+r.w/2),y:Math.floor(r.y+r.h/2)}}function R0(r,i){return{x:r.x-i,y:r.y-i,w:r.w+i*2,h:r.h+i*2}}function I0(r,i){return!(r.x+r.w<=i.x||i.x+i.w<=r.x||r.y+r.h<=i.y||i.y+i.h<=r.y)}function Rd(r,i){const o=mi(i.x,r.x,r.x+r.w-1),c=mi(i.y,r.y,r.y+r.h-1),u=Math.abs(o-r.x),f=Math.abs(o-(r.x+r.w-1)),p=Math.abs(c-r.y),h=Math.abs(c-(r.y+r.h-1)),m=Math.min(u,f,p,h);return m===u?{x:r.x,y:c}:m===f?{x:r.x+r.w-1,y:c}:m===p?{x:o,y:r.y}:{x:o,y:r.y+r.h-1}}class D0{constructor(i,o){this.nextId=1,this.bspQueue=[],this.graphEdgeIndex=0,this.uf=null,this.corridorEdgeIndex=0,this.corridorWork=null,this.corridorsCarved=0,this.postIndex=0,this.seedString=i,this.config=o;const c=b0(i);this.rng=N0(c);const u=new Uint8Array(o.width*o.height);u.fill(bt.Wall);const f=new Map,p=this.makeId("p"),h={id:p,rect:{x:0,y:0,w:o.width,h:o.height},depth:0,isLeaf:!0};f.set(p,h),this.bspQueue.push(p),this.state={stage:"init",tiles:u,width:o.width,height:o.height,partitions:f,leafQueue:[],rooms:[],graphCandidateEdges:[],graphAcceptedEdges:[],corridorPlans:[]},this.overlay={stage:"init",message:"Initialized."}}getState(){return this.state}getOverlay(){return this.overlay}isDone(){return this.state.stage==="done"}nextStep(){switch(this.state.stage){case"init":return this.state.stage="bsp",this.overlay={stage:"bsp",message:"BSP: splitting partitions.",partitions:this.getAllPartitionRects()},{type:"init",seed:this.seedString,width:this.config.width,height:this.config.height};case"bsp":return this.stepBsp();case"rooms":return this.stepRooms();case"graph":return this.stepGraph();case"corridor-plan":return this.stepCorridorPlan();case"corridor-carve":return this.stepCorridorCarve();case"post":return this.stepPost();case"done":return{type:"done",rooms:this.state.rooms.length,corridors:this.corridorsCarved};default:return this.state.stage="done",{type:"done",rooms:this.state.rooms.length,corridors:this.corridorsCarved}}}stepBsp(){const i=this.bspQueue.pop();if(!i){const x=[...this.state.partitions.values()].filter(w=>w.isLeaf).map(w=>w.id);return this.state.leafQueue=x,this.state.stage="rooms",this.overlay={stage:"rooms",message:"Room placement: choosing best candidate per leaf."},{type:"split-skipped",nodeId:"none",rect:{x:0,y:0,w:0,h:0},reason:"BSP complete. Moving to rooms."}}const o=this.state.partitions.get(i);if(!o)throw new Error(`Missing partition node ${i}`);const c=o.rect;if(o.depth>=this.config.maxDepth)return this.overlay={stage:"bsp",message:"BSP: max depth reached for node.",partitions:this.getAllPartitionRects()},{type:"split-skipped",nodeId:i,rect:c,reason:"Max depth reached."};if(c.w<this.config.minLeafSize*2||c.h<this.config.minLeafSize*2)return this.overlay={stage:"bsp",message:"BSP: node too small to split.",partitions:this.getAllPartitionRects()},{type:"split-skipped",nodeId:i,rect:c,reason:"Partition too small to split further."};const u=this.makeSplitCandidates(c);if(u.length===0)return this.overlay={stage:"bsp",message:"BSP: no valid split candidates.",partitions:this.getAllPartitionRects()},{type:"split-skipped",nodeId:i,rect:c,reason:"No valid split candidates."};u.sort((x,w)=>w.score-x.score);const f=u[0],p=this.makeId("p"),h=this.makeId("p"),m={id:p,rect:f.a,depth:o.depth+1,parent:o.id,isLeaf:!0},y={id:h,rect:f.b,depth:o.depth+1,parent:o.id,isLeaf:!0};return o.isLeaf=!1,o.split={orientation:f.orientation,line:f.line,left:p,right:h},this.state.partitions.set(p,m),this.state.partitions.set(h,y),this.bspQueue.push(p,h),this.overlay={stage:"bsp",message:`Split chosen: ${f.orientation} at ${f.line}`,partitions:this.getAllPartitionRects(),splitCandidates:u},{type:"split-chosen",nodeId:i,rect:c,candidates:u,chosen:f}}makeSplitCandidates(i){const o=[],c=this.config.splitCandidates,u=this.config.minLeafSize,p=(i.w/i.h>1.25?"V":i.h/i.w>1.25?"H":this.rng()<.5?"V":"H")==="V"?["V","H"]:["H","V"];for(const h of p){for(let m=0;m<c;m++)if(h==="V"){const y=zr(this.rng,i.x+u,i.x+i.w-u),x={x:i.x,y:i.y,w:y-i.x,h:i.h},w={x:y,y:i.y,w:i.x+i.w-y,h:i.h},N=this.scoreSplit(x,w);N.score>-1e9&&o.push({orientation:h,line:y,a:x,b:w,score:N.score,breakdown:N.breakdown})}else{const y=zr(this.rng,i.y+u,i.y+i.h-u),x={x:i.x,y:i.y,w:i.w,h:y-i.y},w={x:i.x,y,w:i.w,h:i.y+i.h-y},N=this.scoreSplit(x,w);N.score>-1e9&&o.push({orientation:h,line:y,a:x,b:w,score:N.score,breakdown:N.breakdown})}if(o.length>0)break}return o}scoreSplit(i,o){const c=this.config.minLeafSize;if(i.w<c||i.h<c||o.w<c||o.h<c)return{score:-1e9,breakdown:{invalidMinSize:-1e9}};const u=oi(i),f=oi(o),p=u+f,h=1-Math.abs(u-f)/p,m=Math.min(i.w/i.h,i.h/i.w),y=Math.min(o.w/o.h,o.h/o.w),x={balance:h*10,aspect:(m+y)*5};return{score:x.balance+x.aspect,breakdown:x}}getAllPartitionRects(){return[...this.state.partitions.values()].map(i=>i.rect)}stepRooms(){const i=this.state.leafQueue.shift();if(!i)return this.buildGraphCandidates(),this.uf=new j0(this.state.rooms.map(h=>h.id)),this.graphEdgeIndex=0,this.state.stage="graph",this.overlay={stage:"graph",message:"Graph: building MST (Kruskal), one edge considered per step.",graphCandidateEdges:this.state.graphCandidateEdges.slice(0,40),graphAcceptedEdges:[]},{type:"room-fallback",leafId:"none",leafRect:{x:0,y:0,w:0,h:0},reason:"Rooms complete. Moving to graph.",chosen:{rect:{x:0,y:0,w:0,h:0},score:0,breakdown:{}}};const o=this.state.partitions.get(i);if(!o)throw new Error(`Missing leaf ${i}`);const c=o.rect,u=this.makeRoomCandidates(c);if(!(u.length>0)){const h=this.fallbackRoom(c);return this.placeRoom(i,h.rect),this.overlay={stage:"rooms",message:"Room fallback (no valid candidates).",roomLeaf:c,roomCandidates:[],chosenRoom:h.rect},{type:"room-fallback",leafId:i,leafRect:c,reason:"No candidates fit min size/margins.",chosen:h}}u.sort((h,m)=>m.score-h.score);const p=u[0];return this.placeRoom(i,p.rect),this.overlay={stage:"rooms",message:`Room chosen (score ${p.score.toFixed(2)}).`,roomLeaf:c,roomCandidates:u.slice(0,12),chosenRoom:p.rect},{type:"room-chosen",leafId:i,leafRect:c,candidates:u.slice(0,12),chosen:p}}makeRoomCandidates(i){const o=[],c=this.config.roomCandidates,u=this.config.roomMinSize,f=this.config.roomMargin,p={x:i.x+f,y:i.y+f,w:i.w-f*2,h:i.h-f*2};if(p.w<u||p.h<u)return o;for(let h=0;h<c;h++){const m=zr(this.rng,u,p.w),y=zr(this.rng,u,p.h),x=zr(this.rng,p.x,p.x+p.w-m),w=zr(this.rng,p.y,p.y+p.h-y),N={x,y:w,w:m,h:y},j=R0(N,this.config.roomBuffer);let S=!1;for(const P of this.state.rooms)if(I0(j,P.rect)){S=!0;break}if(S)continue;const M=this.scoreRoom(N,i);o.push({rect:N,score:M.score,breakdown:M.breakdown})}return o}fallbackRoom(i){const o=this.config.roomMinSize,c=this.config.roomMargin,u={x:i.x+c,y:i.y+c,w:Math.max(0,i.w-c*2),h:Math.max(0,i.h-c*2)},f=Math.max(o,Math.floor(u.w*.75)),p=Math.max(o,Math.floor(u.h*.75)),h=mi(Math.floor(u.x+(u.w-f)/2),u.x,u.x+u.w-f),m=mi(Math.floor(u.y+(u.h-p)/2),u.y,u.y+u.h-p),y={x:h,y:m,w:Math.min(f,u.w),h:Math.min(p,u.h)},x=this.scoreRoom(y,i);return{rect:y,score:x.score,breakdown:x.breakdown}}scoreRoom(i,o){const c=oi(i),u=Math.min(i.w/i.h,i.h/i.w),f=oi(o),p=c/f,h={area:p*12,aspect:u*8,variety:(1-Math.abs(p-this.config.targetFill))*4};return{score:h.area+h.aspect+h.variety,breakdown:h}}placeRoom(i,o){const u={id:this.makeId("r"),rect:o,center:E0(o),leafId:i};this.state.rooms.push(u);for(let f=o.y;f<o.y+o.h;f++)for(let p=o.x;p<o.x+o.w;p++)this.state.tiles[li(p,f,this.state.width)]=bt.Room}buildGraphCandidates(){const i=this.state.rooms,o=Math.max(1,this.config.kNearest),c=[];for(let p=0;p<i.length;p++){const h=i[p],m=[];for(let y=0;y<i.length;y++){if(p===y)continue;const x=i[y],w=P0(h.center,x.center);m.push({j:y,w})}m.sort((y,x)=>y.w-x.w);for(let y=0;y<Math.min(o,m.length);y++){const x=i[m[y].j],w=h.id,N=x.id,j=w<N?w:N,S=w<N?N:w,M=Math.sqrt(m[y].w);c.push({a:j,b:S,weight:M})}}const u=new Set,f=[];for(const p of c){const h=`${p.a}|${p.b}`;u.has(h)||(u.add(h),f.push(p))}f.sort((p,h)=>p.weight-h.weight),this.state.graphCandidateEdges=f,this.state.graphAcceptedEdges=[]}stepGraph(){if(!this.uf)throw new Error("UnionFind missing (graph stage)");const i=this.state.rooms;if(i.length<=1)return this.state.stage="corridor-plan",this.overlay={stage:"corridor-plan",message:"No corridors needed (0 or 1 room)."},{type:"graph-edge-considered",edge:{a:"none",b:"none",weight:0},accepted:!1,reason:"Not enough rooms."};const o=i.length-1;if(this.state.graphAcceptedEdges.length<o&&this.graphEdgeIndex<this.state.graphCandidateEdges.length){const p=this.state.graphCandidateEdges[this.graphEdgeIndex++],h=this.uf.union(p.a,p.b);return h&&this.state.graphAcceptedEdges.push(p),this.overlay={stage:"graph",message:h?"MST: accepted edge.":"MST: rejected edge (cycle).",graphCandidateEdges:this.state.graphCandidateEdges.slice(Math.max(0,this.graphEdgeIndex-25),this.graphEdgeIndex+5),graphAcceptedEdges:this.state.graphAcceptedEdges.slice()},{type:"graph-edge-considered",edge:p,accepted:h,reason:h?"Connected two components (Kruskal).":"Would create a cycle (Kruskal)."}}const c=this.state.graphCandidateEdges.filter(p=>!this.state.graphAcceptedEdges.some(h=>h.a===p.a&&h.b===p.b)),u=Math.max(0,Math.min(this.config.maxLoops,c.length));if(Math.max(0,this.state.graphAcceptedEdges.length-(i.length-1))<u&&c.length>0&&this.rng()<this.config.extraLoopChance){const p=zr(this.rng,0,c.length-1),h=c[p];return this.state.graphAcceptedEdges.push(h),this.overlay={stage:"graph",message:"Loop: added extra edge.",graphCandidateEdges:this.state.graphCandidateEdges.slice(0,40),graphAcceptedEdges:this.state.graphAcceptedEdges.slice()},{type:"graph-loop-added",edge:h,reason:"Added loop for alternate routes (loopiness)."}}return this.state.stage="corridor-plan",this.corridorEdgeIndex=0,this.overlay={stage:"corridor-plan",message:"Corridors: compute A* path per accepted edge, then carve cell-by-cell.",graphAcceptedEdges:this.state.graphAcceptedEdges.slice()},{type:"graph-edge-considered",edge:{a:"none",b:"none",weight:0},accepted:!1,reason:"Graph complete. Moving to corridors."}}stepCorridorPlan(){const i=this.state.graphAcceptedEdges;if(this.corridorEdgeIndex>=i.length)return this.state.stage="post",this.postIndex=0,this.overlay={stage:"post",message:"Post: placing doors on room boundaries."},{type:"corridor-path-found",plan:{fromRoom:"none",toRoom:"none",start:{x:0,y:0},goal:{x:0,y:0},stats:{visited:0,pathLen:0,cost:0},pathPreview:[]}};const o=i[this.corridorEdgeIndex++],c=this.state.rooms.find(x=>x.id===o.a),u=this.state.rooms.find(x=>x.id===o.b);if(!c||!u)throw new Error("Missing room for edge");const f=Rd(c.rect,u.center),p=Rd(u.rect,c.center),h=M0({tiles:this.state.tiles,width:this.state.width,height:this.state.height,start:f,goal:p,roomPenalty:this.config.roomPenalty,reuseCorridorsBias:this.config.reuseCorridorsBias,turnPenalty:this.config.turnPenalty}),m={fromRoom:c.id,toRoom:u.id,start:f,goal:p,path:h.path,stats:{visited:h.visited,pathLen:h.path.length,cost:h.cost}};this.corridorWork={plan:m,carveIndex:0},this.state.stage="corridor-carve";const y=m.path.slice(0,80);return this.overlay={stage:"corridor-carve",message:"Corridor: carving path cell-by-cell.",corridorPlan:m,carvingIndex:0},{type:"corridor-path-found",plan:{fromRoom:m.fromRoom,toRoom:m.toRoom,start:m.start,goal:m.goal,stats:m.stats,pathPreview:y}}}stepCorridorCarve(){if(!this.corridorWork)return this.state.stage="corridor-plan",{type:"corridor-carve-cell",point:{x:0,y:0},index:0,total:0};const{plan:i}=this.corridorWork,o=this.corridorWork.carveIndex;if(o>=i.path.length)return this.state.corridorPlans.push(i),this.corridorWork=null,this.state.stage="corridor-plan",this.corridorsCarved++,this.overlay={stage:"corridor-plan",message:"Corridor carved. Planning next corridor."},{type:"corridor-carve-cell",point:i.goal,index:i.path.length,total:i.path.length};const c=i.path[o];return this.state.tiles[li(c.x,c.y,this.state.width)]===bt.Wall&&(this.state.tiles[li(c.x,c.y,this.state.width)]=bt.Corridor),this.corridorWork.carveIndex++,this.overlay={stage:"corridor-carve",message:`Carving corridor: ${this.corridorWork.carveIndex}/${i.path.length}`,corridorPlan:i,carvingIndex:this.corridorWork.carveIndex},{type:"corridor-carve-cell",point:c,index:o+1,total:i.path.length}}stepPost(){if(this.state.corridorPlans.length===0)return this.state.stage="done",this.overlay={stage:"done",message:"Done."},{type:"done",rooms:this.state.rooms.length,corridors:this.corridorsCarved};const i=this.state.corridorPlans[this.postIndex];if(!i)return this.state.stage="done",this.overlay={stage:"done",message:"Done."},{type:"done",rooms:this.state.rooms.length,corridors:this.corridorsCarved};const o=[i.start,i.goal];for(const c of o){const u=li(c.x,c.y,this.state.width),f=this.state.tiles[u];(f===bt.Room||f===bt.Corridor)&&(this.state.tiles[u]=bt.Door)}return this.overlay={stage:"post",message:"Placed doors for one corridor."},this.postIndex+=1,{type:"door-placed",point:i.start,roomId:i.fromRoom,reason:"Door at corridor endpoint on room boundary."}}makeId(i){return`${i}${this.nextId++}`}}const cl=10,mf=.1,gf=2,ul=r=>Math.min(gf,Math.max(mf,r)),Ie={seed:"dungeon-001",gridW:80,gridH:50,speed:60,zoom:1,maxDepth:5,minLeafSize:14,roomMinSize:6,roomMargin:2,targetFill:.55,roomBuffer:1,kNearest:4,maxLoops:6,extraLoopChance:.35,roomPenalty:40,turnPenalty:0,reuseCorridorsBias:1.1};function L0(r){switch(r){case bt.Wall:return"#101218";case bt.Room:return"#2a6fdb";case bt.Corridor:return"#e5b454";case bt.Door:return"#e46a6a";default:return"#000000"}}function ci(r,i,o,c){r.strokeStyle=c,r.lineWidth=Math.max(1,Math.floor(o/8)),r.strokeRect(i.x*o+.5,i.y*o+.5,i.w*o,i.h*o)}function T0(r){const{ctx:i,tiles:o,width:c,height:u,cell:f,overlay:p}=r;i.clearRect(0,0,c*f,u*f);for(let h=0;h<u;h++)for(let m=0;m<c;m++){const y=o[h*c+m];i.fillStyle=L0(y),i.fillRect(m*f,h*f,f,f)}if(p){if(i.save(),i.globalAlpha=.9,p.partitions)for(const h of p.partitions)ci(i,h,f,"rgba(255,255,255,0.22)");if(p.roomLeaf&&ci(i,p.roomLeaf,f,"rgba(255,255,255,0.6)"),p.roomCandidates){i.globalAlpha=.55;for(const h of p.roomCandidates)ci(i,h.rect,f,"rgba(0,255,255,0.35)");i.globalAlpha=.9}if(p.chosenRoom&&ci(i,p.chosenRoom,f,"rgba(0,255,255,0.9)"),p.corridorPlan?.path){const h=p.corridorPlan.path,m=p.carvingIndex??0;i.globalAlpha=.35,i.fillStyle="rgba(255,255,255,0.35)";for(let y=0;y<h.length;y++){const x=h[y];i.fillRect(x.x*f,x.y*f,f,f)}i.globalAlpha=.8,i.fillStyle="rgba(255,255,255,0.8)";for(let y=0;y<Math.min(m,h.length);y++){const x=h[y];i.fillRect(x.x*f,x.y*f,f,f)}}i.restore()}}function Id(r){switch(r.type){case"init":return`Seed "${r.seed}", grid ${r.width}x${r.height}`;case"split-chosen":return`Split ${r.chosen.orientation} @ ${r.chosen.line} (candidates: ${r.candidates.length})`;case"split-skipped":return`Split skipped: ${r.reason}`;case"room-chosen":return`Room chosen in leaf ${r.leafId} (candidates: ${r.candidates.length})`;case"room-fallback":return`Room fallback in leaf ${r.leafId}: ${r.reason}`;case"graph-edge-considered":return`${r.accepted?"Accepted":"Rejected"} edge ${r.edge.a}-${r.edge.b} (${r.reason})`;case"graph-loop-added":return`Loop edge added ${r.edge.a}-${r.edge.b}`;case"corridor-path-found":return`Corridor path planned ${r.plan.fromRoom}->${r.plan.toRoom} (len ${r.plan.stats.pathLen}, visited ${r.plan.stats.visited})`;case"corridor-carve-cell":return`Carving corridor: ${r.index}/${r.total}`;case"door-placed":return`Door placed for room ${r.roomId}`;case"done":return`Done: rooms=${r.rooms}, corridors=${r.corridors}`;default:return"Event"}}function z0(r){const i=[];if(r.length===0)return i;let o=r[0],c=1;for(let u=1;u<r.length;u++){const f=r[u];f===o?c++:(i.push([o,c]),o=f,c=1)}return i.push([o,c]),i}function A0(){const r="Traditional rooms + corridors built step-by-step with transparent decisions (binary space partitioning -> rooms -> minimum spanning tree -> A* path carving).",i=$=>{if($.length<2)return 0;const we=$[0].clientX-$[1].clientX,Ge=$[0].clientY-$[1].clientY;return Math.hypot(we,Ge)},[o,c]=v.useState(Ie.seed),[u,f]=v.useState("basic"),[p,h]=v.useState(Ie.gridW),[m,y]=v.useState(Ie.gridH),[x,w]=v.useState(Ie.speed),[N,j]=v.useState(Ie.zoom),[S,M]=v.useState(Ie.maxDepth),[P,B]=v.useState(Ie.minLeafSize),[F,_]=v.useState(Ie.roomMinSize),[L,Q]=v.useState(Ie.roomMargin),[Z,ue]=v.useState(Ie.targetFill),[Me,Re]=v.useState(Ie.roomBuffer),[he,ie]=v.useState(Ie.kNearest),[le,de]=v.useState(Ie.maxLoops),[Ne,Ve]=v.useState(Ie.extraLoopChance),[ve,xe]=v.useState(Ie.roomPenalty),[K,ce]=v.useState(Ie.turnPenalty),[ae,E]=v.useState(Ie.reuseCorridorsBias),[H,je]=v.useState(!1),[Ce,Ae]=v.useState(!1),[_e,ee]=v.useState(!1),[me,se]=v.useState([]),[fe,T]=v.useState(null),[O,W]=v.useState(null),[oe,Fe]=v.useState(0),Ze=v.useRef(null),Le=v.useRef(null),qe=v.useRef(null),Oe=v.useRef(null),We=v.useRef(!0),it=v.useRef(null),Bt=v.useRef(0),Rt=v.useRef(0),nt=v.useRef({active:!1,startX:0,startY:0,scrollLeft:0,scrollTop:0}),G=v.useRef({active:!1,startDist:0,startZoom:1}),Je=v.useMemo(()=>({width:p,height:m,maxDepth:S,minLeafSize:P,splitCandidates:10,roomMinSize:F,roomMargin:L,roomCandidates:30,targetFill:Z,roomBuffer:Me,kNearest:he,extraLoopChance:Ne,maxLoops:le,roomPenalty:ve,reuseCorridorsBias:ae,turnPenalty:K}),[p,m,S,P,F,L,Z,Me,he,le,Ne,ve,ae,K]),et=Math.max(1,Math.round(cl*N)),Te=Math.round(N*100),Be=$=>({padding:"6px 10px",border:"1px solid rgba(255,255,255,0.16)",borderRadius:8,background:$?"rgba(255,255,255,0.12)":"transparent",color:"inherit"}),vt=o===Ie.seed&&p===Ie.gridW&&m===Ie.gridH&&x===Ie.speed&&N===Ie.zoom&&u==="basic"&&S===Ie.maxDepth&&P===Ie.minLeafSize&&F===Ie.roomMinSize&&L===Ie.roomMargin&&Z===Ie.targetFill&&Me===Ie.roomBuffer&&he===Ie.kNearest&&le===Ie.maxLoops&&Ne===Ie.extraLoopChance&&ve===Ie.roomPenalty&&K===Ie.turnPenalty&&ae===Ie.reuseCorridorsBias;function qt($){const we=($??o).trim()||"dungeon",Ge=new D0(we,Je);Le.current=Ge,se([]),T(null),W(Ge.getOverlay()),Fe(Ue=>Ue+1)}function Ct(){const $=Le.current;if(!$)return;const we=$.nextStep(),Ge=$.getOverlay();T(we),W(Ge),se(Ue=>[...Ue.length>2500?Ue.slice(Ue.length-2e3):Ue,we]),Fe(Ue=>Ue+1)}function Kt(){const $=Oe.current;if(!$)return;const we=Math.max(1,$.clientWidth-24),Ge=Math.max(1,$.clientHeight-24),Ue=Math.min(we/(p*cl),Ge/(m*cl));Number.isFinite(Ue)&&j(ul(Ue))}function ot(){!H&&We.current&&(Kt(),We.current=!1),je($=>!$)}function mt($){h($),We.current=!0}function Tt($){y($),We.current=!0}function Zt(){c(Ie.seed),h(Ie.gridW),y(Ie.gridH),w(Ie.speed),j(Ie.zoom),M(Ie.maxDepth),B(Ie.minLeafSize),_(Ie.roomMinSize),Q(Ie.roomMargin),ue(Ie.targetFill),Re(Ie.roomBuffer),ie(Ie.kNearest),de(Ie.maxLoops),Ve(Ie.extraLoopChance),xe(Ie.roomPenalty),ce(Ie.turnPenalty),E(Ie.reuseCorridorsBias),f("basic"),We.current=!0}function Ke($,we){const Ge=URL.createObjectURL(we),Ue=document.createElement("a");Ue.href=Ge,Ue.download=$,document.body.appendChild(Ue),Ue.click(),Ue.remove(),URL.revokeObjectURL(Ge)}function gn(){const $=Le.current;if(!$)return null;const we=$.getState(),{width:Ge,height:Ue}=we,wt=we.tiles,tn=z0(wt),Sn=we.corridorPlans.map((I,U)=>({id:`c${U+1}`,fromRoomId:I.fromRoom,toRoomId:I.toRoom,doors:[I.start,I.goal],length:I.path.length})),Qt=new Map;for(const I of we.rooms)Qt.set(I.id,new Set);for(const I of we.graphAcceptedEdges)Qt.get(I.a)?.add(I.b),Qt.get(I.b)?.add(I.a);const zt=we.rooms.map(I=>({id:I.id,rect:I.rect,center:I.center,area:I.rect.w*I.rect.h,neighbors:Array.from(Qt.get(I.id)??[])}));let Cn=0,Mn=0;for(let I=0;I<wt.length;I++)wt[I]===bt.Door&&Cn++,wt[I]===bt.Corridor&&Mn++;const un=new Set;if(zt.length>0){const I=[zt[0].id];for(un.add(zt[0].id);I.length>0;){const U=I.shift();for(const J of Qt.get(U)??[])un.has(J)||(un.add(J),I.push(J))}}const k=zt.length<=1?!0:un.size===zt.length;return{seed:$.seedString,config:$.config,size:{width:Ge,height:Ue},tileSize:1,origin:{x:0,y:0},tileLegend:{wall:bt.Wall,room:bt.Room,corridor:bt.Corridor,door:bt.Door},tiles:{width:Ge,height:Ue,encoding:"rle",data:tn},rooms:zt,connections:Sn,validation:{roomCount:zt.length,corridorTiles:Mn,doorCount:Cn,corridorLength:we.corridorPlans.reduce((I,U)=>I+U.path.length,0),roomsConnected:k}}}function Nt(){const $=gn();if(!$)return;const we=$.seed.replace(/[^a-z0-9-_]+/gi,"-").toLowerCase()||"dungeon",Ge=JSON.stringify($,null,2);Ke(`${we}-level.json`,new Blob([Ge],{type:"application/json"}))}function jt(){const $=Le.current;if(!$)return;const{width:we,height:Ge,tiles:Ue}=$.getState(),wt=$.seedString.replace(/[^a-z0-9-_]+/gi,"-").toLowerCase()||"dungeon",tn=[];for(let Qt=0;Qt<Ge;Qt++){const zt=[];for(let Cn=0;Cn<we;Cn++)zt.push(Ue[Qt*we+Cn]);tn.push(zt.join(","))}const Sn=tn.join(`
`);Ke(`${wt}-tiles.csv`,new Blob([Sn],{type:"text/csv"}))}function en(){const $=qe.current;$&&(document.fullscreenElement?document.exitFullscreen().catch(()=>{}):$.requestFullscreen().catch(()=>{}))}v.useEffect(()=>{qt(o)},[p,m,S,P,F,L,Z,Me,he,le,Ne,ve,ae,K]),v.useEffect(()=>{H&&u==="advanced"&&f("basic")},[H,u]),v.useEffect(()=>{const $=Le.current,we=Ze.current;if(!$||!we)return;const Ge=window.devicePixelRatio||1;we.width=Math.floor(Je.width*et*Ge),we.height=Math.floor(Je.height*et*Ge),we.style.width=`${Je.width*et}px`,we.style.height=`${Je.height*et}px`;const Ue=we.getContext("2d");if(!Ue)return;Ue.setTransform(Ge,0,0,Ge,0,0);const wt=$.getState();T0({ctx:Ue,tiles:wt.tiles,width:wt.width,height:wt.height,cell:et,overlay:O})},[oe,Je.width,Je.height,et,O]),v.useEffect(()=>{const $=Ge=>{if(!nt.current.active)return;const Ue=Oe.current;if(!Ue)return;const wt=Ge.clientX-nt.current.startX,tn=Ge.clientY-nt.current.startY;Ue.scrollLeft=nt.current.scrollLeft-wt,Ue.scrollTop=nt.current.scrollTop-tn},we=()=>{nt.current.active&&(nt.current.active=!1,ee(!1))};return window.addEventListener("mousemove",$),window.addEventListener("mouseup",we),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",we)}},[]),v.useEffect(()=>{const $=()=>{Ae(document.fullscreenElement===qe.current)};return document.addEventListener("fullscreenchange",$),()=>{document.removeEventListener("fullscreenchange",$)}},[]),v.useEffect(()=>{if(!H){it.current&&cancelAnimationFrame(it.current),it.current=null;return}const $=we=>{const Ge=Le.current;if(!Ge)return;Bt.current||(Bt.current=we);const Ue=(we-Bt.current)/1e3;Bt.current=we,Rt.current+=Ue;const wt=1/Math.max(1,x);let tn=0;for(;Rt.current>=wt&&tn<200;)if(Rt.current-=wt,Ct(),tn++,Ge.isDone()){je(!1);break}it.current=requestAnimationFrame($)};return it.current=requestAnimationFrame($),()=>{it.current&&cancelAnimationFrame(it.current),it.current=null,Bt.current=0,Rt.current=0}},[H,x]);const Or=fe?Id(fe):"No events yet.";return s.jsxs("div",{className:"max-w-7xl mx-auto px-6 pb-24 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"mb-10",children:[s.jsx(jn,{to:"/playground",className:"text-sm text-neutral-300 hover:text-white",children:"<- Back to Playground"}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mt-4",children:"Procedural Dungeon Designer"}),s.jsx("p",{className:"text-neutral-300 mt-3 max-w-2xl",children:r})]}),s.jsxs("div",{ref:qe,className:`grid gap-4 items-stretch lg:grid-cols-[minmax(320px,1fr)_420px] ${Ce?"w-full h-full bg-neutral-950 p-4":""}`,children:[s.jsxs("div",{className:"flex flex-col min-h-0",children:[s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{children:"Seed"}),s.jsx("input",{value:o,onChange:$=>c($.target.value),style:{width:220,padding:"6px 8px"}})]}),s.jsx("button",{onClick:()=>qt(o),style:{padding:"6px 10px"},type:"button",children:"Reset"}),s.jsx("button",{onClick:Zt,style:{padding:"6px 10px"},type:"button",disabled:vt,title:vt?"Already at defaults":"Reset all settings to defaults",children:"Reset defaults"}),s.jsx("button",{onClick:ot,style:{padding:"6px 10px"},type:"button",children:H?"Pause":"Play"}),s.jsx("button",{onClick:()=>Ct(),style:{padding:"6px 10px"},type:"button",children:"Step"}),s.jsx("button",{onClick:en,style:{padding:"6px 10px"},type:"button",children:Ce?"Exit Fullscreen":"Fullscreen"}),s.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[s.jsx("span",{children:"Mode"}),s.jsx("button",{onClick:()=>f("basic"),style:Be(u==="basic"),type:"button",children:"Basic"}),s.jsx("button",{onClick:()=>f("advanced"),style:Be(u==="advanced"),type:"button",children:"Advanced"})]})]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"nowrap",alignItems:"center",marginBottom:12},children:[s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{children:"Steps/s"}),s.jsx("input",{type:"range",min:1,max:240,value:x,onChange:$=>w(parseInt($.target.value,10)),style:{width:120}}),s.jsx("span",{style:{width:40,textAlign:"right"},children:x})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{children:"Zoom"}),s.jsx("input",{type:"range",min:mf,max:gf,step:.05,value:N,onChange:$=>j(ul(parseFloat($.target.value))),style:{width:120}}),s.jsxs("span",{style:{width:40,textAlign:"right"},children:[Te,"%"]})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{children:"W"}),s.jsx("input",{type:"number",min:40,max:140,value:p,onChange:$=>mt(parseInt($.target.value,10)),style:{width:60,padding:"6px 8px"}})]}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("span",{children:"H"}),s.jsx("input",{type:"number",min:30,max:110,value:m,onChange:$=>Tt(parseInt($.target.value,10)),style:{width:60,padding:"6px 8px"}})]})]}),u==="advanced"?s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",marginBottom:12},children:[s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = more partitions and more (smaller) rooms.",children:[s.jsx("span",{children:"Max depth"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:2,max:8,step:1,value:S,onChange:$=>M(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:S})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = fewer splits and larger leaves (more open feel).",children:[s.jsx("span",{children:"Min leaf size"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:8,max:24,step:1,value:P,onChange:$=>B(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:P})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = fewer but chunkier rooms.",children:[s.jsx("span",{children:"Room min size"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:4,max:14,step:1,value:F,onChange:$=>_(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:F})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = rooms sit further from partition edges.",children:[s.jsx("span",{children:"Room margin"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:0,max:6,step:1,value:L,onChange:$=>Q(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:L})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Lower = smaller rooms; higher = rooms fill more of each leaf.",children:[s.jsx("span",{children:"Room fill target"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:.3,max:.8,step:.05,value:Z,onChange:$=>ue(parseFloat($.target.value))}),s.jsx("span",{style:{width:48,textAlign:"right"},children:Z.toFixed(2)})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Extra spacing between rooms (adds corridor air gaps).",children:[s.jsx("span",{children:"Room buffer"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:0,max:3,step:1,value:Me,onChange:$=>Re(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:Me})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Lower = tree-like graph; higher = more local connections.",children:[s.jsx("span",{children:"K-nearest"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:1,max:8,step:1,value:he,onChange:$=>ie(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:he})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Upper cap on extra cycles beyond the minimum spanning tree.",children:[s.jsx("span",{children:"Max loops"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:0,max:12,step:1,value:le,onChange:$=>de(parseInt($.target.value,10))}),s.jsx("span",{style:{width:36,textAlign:"right"},children:le})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Chance to add a non-tree edge each step (more loopiness).",children:[s.jsx("span",{children:"Extra loop chance"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:0,max:1,step:.05,value:Ne,onChange:$=>Ve(parseFloat($.target.value))}),s.jsxs("span",{style:{width:48,textAlign:"right"},children:[Math.round(Ne*100),"%"]})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = corridors avoid cutting through rooms.",children:[s.jsx("span",{children:"Room penalty"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:1,max:80,step:1,value:ve,onChange:$=>xe(parseInt($.target.value,10))}),s.jsx("span",{style:{width:40,textAlign:"right"},children:ve})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Higher = straighter corridors (turns cost more).",children:[s.jsx("span",{children:"Turn penalty"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:0,max:4,step:.1,value:K,onChange:$=>ce(parseFloat($.target.value))}),s.jsx("span",{style:{width:48,textAlign:"right"},children:K.toFixed(1)})]})]}),s.jsxs("label",{style:{display:"grid",gap:6},title:"Lower = new corridors prefer to reuse existing ones.",children:[s.jsx("span",{children:"Reuse corridor bias"}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[s.jsx("input",{type:"range",min:.6,max:1.4,step:.05,value:ae,onChange:$=>E(parseFloat($.target.value))}),s.jsx("span",{style:{width:48,textAlign:"right"},children:ae.toFixed(2)})]})]})]}):null,s.jsx("div",{ref:Oe,onMouseDown:$=>{if($.button!==0)return;$.preventDefault();const we=Oe.current;we&&(nt.current={active:!0,startX:$.clientX,startY:$.clientY,scrollLeft:we.scrollLeft,scrollTop:we.scrollTop},ee(!0))},onTouchStart:$=>{if(Oe.current){if($.preventDefault(),$.touches.length===1){const we=$.touches[0];nt.current={active:!0,startX:we.clientX,startY:we.clientY,scrollLeft:Oe.current.scrollLeft,scrollTop:Oe.current.scrollTop},G.current.active=!1,ee(!0)}else if($.touches.length===2){const we=i($.touches);G.current={active:!0,startDist:we,startZoom:N},nt.current.active=!1,ee(!1)}}},onTouchMove:$=>{if(Oe.current){if(G.current.active&&$.touches.length===2){$.preventDefault();const we=i($.touches);if(G.current.startDist>0){const Ge=G.current.startZoom*(we/G.current.startDist);j(ul(Ge))}return}if(nt.current.active&&$.touches.length===1){$.preventDefault();const we=$.touches[0],Ge=we.clientX-nt.current.startX,Ue=we.clientY-nt.current.startY;Oe.current.scrollLeft=nt.current.scrollLeft-Ge,Oe.current.scrollTop=nt.current.scrollTop-Ue}}},onTouchEnd:$=>{if(Oe.current){if($.touches.length===1){const we=$.touches[0];nt.current={active:!0,startX:we.clientX,startY:we.clientY,scrollLeft:Oe.current.scrollLeft,scrollTop:Oe.current.scrollTop},G.current.active=!1,ee(!0);return}nt.current.active=!1,G.current.active=!1,ee(!1)}},onTouchCancel:()=>{nt.current.active=!1,G.current.active=!1,ee(!1)},style:{border:"1px solid rgba(255,255,255,0.12)",borderRadius:12,padding:12,overflow:"auto",cursor:_e?"grabbing":"grab",touchAction:"none"},className:"flex-1 min-h-[260px]",children:s.jsx("canvas",{ref:Ze})}),Ce?null:s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:10},children:[s.jsx("button",{onClick:Nt,style:{padding:"6px 10px"},type:"button",children:"Export JSON"}),s.jsx("button",{onClick:jt,style:{padding:"6px 10px"},type:"button",children:"Export CSV"})]}),s.jsxs("div",{style:{marginTop:10,opacity:.9},children:[s.jsx("strong",{children:"Current:"})," ",Or]})]}),s.jsxs("div",{style:{border:"1px solid rgba(255,255,255,0.12)",borderRadius:12,padding:12},children:[s.jsxs("div",{style:{marginBottom:10},children:[s.jsx("div",{style:{fontWeight:700},children:"Decision trace"}),s.jsx("div",{style:{opacity:.85,marginTop:6,fontSize:13},children:O?.message??"-"})]}),s.jsxs("div",{style:{display:"grid",gap:10},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Latest event"}),s.jsx("pre",{style:{margin:0,padding:10,borderRadius:10,background:"rgba(0,0,0,0.25)",maxHeight:220,overflow:"auto"},children:fe?JSON.stringify(fe,null,2):"-"})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Event log (most recent last)"}),s.jsxs("div",{style:{maxHeight:360,overflow:"auto",borderRadius:10,background:"rgba(0,0,0,0.25)"},children:[me.map(($,we)=>s.jsxs("div",{style:{padding:"8px 10px",borderBottom:"1px solid rgba(255,255,255,0.06)",fontSize:13},children:[s.jsxs("span",{style:{opacity:.8,marginRight:8},children:[we+1,"."]}),s.jsx("span",{children:Id($)})]},we)),me.length===0&&s.jsx("div",{style:{padding:10,opacity:.8},children:"-"})]})]})]})]})]})]})}function V(r,i,o){return Math.min(o,Math.max(i,r))}function q(r,i,o,c=8){const u=o.currentTime,f=c/1e3;r.cancelScheduledValues(u),r.setValueAtTime(r.value,u),r.linearRampToValueAtTime(i,u+f)}function ua(r,i,o){const c=o.currentTime;r.cancelScheduledValues(c),r.setValueAtTime(i,c)}function Dd(r){const i=[32,64,128,256,512,1024,2048,4096,8192,16384,32768],o=Math.round(r);let c=i[0],u=Math.abs(o-c);for(const f of i){const p=Math.abs(o-f);p<u&&(c=f,u=p)}return c}function dl(r,i=2048){const o=V(r,0,50),c=new Float32Array(i);for(let u=0;u<i;u+=1){const f=u/(i-1)*2-1;c[u]=Math.atan(f*o)/Math.atan(o)}return c}function ui(r,i,o){const c=new ConstantSourceNode(r,{offset:i}),u=new GainNode(r,{gain:o}),f=new GainNode(r,{gain:1});c.connect(f),u.connect(f),c.start();const p=new GainNode(r,{gain:0}),h=new GainNode(r,{gain:0});f.connect(p.gain);const m=new ConstantSourceNode(r,{offset:1}),y=new GainNode(r,{gain:-1});return f.connect(y),m.connect(h.gain),y.connect(h.gain),m.start(),{mixPos:c,mixCvIn:u,mixSum:f,wet:p,dry:h,one:m,inv:y,setMix:x=>q(c.offset,V(x,-2,2),r,20),setDepth:x=>q(u.gain,V(x,0,4),r,20),dispose:()=>{try{c.stop(),m.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect()}}}function fl(r,i,o){const c=V(o,.05,8),u=Math.max(1,Math.floor(r.sampleRate*c)),f=new AudioBuffer({length:u,numberOfChannels:1,sampleRate:r.sampleRate}),p=f.getChannelData(0),h=V(Math.round(i),0,3);for(let m=0;m<u;m+=1){const y=m/(u-1);let x=1-y;h===0&&(x=Math.pow(x,2.2)),h===1&&(x=Math.pow(x,3.6)),h===2&&(x=Math.pow(x,2.8)),h===3&&(x=Math.pow(x,1.8));let w=(Math.random()*2-1)*x;h===2&&(w+=Math.sin(2*Math.PI*(200+600*y)*(m/r.sampleRate))*x*.15),h===3&&(w+=Math.sin(2*Math.PI*(120+1200*y)*(m/r.sampleRate))*x*.2),p[m]=w}return f}function Ld(r,i,o,c){const u=new ConstantSourceNode(r,{offset:i}),f=new GainNode(r,{gain:o});return u.connect(c),f.connect(c),u.start(),{base:u,modIn:f,setBase:p=>q(u.offset,p,r),setDepth:p=>q(f.gain,p,r),dispose:()=>{try{u.stop()}catch{}u.disconnect(),f.disconnect()}}}const Ar={keyboard:{type:"keyboard",title:"Keyboard",inputs:[],outputs:[{id:"pitch",name:"PITCH (Hz)",dir:"out",kind:"pitch"},{id:"pitch3",name:"PITCH (V2)",dir:"out",kind:"pitch"},{id:"pitch5",name:"PITCH (V3)",dir:"out",kind:"pitch"},{id:"gate",name:"GATE",dir:"out",kind:"gate"}],params:[{id:"pitchHz",label:"Pitch (Hz)",min:20,max:2e3,step:.01,defaultValue:110},{id:"glideMs",label:"Glide (ms)",min:0,max:500,step:1,defaultValue:0},{id:"gate",label:"Gate (0/1)",min:0,max:1,step:1,defaultValue:0},{id:"trigMs",label:"Trig (ms)",min:1,max:200,step:1,defaultValue:10}],create:(r,i)=>{const o=new ConstantSourceNode(r,{offset:i.params.pitchHz??110}),c=new ConstantSourceNode(r,{offset:i.params.pitch3Hz??i.params.pitchHz??110}),u=new ConstantSourceNode(r,{offset:i.params.pitch5Hz??i.params.pitchHz??110});o.start(),c.start(),u.start();const f=new AudioWorkletNode(r,"gate-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]}),p=f.parameters.get("gate");let h=i.params.glideMs??0;const m={id:i.id,type:"keyboard",inputs:{},outputs:{pitch:o,pitch3:c,pitch5:u,gate:f},setParam:(y,x)=>{if(y==="pitchHz"){const w=h,N=r.currentTime,j=V(x,20,2e4);o.offset.cancelScheduledValues(N),o.offset.setValueAtTime(o.offset.value,N),w<=0?o.offset.setValueAtTime(j,N):o.offset.linearRampToValueAtTime(j,N+w/1e3)}y==="pitch3Hz"&&q(c.offset,V(x,20,2e4),r),y==="pitch5Hz"&&q(u.offset,V(x,20,2e4),r),y==="glideMs"&&(h=V(x,0,500)),y==="gate"&&p&&(p.value=x>=.5?1:0)},dispose:()=>{try{o.stop(),c.stop(),u.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect()}};return p&&(p.value=(i.params.gate??0)>=.5?1:0),m}},osc:{type:"osc",title:"Osc",inputs:[{id:"pitch",name:"PITCH",dir:"in",kind:"pitch"},{id:"fm",name:"FM",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"baseHz",label:"Base (Hz)",min:0,max:2e3,step:.01,defaultValue:110},{id:"pitchAmt",label:"Pitch Amt",min:0,max:2,step:.001,defaultValue:1},{id:"fmDepthHz",label:"FM Depth (Hz)",min:0,max:4e3,step:1,defaultValue:0},{id:"level",label:"Level",min:0,max:1,step:.001,defaultValue:.2},{id:"wave",label:"Wave (0=sine 1=saw 2=square 3=tri)",min:0,max:3,step:1,defaultValue:1}],create:(r,i)=>{const o=new OscillatorNode(r,{type:"sawtooth",frequency:0}),c=new GainNode(r,{gain:i.params.level??.2}),u=Ld(r,i.params.baseHz??110,0,o.frequency),f=new GainNode(r,{gain:i.params.pitchAmt??1});f.connect(o.frequency);const p=new GainNode(r,{gain:i.params.fmDepthHz??0});p.connect(o.frequency),o.connect(c),o.start();const h=["sine","sawtooth","square","triangle"],m=x=>{const w=Math.round(V(x,0,3));o.type=h[w]};return m(i.params.wave??1),{id:i.id,type:"osc",inputs:{pitch:f,fm:p},outputs:{out:c},setParam:(x,w)=>{x==="baseHz"&&u.setBase(V(w,0,2e4)),x==="pitchAmt"&&q(f.gain,V(w,0,4),r),x==="fmDepthHz"&&q(p.gain,V(w,0,2e4),r),x==="level"&&q(c.gain,V(w,0,1),r),x==="wave"&&m(w)},dispose:()=>{try{o.stop()}catch{}o.disconnect(),c.disconnect(),f.disconnect(),p.disconnect(),u.dispose()}}}},filter:{type:"filter",title:"Filter",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"cutoffCv",name:"CUTOFF CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"cutoff",label:"Cutoff (Hz)",min:20,max:2e4,step:1,defaultValue:1200},{id:"cutoffDepthHz",label:"Cutoff Depth (Hz)",min:0,max:12e3,step:1,defaultValue:0},{id:"q",label:"Res (Q)",min:.1,max:30,step:.01,defaultValue:.7}],create:(r,i)=>{const o=new BiquadFilterNode(r,{type:"lowpass",frequency:0,Q:i.params.q??.7}),c=Ld(r,i.params.cutoff??1200,0,o.frequency),u=new GainNode(r,{gain:i.params.cutoffDepthHz??0});return u.connect(o.frequency),{id:i.id,type:"filter",inputs:{in:o,cutoffCv:u},outputs:{out:o},setParam:(p,h)=>{p==="cutoff"&&c.setBase(V(h,20,2e4)),p==="cutoffDepthHz"&&q(u.gain,V(h,0,2e4),r),p==="q"&&q(o.Q,V(h,.1,40),r)},dispose:()=>{o.disconnect(),u.disconnect(),c.dispose()}}}},adsr:{type:"adsr",title:"ADSR",inputs:[{id:"gate",name:"GATE",dir:"in",kind:"gate"}],outputs:[{id:"env",name:"ENV",dir:"out",kind:"cv"}],params:[{id:"attack",label:"Attack (s)",min:0,max:5,step:.001,defaultValue:.01},{id:"decay",label:"Decay (s)",min:0,max:5,step:.001,defaultValue:.15},{id:"sustain",label:"Sustain",min:0,max:1,step:.001,defaultValue:.6},{id:"release",label:"Release (s)",min:0,max:5,step:.001,defaultValue:.2}],create:(r,i)=>{const o=new AudioWorkletNode(r,"adsr-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]}),c=o.parameters;return c.get("attack").value=i.params.attack??.01,c.get("decay").value=i.params.decay??.15,c.get("sustain").value=i.params.sustain??.6,c.get("release").value=i.params.release??.2,{id:i.id,type:"adsr",inputs:{gate:o},outputs:{env:o},setParam:(f,p)=>{const h=o.parameters.get(f);h&&q(h,p,r,12)},dispose:()=>{o.disconnect()}}}},vca:{type:"vca",title:"VCA",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"cv",name:"CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"bias",label:"Bias",min:0,max:1,step:.001,defaultValue:0},{id:"cvDepth",label:"CV Depth",min:0,max:2,step:.001,defaultValue:1}],create:(r,i)=>{const o=new GainNode(r,{gain:0}),c=new ConstantSourceNode(r,{offset:i.params.bias??0}),u=new GainNode(r,{gain:i.params.cvDepth??1});return c.connect(o.gain),u.connect(o.gain),c.start(),{id:i.id,type:"vca",inputs:{in:o,cv:u},outputs:{out:o},setParam:(p,h)=>{p==="bias"&&q(c.offset,V(h,0,1),r),p==="cvDepth"&&q(u.gain,V(h,0,4),r)},dispose:()=>{try{c.stop()}catch{}c.disconnect(),u.disconnect(),o.disconnect()}}}},lfo:{type:"lfo",title:"LFO",inputs:[],outputs:[{id:"out",name:"OUT",dir:"out",kind:"cv"}],params:[{id:"rate",label:"Rate (Hz)",min:.01,max:40,step:.01,defaultValue:4},{id:"depth",label:"Depth",min:0,max:1,step:.001,defaultValue:1},{id:"wave",label:"Wave (0=sine 1=saw 2=square 3=tri)",min:0,max:3,step:1,defaultValue:0}],create:(r,i)=>{const o=new OscillatorNode(r,{type:"sine",frequency:i.params.rate??4}),c=new GainNode(r,{gain:i.params.depth??1});o.connect(c),o.start();const u=["sine","sawtooth","square","triangle"],f=h=>{o.type=u[Math.round(V(h,0,3))]};return f(i.params.wave??0),{id:i.id,type:"lfo",inputs:{},outputs:{out:c},setParam:(h,m)=>{h==="rate"&&q(o.frequency,V(m,.01,200),r),h==="depth"&&q(c.gain,V(m,0,2),r),h==="wave"&&f(m)},dispose:()=>{try{o.stop()}catch{}o.disconnect(),c.disconnect()}}}},arp:{type:"arp",title:"Arp",inputs:[{id:"clock",name:"CLOCK",dir:"in",kind:"gate"},{id:"root",name:"ROOT (Hz)",dir:"in",kind:"pitch"}],outputs:[{id:"pitch",name:"PITCH (Hz)",dir:"out",kind:"pitch"},{id:"gate",name:"GATE",dir:"out",kind:"gate"}],params:[{id:"rootHz",label:"Root (Hz)",min:40,max:1e3,step:.01,defaultValue:220},{id:"interval",label:"Interval (st)",min:1,max:24,step:1,defaultValue:7},{id:"steps",label:"Steps",min:1,max:8,step:1,defaultValue:4},{id:"pattern",label:"Pattern (0=up 1=down 2=updown)",min:0,max:2,step:1,defaultValue:0},{id:"gateMs",label:"Gate (ms)",min:5,max:400,step:1,defaultValue:120}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new AudioWorkletNode(r,"arp-pitch-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]}),f=new AudioWorkletNode(r,"arp-gate-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]});o.connect(u),o.connect(f);const p=new ConstantSourceNode(r,{offset:i.params.rootHz??220});p.connect(u.parameters.get("rootHz")),c.connect(u.parameters.get("rootHz")),p.start();const h=(x,w)=>{const N=u.parameters.get(x),j=f.parameters.get(x);N&&q(N,w,r,12),j&&q(j,w,r,12)};h("interval",i.params.interval??7),h("steps",i.params.steps??4),h("pattern",i.params.pattern??0);const m=f.parameters.get("gateMs");return m&&(m.value=i.params.gateMs??120),{id:i.id,type:"arp",inputs:{clock:o,root:c},outputs:{pitch:u,gate:f},setParam:(x,w)=>{if(x==="rootHz"){q(p.offset,w,r,12);return}if(x==="gateMs"){const N=f.parameters.get("gateMs");N&&q(N,w,r,12);return}h(x,w)},dispose:()=>{try{p.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect()}}}},offset:{type:"offset",title:"Offset",inputs:[],outputs:[{id:"out",name:"OUT",dir:"out",kind:"cv"}],params:[{id:"value",label:"Value",min:-1,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new ConstantSourceNode(r,{offset:i.params.value??0});return o.start(),{id:i.id,type:"offset",inputs:{},outputs:{out:o},setParam:(u,f)=>{u==="value"&&q(o.offset,V(f,-10,10),r,12)},dispose:()=>{try{o.stop()}catch{}o.disconnect()}}}},attenuverter:{type:"attenuverter",title:"Attenuverter",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"amount",label:"Amount (-1..1)",min:-1,max:1,step:.001,defaultValue:1}],create:(r,i)=>{const o=new GainNode(r,{gain:i.params.amount??1});return{id:i.id,type:"attenuverter",inputs:{in:o},outputs:{out:o},setParam:(u,f)=>{u==="amount"&&q(o.gain,V(f,-4,4),r)},dispose:()=>{o.disconnect()}}}},mixer:{type:"mixer",title:"Mixer",inputs:[{id:"in1",name:"IN 1",dir:"in",kind:"audio"},{id:"in2",name:"IN 2",dir:"in",kind:"audio"},{id:"in3",name:"IN 3",dir:"in",kind:"audio"},{id:"in4",name:"IN 4",dir:"in",kind:"audio"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"level1",label:"Level 1",min:0,max:2,step:.001,defaultValue:1},{id:"level2",label:"Level 2",min:0,max:2,step:.001,defaultValue:1},{id:"level3",label:"Level 3",min:0,max:2,step:.001,defaultValue:1},{id:"level4",label:"Level 4",min:0,max:2,step:.001,defaultValue:1},{id:"master",label:"Master",min:0,max:2,step:.001,defaultValue:1}],create:(r,i)=>{const o=new GainNode(r,{gain:i.params.level1??1}),c=new GainNode(r,{gain:i.params.level2??1}),u=new GainNode(r,{gain:i.params.level3??1}),f=new GainNode(r,{gain:i.params.level4??1}),p=new GainNode(r,{gain:i.params.master??1});return o.connect(p),c.connect(p),u.connect(p),f.connect(p),{id:i.id,type:"mixer",inputs:{in1:o,in2:c,in3:u,in4:f},outputs:{out:p},setParam:(m,y)=>{m==="level1"&&q(o.gain,V(y,0,4),r),m==="level2"&&q(c.gain,V(y,0,4),r),m==="level3"&&q(u.gain,V(y,0,4),r),m==="level4"&&q(f.gain,V(y,0,4),r),m==="master"&&q(p.gain,V(y,0,4),r)},dispose:()=>{o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect()}}}},scope:{type:"scope",title:"Scope",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"thru",label:"Thru (0=tap,1=inline)",min:0,max:1,step:1,defaultValue:1},{id:"view",label:"View (0=time,1=fft)",min:0,max:1,step:1,defaultValue:0},{id:"fftSize",label:"FFT Size",min:32,max:32768,step:1,defaultValue:2048},{id:"smoothing",label:"Smoothing",min:0,max:1,step:.01,defaultValue:.85},{id:"minDb",label:"Min dB",min:-120,max:-10,step:1,defaultValue:-90},{id:"maxDb",label:"Max dB",min:-120,max:0,step:1,defaultValue:-10}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new AnalyserNode(r,{fftSize:Dd(i.params.fftSize??2048),smoothingTimeConstant:V(i.params.smoothing??.85,0,1),minDecibels:V(i.params.minDb??-90,-120,-10),maxDecibels:V(i.params.maxDb??-10,-120,0)}),u=new GainNode(r,{gain:i.params.thru??1});return o.connect(c),c.connect(u),{id:i.id,type:"scope",inputs:{in:o},outputs:{out:u},viz:{analyser:c},setParam:(p,h)=>{p==="thru"&&q(u.gain,h>=.5?1:0,r,10),p!=="view"&&(p==="fftSize"&&(c.fftSize=Dd(h)),p==="smoothing"&&(c.smoothingTimeConstant=V(h,0,1)),p==="minDb"&&(c.minDecibels=V(h,-120,-10)),p==="maxDb"&&(c.maxDecibels=V(h,-120,0)))},dispose:()=>{o.disconnect(),c.disconnect(),u.disconnect()}}}},vcmixer:{type:"vcmixer",title:"VC Mixer",inputs:[{id:"in1",name:"IN 1",dir:"in",kind:"audio"},{id:"cv1",name:"CV 1",dir:"in",kind:"cv"},{id:"in2",name:"IN 2",dir:"in",kind:"audio"},{id:"cv2",name:"CV 2",dir:"in",kind:"cv"},{id:"in3",name:"IN 3",dir:"in",kind:"audio"},{id:"cv3",name:"CV 3",dir:"in",kind:"cv"},{id:"in4",name:"IN 4",dir:"in",kind:"audio"},{id:"cv4",name:"CV 4",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"level1",label:"Level 1",min:0,max:2,step:.001,defaultValue:1},{id:"depth1",label:"CV Depth 1",min:0,max:2,step:.001,defaultValue:0},{id:"level2",label:"Level 2",min:0,max:2,step:.001,defaultValue:1},{id:"depth2",label:"CV Depth 2",min:0,max:2,step:.001,defaultValue:0},{id:"level3",label:"Level 3",min:0,max:2,step:.001,defaultValue:1},{id:"depth3",label:"CV Depth 3",min:0,max:2,step:.001,defaultValue:0},{id:"level4",label:"Level 4",min:0,max:2,step:.001,defaultValue:1},{id:"depth4",label:"CV Depth 4",min:0,max:2,step:.001,defaultValue:0},{id:"master",label:"Master",min:0,max:2,step:.001,defaultValue:1}],create:(r,i)=>{const o=new GainNode(r,{gain:i.params.master??1}),c=[new GainNode(r,{gain:0}),new GainNode(r,{gain:0}),new GainNode(r,{gain:0}),new GainNode(r,{gain:0})],u=[new ConstantSourceNode(r,{offset:i.params.level1??1}),new ConstantSourceNode(r,{offset:i.params.level2??1}),new ConstantSourceNode(r,{offset:i.params.level3??1}),new ConstantSourceNode(r,{offset:i.params.level4??1})],f=[new GainNode(r,{gain:i.params.depth1??0}),new GainNode(r,{gain:i.params.depth2??0}),new GainNode(r,{gain:i.params.depth3??0}),new GainNode(r,{gain:i.params.depth4??0})];for(let h=0;h<4;h+=1)u[h].connect(c[h].gain),f[h].connect(c[h].gain),u[h].start(),c[h].connect(o);return{id:i.id,type:"vcmixer",inputs:{in1:c[0],cv1:f[0],in2:c[1],cv2:f[1],in3:c[2],cv3:f[2],in4:c[3],cv4:f[3]},outputs:{out:o},setParam:(h,m)=>{h==="master"&&q(o.gain,V(m,0,4),r),h==="level1"&&q(u[0].offset,V(m,0,4),r),h==="depth1"&&q(f[0].gain,V(m,0,4),r),h==="level2"&&q(u[1].offset,V(m,0,4),r),h==="depth2"&&q(f[1].gain,V(m,0,4),r),h==="level3"&&q(u[2].offset,V(m,0,4),r),h==="depth3"&&q(f[2].gain,V(m,0,4),r),h==="level4"&&q(u[3].offset,V(m,0,4),r),h==="depth4"&&q(f[3].gain,V(m,0,4),r)},dispose:()=>{for(let h=0;h<4;h+=1){try{u[h].stop()}catch{}u[h].disconnect(),f[h].disconnect(),c[h].disconnect()}o.disconnect()}}}},cvproc:{type:"cvproc",title:"CV Proc",inputs:[{id:"in",name:"IN",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"cv"}],params:[{id:"scale",label:"Scale",min:-4,max:4,step:.001,defaultValue:1},{id:"offset",label:"Offset",min:-1,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:i.params.scale??1}),c=new GainNode(r,{gain:1}),u=new ConstantSourceNode(r,{offset:i.params.offset??0});return u.start(),o.connect(c),u.connect(c),{id:i.id,type:"cvproc",inputs:{in:o},outputs:{out:c},setParam:(p,h)=>{p==="scale"&&q(o.gain,V(h,-8,8),r),p==="offset"&&q(u.offset,V(h,-10,10),r,12)},dispose:()=>{try{u.stop()}catch{}u.disconnect(),o.disconnect(),c.disconnect()}}}},crossfader:{type:"crossfader",title:"Crossfader",inputs:[{id:"a",name:"A",dir:"in",kind:"audio"},{id:"b",name:"B",dir:"in",kind:"audio"},{id:"cv",name:"CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"pos",label:"Pos (0..1)",min:0,max:1,step:.001,defaultValue:.5},{id:"cvDepth",label:"CV Depth",min:0,max:2,step:.001,defaultValue:1}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new GainNode(r,{gain:0}),p=new ConstantSourceNode(r,{offset:i.params.pos??.5});p.start();const h=new GainNode(r,{gain:i.params.cvDepth??1}),m=new GainNode(r,{gain:1});p.connect(m),h.connect(m),m.connect(f.gain);const y=new ConstantSourceNode(r,{offset:1});y.start();const x=new GainNode(r,{gain:-1});m.connect(x),y.connect(u.gain),x.connect(u.gain),o.connect(u),c.connect(f);const w=new GainNode(r,{gain:1});return u.connect(w),f.connect(w),{id:i.id,type:"crossfader",inputs:{a:o,b:c,cv:h},outputs:{out:w},setParam:(j,S)=>{j==="pos"&&q(p.offset,V(S,-4,4),r,12),j==="cvDepth"&&q(h.gain,V(S,0,8),r)},dispose:()=>{try{p.stop(),y.stop()}catch{}p.disconnect(),y.disconnect(),h.disconnect(),m.disconnect(),x.disconnect(),o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),w.disconnect()}}}},slew:{type:"slew",title:"Slew",inputs:[{id:"in",name:"IN",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"cv"}],params:[{id:"rise",label:"Rise (s)",min:0,max:5,step:.001,defaultValue:.05},{id:"fall",label:"Fall (s)",min:0,max:5,step:.001,defaultValue:.05}],create:(r,i)=>{const o=new AudioWorkletNode(r,"slew-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]}),c=i.params.rise??.05,u=i.params.fall??.05;return o.parameters.get("rise").value=c,o.parameters.get("fall").value=u,{id:i.id,type:"slew",inputs:{in:o},outputs:{out:o},setParam:(p,h)=>{const m=o.parameters.get(p);m&&q(m,V(h,0,10),r,20)},dispose:()=>{o.disconnect()}}}},samplehold:{type:"samplehold",title:"S&H",inputs:[{id:"in",name:"IN",dir:"in",kind:"cv"},{id:"clk",name:"CLK",dir:"in",kind:"gate"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"cv"}],params:[{id:"threshold",label:"Thresh",min:-1,max:1,step:.01,defaultValue:.5}],create:(r,i)=>{const o=new AudioWorkletNode(r,"samplehold-processor",{numberOfInputs:2,numberOfOutputs:1,outputChannelCount:[1]});o.parameters.get("threshold").value=i.params.threshold??.5;const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1});return c.connect(o,0,0),u.connect(o,0,1),{id:i.id,type:"samplehold",inputs:{in:c,clk:u},outputs:{out:o},setParam:(p,h)=>{const m=o.parameters.get(p);m&&q(m,V(h,-1,1),r,20)},dispose:()=>{c.disconnect(),u.disconnect(),o.disconnect()}}}},quantizer:{type:"quantizer",title:"Quantizer",inputs:[{id:"in",name:"IN (Hz)",dir:"in",kind:"pitch"}],outputs:[{id:"out",name:"OUT (Hz)",dir:"out",kind:"pitch"}],params:[{id:"enabled",label:"Enabled",min:0,max:1,step:1,defaultValue:1},{id:"root",label:"Root (0=C..11=B)",min:0,max:11,step:1,defaultValue:0},{id:"scale",label:"Scale (0=chr 1=maj 2=min 3=pent 4=blu)",min:0,max:4,step:1,defaultValue:0},{id:"transpose",label:"Transpose (st)",min:-24,max:24,step:1,defaultValue:0}],create:(r,i)=>{const o=new AudioWorkletNode(r,"quantizer-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]}),c=i.params.enabled??1,u=i.params.root??0,f=i.params.scale??0,p=i.params.transpose??0;return o.parameters.get("enabled").value=c,o.parameters.get("root").value=u,o.parameters.get("scale").value=f,o.parameters.get("transpose").value=p,{id:i.id,type:"quantizer",inputs:{in:o},outputs:{out:o},setParam:(m,y)=>{m==="enabled"&&ua(o.parameters.get("enabled"),y>=.5?1:0,r),m==="root"&&ua(o.parameters.get("root"),V(Math.round(y),0,11),r),m==="scale"&&ua(o.parameters.get("scale"),V(Math.round(y),0,4),r),m==="transpose"&&ua(o.parameters.get("transpose"),V(Math.round(y),-48,48),r)},dispose:()=>{o.disconnect()}}}},logic:{type:"logic",title:"Logic",inputs:[{id:"a",name:"A",dir:"in",kind:"gate"},{id:"b",name:"B",dir:"in",kind:"gate"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"gate"}],params:[{id:"mode",label:"Mode (0..7)",min:0,max:7,step:1,defaultValue:0},{id:"threshold",label:"Thresh",min:-1,max:1,step:.01,defaultValue:.5}],create:(r,i)=>{const o=new AudioWorkletNode(r,"logic-processor",{numberOfInputs:2,numberOfOutputs:1,outputChannelCount:[1]});o.parameters.get("mode").value=i.params.mode??0,o.parameters.get("threshold").value=i.params.threshold??.5;const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1});return c.connect(o,0,0),u.connect(o,0,1),{id:i.id,type:"logic",inputs:{a:c,b:u},outputs:{out:o},setParam:(p,h)=>{p==="mode"&&ua(o.parameters.get("mode"),V(Math.round(h),0,7),r),p==="threshold"&&q(o.parameters.get("threshold"),V(h,-1,1),r,20)},dispose:()=>{c.disconnect(),u.disconnect(),o.disconnect()}}}},noise:{type:"noise",title:"Noise",inputs:[],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"type",label:"Type (0=white,1=pink)",min:0,max:1,step:1,defaultValue:0},{id:"level",label:"Level",min:0,max:1,step:.001,defaultValue:.2}],create:(r,i)=>{const o=new AudioWorkletNode(r,"noise-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]});return o.parameters.get("type").value=i.params.type??0,o.parameters.get("level").value=i.params.level??.2,{id:i.id,type:"noise",inputs:{},outputs:{out:o},setParam:(u,f)=>{u==="type"&&ua(o.parameters.get("type"),f>=.5?1:0,r),u==="level"&&q(o.parameters.get("level"),V(f,0,1),r,12)},dispose:()=>{o.disconnect()}}}},delay:{type:"delay",title:"Delay",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"timeCv",name:"TIME CV",dir:"in",kind:"cv"},{id:"fbCv",name:"FB CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"time",label:"Time (s)",min:0,max:2,step:.001,defaultValue:.25},{id:"timeDepth",label:"Time Depth (s)",min:0,max:2,step:.001,defaultValue:0},{id:"feedback",label:"Feedback",min:0,max:.95,step:.001,defaultValue:.35},{id:"fbDepth",label:"FB Depth",min:0,max:.95,step:.001,defaultValue:0},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.3},{id:"mixDepth",label:"Mix Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new DelayNode(r,{maxDelayTime:2,delayTime:0}),p=new GainNode(r,{gain:0}),h=new ConstantSourceNode(r,{offset:i.params.time??.25}),m=new GainNode(r,{gain:i.params.timeDepth??0});h.connect(f.delayTime),m.connect(f.delayTime),h.start();const y=new ConstantSourceNode(r,{offset:i.params.feedback??.35}),x=new GainNode(r,{gain:i.params.fbDepth??0});y.connect(p.gain),x.connect(p.gain),y.start();const w=new ConstantSourceNode(r,{offset:i.params.mix??.3}),N=new GainNode(r,{gain:i.params.mixDepth??0}),j=new GainNode(r,{gain:1});w.connect(j),N.connect(j),w.start();const S=new GainNode(r,{gain:0}),M=new GainNode(r,{gain:0});j.connect(S.gain);const P=new ConstantSourceNode(r,{offset:1}),B=new GainNode(r,{gain:-1});return j.connect(B),P.connect(M.gain),B.connect(M.gain),P.start(),c.connect(M).connect(u),c.connect(f),f.connect(S).connect(u),f.connect(p).connect(f),{id:i.id,type:"delay",inputs:{in:c,timeCv:m,fbCv:x,mixCv:N},outputs:{out:u},setParam:(_,L)=>{_==="time"&&q(h.offset,V(L,0,2),r,20),_==="timeDepth"&&q(m.gain,V(L,0,2),r,20),_==="feedback"&&q(y.offset,V(L,0,.95),r,20),_==="fbDepth"&&q(x.gain,V(L,0,.95),r,20),_==="mix"&&q(w.offset,V(L,-2,2),r,20),_==="mixDepth"&&q(N.gain,V(L,0,4),r,20)},dispose:()=>{try{h.stop(),y.stop(),w.stop(),P.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),j.disconnect(),S.disconnect(),M.disconnect(),P.disconnect(),B.disconnect()}}}},distortion:{type:"distortion",title:"Distortion",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"driveCv",name:"DRIVE CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"drive",label:"Drive",min:0,max:1,step:.001,defaultValue:.4},{id:"driveDepth",label:"Drive Depth",min:0,max:40,step:.01,defaultValue:0},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.7},{id:"mixDepth",label:"Mix Depth",min:0,max:1,step:.001,defaultValue:0},{id:"post",label:"Post",min:0,max:2,step:.001,defaultValue:1},{id:"oversample",label:"Over (0=none 1=2x 2=4x)",min:0,max:2,step:1,defaultValue:2}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new ConstantSourceNode(r,{offset:1}),p=new GainNode(r,{gain:i.params.driveDepth??0});f.connect(u.gain),p.connect(u.gain),f.start();const h=new WaveShaperNode(r,{curve:dl(1),oversample:"4x"}),m=new GainNode(r,{gain:i.params.post??1}),y=new ConstantSourceNode(r,{offset:i.params.mix??.7}),x=new GainNode(r,{gain:i.params.mixDepth??0}),w=new GainNode(r,{gain:1});y.connect(w),x.connect(w),y.start();const N=new GainNode(r,{gain:0}),j=new GainNode(r,{gain:0});w.connect(N.gain);const S=new ConstantSourceNode(r,{offset:1}),M=new GainNode(r,{gain:-1});w.connect(M),S.connect(j.gain),M.connect(j.gain),S.start(),o.connect(j).connect(c),o.connect(u),u.connect(h),h.connect(m),m.connect(N).connect(c);const B=1+(i.params.drive??.4)*40;h.curve=dl(B),f.offset.value=B;const F=Math.round(i.params.oversample??2);return h.oversample=F===0?"none":F===1?"2x":"4x",{id:i.id,type:"distortion",inputs:{in:o,driveCv:p,mixCv:x},outputs:{out:c},setParam:(L,Q)=>{if(L==="drive"){const ue=1+V(Q,0,1)*40;h.curve=dl(ue),q(f.offset,ue,r,20)}if(L==="driveDepth"&&q(p.gain,V(Q,0,80),r,20),L==="mix"&&q(y.offset,V(Q,-2,2),r,20),L==="mixDepth"&&q(x.gain,V(Q,0,4),r,20),L==="post"&&q(m.gain,V(Q,0,4),r,20),L==="oversample"){const Z=V(Math.round(Q),0,2);h.oversample=Z===0?"none":Z===1?"2x":"4x"}},dispose:()=>{try{f.stop(),y.stop(),S.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),h.disconnect(),m.disconnect(),f.disconnect(),p.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),j.disconnect(),S.disconnect(),M.disconnect()}}}},chorus:{type:"chorus",title:"Chorus",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"rateCv",name:"RATE CV",dir:"in",kind:"cv"},{id:"depthCv",name:"DEPTH CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"rate",label:"Rate (Hz)",min:.01,max:10,step:.01,defaultValue:.8},{id:"rateDepthHz",label:"Rate CV Depth (Hz)",min:0,max:20,step:.01,defaultValue:0},{id:"baseDelay",label:"Base (s)",min:0,max:.05,step:1e-4,defaultValue:.02},{id:"depth",label:"Depth (s)",min:0,max:.02,step:1e-4,defaultValue:.005},{id:"depthCvDepth",label:"Depth CV Depth (s)",min:0,max:.02,step:1e-4,defaultValue:0},{id:"feedback",label:"Feedback",min:0,max:.95,step:.001,defaultValue:0},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.5},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new GainNode(r,{gain:0}),p=new GainNode(r,{gain:0}),h=new DelayNode(r,{maxDelayTime:.05,delayTime:0}),m=new GainNode(r,{gain:i.params.feedback??0}),y=new ConstantSourceNode(r,{offset:i.params.baseDelay??.02});y.connect(h.delayTime),y.start();const x=new OscillatorNode(r,{type:"sine",frequency:i.params.rate??.8}),w=new GainNode(r,{gain:i.params.depth??.005});x.connect(w),w.connect(h.delayTime),x.start();const N=new GainNode(r,{gain:i.params.rateDepthHz??0});N.connect(x.frequency);const j=new GainNode(r,{gain:i.params.depthCvDepth??0});j.connect(w.gain);const S=new ConstantSourceNode(r,{offset:i.params.mix??.5}),M=new GainNode(r,{gain:i.params.mixDepth??0}),P=new GainNode(r,{gain:1});S.connect(P),M.connect(P),S.start(),P.connect(p.gain);const B=new ConstantSourceNode(r,{offset:1}),F=new GainNode(r,{gain:-1});return P.connect(F),B.connect(f.gain),F.connect(f.gain),B.start(),c.connect(f).connect(u),c.connect(h),h.connect(p).connect(u),h.connect(m).connect(h),{id:i.id,type:"chorus",inputs:{in:c,rateCv:N,depthCv:j,mixCv:M},outputs:{out:u},setParam:(L,Q)=>{L==="rate"&&q(x.frequency,V(Q,.01,40),r),L==="rateDepthHz"&&q(N.gain,V(Q,0,80),r,20),L==="baseDelay"&&q(y.offset,V(Q,0,.05),r,20),L==="depth"&&q(w.gain,V(Q,0,.05),r,20),L==="depthCvDepth"&&q(j.gain,V(Q,0,.05),r,20),L==="feedback"&&q(m.gain,V(Q,0,.95),r,20),L==="mix"&&q(S.offset,V(Q,-2,2),r,20),L==="mixDepth"&&q(M.gain,V(Q,0,4),r,20)},dispose:()=>{try{y.stop(),S.stop(),B.stop(),x.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),j.disconnect(),S.disconnect(),M.disconnect(),P.disconnect(),B.disconnect(),F.disconnect()}}}},phaser:{type:"phaser",title:"Phaser",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"freqCv",name:"FREQ CV",dir:"in",kind:"cv"},{id:"rateCv",name:"RATE CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"baseFreq",label:"Base (Hz)",min:20,max:4e3,step:1,defaultValue:700},{id:"depthHz",label:"Depth (Hz)",min:0,max:4e3,step:1,defaultValue:600},{id:"freqCvDepthHz",label:"Freq CV Depth (Hz)",min:0,max:8e3,step:1,defaultValue:0},{id:"rate",label:"Rate (Hz)",min:.01,max:10,step:.01,defaultValue:.4},{id:"rateDepthHz",label:"Rate CV Depth (Hz)",min:0,max:20,step:.01,defaultValue:0},{id:"feedback",label:"Feedback",min:0,max:.95,step:.001,defaultValue:.2},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.5},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:0}),f=new GainNode(r,{gain:0}),p=new GainNode(r,{gain:1}),h=[new BiquadFilterNode(r,{type:"allpass",frequency:0,Q:.7}),new BiquadFilterNode(r,{type:"allpass",frequency:0,Q:.7}),new BiquadFilterNode(r,{type:"allpass",frequency:0,Q:.7}),new BiquadFilterNode(r,{type:"allpass",frequency:0,Q:.7})],m=new ConstantSourceNode(r,{offset:i.params.baseFreq??700});m.start();for(const L of h)m.connect(L.frequency);const y=new OscillatorNode(r,{type:"sine",frequency:i.params.rate??.4}),x=new GainNode(r,{gain:i.params.depthHz??600});y.connect(x);for(const L of h)x.connect(L.frequency);y.start();const w=new GainNode(r,{gain:i.params.freqCvDepthHz??0});for(const L of h)w.connect(L.frequency);const N=new GainNode(r,{gain:i.params.rateDepthHz??0});N.connect(y.frequency);const j=new GainNode(r,{gain:i.params.feedback??.2}),S=new ConstantSourceNode(r,{offset:i.params.mix??.5}),M=new GainNode(r,{gain:i.params.mixDepth??0}),P=new GainNode(r,{gain:1});S.connect(P),M.connect(P),S.start(),P.connect(f.gain);const B=new ConstantSourceNode(r,{offset:1}),F=new GainNode(r,{gain:-1});return P.connect(F),B.connect(u.gain),F.connect(u.gain),B.start(),o.connect(u).connect(c),o.connect(p),j.connect(p),p.connect(h[0]),h[0].connect(h[1]),h[1].connect(h[2]),h[2].connect(h[3]),h[3].connect(f).connect(c),h[3].connect(j),{id:i.id,type:"phaser",inputs:{in:o,freqCv:w,rateCv:N,mixCv:M},outputs:{out:c},setParam:(L,Q)=>{L==="baseFreq"&&q(m.offset,V(Q,20,2e4),r,20),L==="depthHz"&&q(x.gain,V(Q,0,2e4),r,20),L==="freqCvDepthHz"&&q(w.gain,V(Q,0,2e4),r,20),L==="rate"&&q(y.frequency,V(Q,.01,40),r),L==="rateDepthHz"&&q(N.gain,V(Q,0,80),r,20),L==="feedback"&&q(j.gain,V(Q,0,.95),r,20),L==="mix"&&q(S.offset,V(Q,-2,2),r,20),L==="mixDepth"&&q(M.gain,V(Q,0,4),r,20)},dispose:()=>{try{m.stop(),S.stop(),B.stop(),y.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),j.disconnect();for(const L of h)L.disconnect();m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),S.disconnect(),M.disconnect(),P.disconnect(),B.disconnect(),F.disconnect()}}}},reverb:{type:"reverb",title:"Reverb",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"preDelay",label:"PreDelay (s)",min:0,max:.2,step:.001,defaultValue:.01},{id:"decay",label:"Decay (s)",min:.05,max:6,step:.05,defaultValue:1.8},{id:"dampHz",label:"Damp (Hz)",min:200,max:2e4,step:1,defaultValue:8e3},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.35},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=P=>{const B=V(P,.05,6),F=Math.max(1,Math.floor(r.sampleRate*B)),_=new AudioBuffer({length:F,numberOfChannels:1,sampleRate:r.sampleRate}),L=_.getChannelData(0);for(let Q=0;Q<F;Q+=1){const Z=Q/(F-1),ue=Math.pow(1-Z,3);L[Q]=(Math.random()*2-1)*ue}return _},c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new GainNode(r,{gain:0}),p=new GainNode(r,{gain:0}),h=new DelayNode(r,{maxDelayTime:.2,delayTime:i.params.preDelay??.01}),m=new ConvolverNode(r,{buffer:o(i.params.decay??1.8)}),y=new BiquadFilterNode(r,{type:"lowpass",frequency:i.params.dampHz??8e3,Q:.707}),x=new ConstantSourceNode(r,{offset:i.params.mix??.35}),w=new GainNode(r,{gain:i.params.mixDepth??0}),N=new GainNode(r,{gain:1});x.connect(N),w.connect(N),x.start(),N.connect(p.gain);const j=new ConstantSourceNode(r,{offset:1}),S=new GainNode(r,{gain:-1});return N.connect(S),j.connect(f.gain),S.connect(f.gain),j.start(),c.connect(f).connect(u),c.connect(h),h.connect(m),m.connect(y),y.connect(p).connect(u),{id:i.id,type:"reverb",inputs:{in:c,mixCv:w},outputs:{out:u},setParam:(P,B)=>{if(P==="preDelay"&&q(h.delayTime,V(B,0,.2),r,20),P==="decay"){const F=V(B,.05,6);m.buffer=o(F)}P==="dampHz"&&q(y.frequency,V(B,20,2e4),r,30),P==="mix"&&q(x.offset,V(B,-2,2),r,20),P==="mixDepth"&&q(w.gain,V(B,0,4),r,20)},dispose:()=>{try{x.stop(),j.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),j.disconnect(),S.disconnect()}}}},bitcrusher:{type:"bitcrusher",title:"Bitcrusher",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"bitDepth",label:"Bits",min:1,max:16,step:1,defaultValue:8},{id:"downsample",label:"Downsample",min:1,max:64,step:1,defaultValue:4},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.7},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:0}),f=new GainNode(r,{gain:0}),p=new AudioWorkletNode(r,"bitcrusher-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]});p.parameters.get("bitDepth").value=i.params.bitDepth??8,p.parameters.get("downsample").value=i.params.downsample??4;const h=new ConstantSourceNode(r,{offset:i.params.mix??.7}),m=new GainNode(r,{gain:i.params.mixDepth??0}),y=new GainNode(r,{gain:1});h.connect(y),m.connect(y),h.start(),y.connect(f.gain);const x=new ConstantSourceNode(r,{offset:1}),w=new GainNode(r,{gain:-1});return y.connect(w),x.connect(u.gain),w.connect(u.gain),x.start(),o.connect(u).connect(c),o.connect(p),p.connect(f).connect(c),{id:i.id,type:"bitcrusher",inputs:{in:o,mixCv:m},outputs:{out:c},setParam:(j,S)=>{if(j==="bitDepth"){const M=V(Math.round(S),1,16);p.parameters.get("bitDepth").value=M}if(j==="downsample"){const M=V(Math.round(S),1,64);p.parameters.get("downsample").value=M}j==="mix"&&q(h.offset,V(S,-2,2),r,20),j==="mixDepth"&&q(m.gain,V(S,0,4),r,20)},dispose:()=>{try{h.stop(),x.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect()}}}},compressor:{type:"compressor",title:"Compressor",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"threshold",label:"Threshold (dB)",min:-100,max:0,step:1,defaultValue:-18},{id:"knee",label:"Knee (dB)",min:0,max:40,step:1,defaultValue:12},{id:"ratio",label:"Ratio",min:1,max:20,step:.1,defaultValue:6},{id:"attack",label:"Attack (s)",min:0,max:1,step:.001,defaultValue:.003},{id:"release",label:"Release (s)",min:0,max:1,step:.001,defaultValue:.15},{id:"makeup",label:"Makeup",min:0,max:4,step:.001,defaultValue:1},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:1},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:0}),f=new GainNode(r,{gain:0}),p=new DynamicsCompressorNode(r,{threshold:i.params.threshold??-18,knee:i.params.knee??12,ratio:i.params.ratio??6,attack:i.params.attack??.003,release:i.params.release??.15}),h=new GainNode(r,{gain:i.params.makeup??1}),m=new ConstantSourceNode(r,{offset:i.params.mix??1}),y=new GainNode(r,{gain:i.params.mixDepth??0}),x=new GainNode(r,{gain:1});m.connect(x),y.connect(x),m.start(),x.connect(f.gain);const w=new ConstantSourceNode(r,{offset:1}),N=new GainNode(r,{gain:-1});return x.connect(N),w.connect(u.gain),N.connect(u.gain),w.start(),o.connect(u).connect(c),o.connect(p),p.connect(h),h.connect(f).connect(c),{id:i.id,type:"compressor",inputs:{in:o,mixCv:y},outputs:{out:c},setParam:(S,M)=>{S==="threshold"&&q(p.threshold,V(M,-100,0),r,30),S==="knee"&&q(p.knee,V(M,0,40),r,30),S==="ratio"&&q(p.ratio,V(M,1,20),r,30),S==="attack"&&q(p.attack,V(M,0,1),r,30),S==="release"&&q(p.release,V(M,0,1),r,30),S==="makeup"&&q(h.gain,V(M,0,10),r,20),S==="mix"&&q(m.offset,V(M,-2,2),r,20),S==="mixDepth"&&q(y.gain,V(M,0,4),r,20)},dispose:()=>{try{m.stop(),w.stop()}catch{}o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect()}}}},flanger:{type:"flanger",title:"Flanger",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"rateCv",name:"RATE CV",dir:"in",kind:"cv"},{id:"depthCv",name:"DEPTH CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"rate",label:"Rate (Hz)",min:.01,max:5,step:.01,defaultValue:.25},{id:"rateDepthHz",label:"Rate CV Depth (Hz)",min:0,max:10,step:.01,defaultValue:0},{id:"baseDelay",label:"Base (s)",min:0,max:.01,step:1e-5,defaultValue:.003},{id:"depth",label:"Depth (s)",min:0,max:.01,step:1e-5,defaultValue:.002},{id:"depthCvDepth",label:"Depth CV Depth (s)",min:0,max:.01,step:1e-5,defaultValue:0},{id:"feedback",label:"Feedback",min:0,max:.95,step:.001,defaultValue:.3},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.5},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new DelayNode(r,{maxDelayTime:.01,delayTime:0}),p=new GainNode(r,{gain:i.params.feedback??.3}),h=new ConstantSourceNode(r,{offset:i.params.baseDelay??.003});h.connect(f.delayTime),h.start();const m=new OscillatorNode(r,{type:"sine",frequency:i.params.rate??.25}),y=new GainNode(r,{gain:i.params.depth??.002});m.connect(y),y.connect(f.delayTime),m.start();const x=new GainNode(r,{gain:i.params.rateDepthHz??0});x.connect(m.frequency);const w=new GainNode(r,{gain:i.params.depthCvDepth??0});w.connect(y.gain);const N=ui(r,i.params.mix??.5,i.params.mixDepth??0);return c.connect(N.dry).connect(u),c.connect(f),f.connect(N.wet).connect(u),f.connect(p).connect(f),{id:i.id,type:"flanger",inputs:{in:c,rateCv:x,depthCv:w,mixCv:N.mixCvIn},outputs:{out:u},setParam:(S,M)=>{S==="rate"&&q(m.frequency,V(M,.01,20),r),S==="rateDepthHz"&&q(x.gain,V(M,0,80),r,20),S==="baseDelay"&&q(h.offset,V(M,0,.01),r,20),S==="depth"&&q(y.gain,V(M,0,.01),r,20),S==="depthCvDepth"&&q(w.gain,V(M,0,.01),r,20),S==="feedback"&&q(p.gain,V(M,0,.95),r,20),S==="mix"&&N.setMix(M),S==="mixDepth"&&N.setDepth(M)},dispose:()=>{try{h.stop(),m.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),m.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.dispose()}}}},stereochorus:{type:"stereochorus",title:"Stereo Chorus",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"rateCv",name:"RATE CV",dir:"in",kind:"cv"},{id:"depthCv",name:"DEPTH CV",dir:"in",kind:"cv"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"rate",label:"Rate (Hz)",min:.01,max:5,step:.01,defaultValue:.8},{id:"rateDepthHz",label:"Rate CV Depth (Hz)",min:0,max:10,step:.01,defaultValue:0},{id:"baseDelay",label:"Base (s)",min:0,max:.05,step:1e-4,defaultValue:.02},{id:"depth",label:"Depth (s)",min:0,max:.02,step:1e-4,defaultValue:.006},{id:"depthCvDepth",label:"Depth CV Depth (s)",min:0,max:.02,step:1e-4,defaultValue:0},{id:"width",label:"Width",min:0,max:1,step:.001,defaultValue:1},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.5},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const c=new GainNode(r,{gain:1}),u=new GainNode(r,{gain:1}),f=new DelayNode(r,{maxDelayTime:.05,delayTime:0}),p=new DelayNode(r,{maxDelayTime:.05,delayTime:0}),h=new ConstantSourceNode(r,{offset:i.params.baseDelay??.02});h.connect(f.delayTime),h.connect(p.delayTime),h.start();const m=i.params.rate??.8,y=new OscillatorNode(r,{type:"sine",frequency:m}),x=new OscillatorNode(r,{type:"sine",frequency:m}),w=new DelayNode(r,{maxDelayTime:.5,delayTime:.25/m}),N=new GainNode(r,{gain:i.params.depth??.006});y.connect(N),N.connect(f.delayTime),x.connect(w),w.connect(N),N.connect(p.delayTime),y.start(),x.start();const j=new GainNode(r,{gain:i.params.rateDepthHz??0});j.connect(y.frequency),j.connect(x.frequency);const S=new GainNode(r,{gain:i.params.depthCvDepth??0});S.connect(N.gain);const M=new GainNode(r,{gain:i.params.width??1}),P=new StereoPannerNode(r,{pan:-1}),B=new StereoPannerNode(r,{pan:1}),F=ui(r,i.params.mix??.5,i.params.mixDepth??0);return c.connect(F.dry).connect(u),c.connect(f),c.connect(p),f.connect(M).connect(P).connect(F.wet),p.connect(M).connect(B).connect(F.wet),F.wet.connect(u),{id:i.id,type:"stereochorus",inputs:{in:c,rateCv:j,depthCv:S,mixCv:F.mixCvIn},outputs:{out:u},setParam:(L,Q)=>{if(L==="rate"){const Z=V(Q,.01,20);q(y.frequency,Z,r),q(x.frequency,Z,r),q(w.delayTime,.25/Z,r,30)}L==="rateDepthHz"&&q(j.gain,V(Q,0,80),r,20),L==="baseDelay"&&q(h.offset,V(Q,0,.05),r,20),L==="depth"&&q(N.gain,V(Q,0,.05),r,20),L==="depthCvDepth"&&q(S.gain,V(Q,0,.05),r,20),L==="width"&&q(M.gain,V(Q,0,2),r,20),L==="mix"&&F.setMix(Q),L==="mixDepth"&&F.setDepth(Q)},dispose:()=>{try{h.stop(),y.stop(),x.stop()}catch{}c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.disconnect(),y.disconnect(),x.disconnect(),w.disconnect(),N.disconnect(),j.disconnect(),S.disconnect(),M.disconnect(),P.disconnect(),B.disconnect(),F.dispose()}}}},eq3:{type:"eq3",title:"EQ 3",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"lowGain",label:"Low Gain (dB)",min:-24,max:24,step:.1,defaultValue:0},{id:"lowFreq",label:"Low Freq (Hz)",min:20,max:800,step:1,defaultValue:150},{id:"midGain",label:"Mid Gain (dB)",min:-24,max:24,step:.1,defaultValue:0},{id:"midFreq",label:"Mid Freq (Hz)",min:100,max:8e3,step:1,defaultValue:1e3},{id:"midQ",label:"Mid Q",min:.1,max:18,step:.01,defaultValue:1},{id:"highGain",label:"High Gain (dB)",min:-24,max:24,step:.1,defaultValue:0},{id:"highFreq",label:"High Freq (Hz)",min:1e3,max:2e4,step:1,defaultValue:6e3}],create:(r,i)=>{const o=new BiquadFilterNode(r,{type:"lowshelf",frequency:i.params.lowFreq??150,gain:i.params.lowGain??0}),c=new BiquadFilterNode(r,{type:"peaking",frequency:i.params.midFreq??1e3,Q:i.params.midQ??1,gain:i.params.midGain??0}),u=new BiquadFilterNode(r,{type:"highshelf",frequency:i.params.highFreq??6e3,gain:i.params.highGain??0});return o.connect(c),c.connect(u),{id:i.id,type:"eq3",inputs:{in:o},outputs:{out:u},setParam:(p,h)=>{p==="lowGain"&&q(o.gain,V(h,-60,60),r,30),p==="lowFreq"&&q(o.frequency,V(h,20,2e4),r,30),p==="midGain"&&q(c.gain,V(h,-60,60),r,30),p==="midFreq"&&q(c.frequency,V(h,20,2e4),r,30),p==="midQ"&&q(c.Q,V(h,.1,40),r,30),p==="highGain"&&q(u.gain,V(h,-60,60),r,30),p==="highFreq"&&q(u.frequency,V(h,20,2e4),r,30)},dispose:()=>{o.disconnect(),c.disconnect(),u.disconnect()}}}},wavefolder:{type:"wavefolder",title:"Wavefolder",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"drive",label:"Drive",min:0,max:10,step:.001,defaultValue:1.5},{id:"folds",label:"Folds",min:0,max:10,step:.001,defaultValue:1.5},{id:"dcBlock",label:"DC Block",min:0,max:1,step:1,defaultValue:1},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:1},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new AudioWorkletNode(r,"wavefolder-processor",{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[1]});u.parameters.get("drive").value=i.params.drive??1.5,u.parameters.get("folds").value=i.params.folds??1.5,u.parameters.get("dcBlock").value=(i.params.dcBlock??1)>=.5?1:0;const f=ui(r,i.params.mix??1,i.params.mixDepth??0);return o.connect(f.dry).connect(c),o.connect(u),u.connect(f.wet).connect(c),{id:i.id,type:"wavefolder",inputs:{in:o,mixCv:f.mixCvIn},outputs:{out:c},setParam:(h,m)=>{h==="drive"&&q(u.parameters.get("drive"),V(m,0,10),r,20),h==="folds"&&q(u.parameters.get("folds"),V(m,0,10),r,20),h==="dcBlock"&&(u.parameters.get("dcBlock").value=m>=.5?1:0),h==="mix"&&f.setMix(m),h==="mixDepth"&&f.setDepth(m)},dispose:()=>{o.disconnect(),c.disconnect(),u.disconnect(),f.dispose()}}}},irverb:{type:"irverb",title:"IR Verb",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"},{id:"mixCv",name:"MIX CV",dir:"in",kind:"cv"}],outputs:[{id:"out",name:"OUT",dir:"out",kind:"audio"}],params:[{id:"preset",label:"Preset (0..3)",min:0,max:3,step:1,defaultValue:1},{id:"decay",label:"Decay (s)",min:.05,max:8,step:.05,defaultValue:2.2},{id:"preDelay",label:"PreDelay (s)",min:0,max:.2,step:.001,defaultValue:.01},{id:"dampHz",label:"Damp (Hz)",min:200,max:2e4,step:1,defaultValue:8e3},{id:"mix",label:"Mix (0..1)",min:0,max:1,step:.001,defaultValue:.35},{id:"mixDepth",label:"Mix CV Depth",min:0,max:1,step:.001,defaultValue:0}],create:(r,i)=>{const o=new GainNode(r,{gain:1}),c=new GainNode(r,{gain:1}),u=new DelayNode(r,{maxDelayTime:.2,delayTime:i.params.preDelay??.01}),f=new ConvolverNode(r,{buffer:fl(r,i.params.preset??1,i.params.decay??2.2)}),p=new BiquadFilterNode(r,{type:"lowpass",frequency:i.params.dampHz??8e3,Q:.707}),h=ui(r,i.params.mix??.35,i.params.mixDepth??0);o.connect(h.dry).connect(c),o.connect(u),u.connect(f),f.connect(p),p.connect(h.wet).connect(c);let m=i.params.preset??1,y=i.params.decay??2.2;return{id:i.id,type:"irverb",inputs:{in:o,mixCv:h.mixCvIn},outputs:{out:c},setParam:(w,N)=>{w==="preDelay"&&q(u.delayTime,V(N,0,.2),r,20),w==="dampHz"&&q(p.frequency,V(N,20,2e4),r,30),w==="preset"&&(m=V(Math.round(N),0,3),f.buffer=fl(r,m,y)),w==="decay"&&(y=V(N,.05,8),f.buffer=fl(r,m,y)),w==="mix"&&h.setMix(N),w==="mixDepth"&&h.setDepth(N)},dispose:()=>{o.disconnect(),c.disconnect(),u.disconnect(),f.disconnect(),p.disconnect(),h.dispose()}}}},clock:{type:"clock",title:"Clock",inputs:[],outputs:[{id:"out",name:"OUT",dir:"out",kind:"gate"}],params:[{id:"bpm",label:"BPM",min:1,max:400,step:.1,defaultValue:120},{id:"ppq",label:"PPQ",min:1,max:96,step:1,defaultValue:4},{id:"duty",label:"Duty",min:.01,max:.9,step:.01,defaultValue:.1}],create:(r,i)=>{const o=new AudioWorkletNode(r,"clock-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[1]});return o.parameters.get("bpm").value=i.params.bpm??120,o.parameters.get("ppq").value=i.params.ppq??4,o.parameters.get("duty").value=i.params.duty??.1,{id:i.id,type:"clock",inputs:{},outputs:{out:o},setParam:(u,f)=>{const p=o.parameters.get(u);p&&q(p,f,r,40)},dispose:()=>o.disconnect()}}},output:{type:"output",title:"Output",inputs:[{id:"in",name:"IN",dir:"in",kind:"audio"}],outputs:[],params:[{id:"vol",label:"Volume",min:0,max:1.5,step:.001,defaultValue:.7}],create:(r,i)=>{const o=new GainNode(r,{gain:i.params.vol??.7}),c=new DynamicsCompressorNode(r,{threshold:-12,knee:12,ratio:12,attack:.003,release:.15});return o.connect(c).connect(r.destination),{id:i.id,type:"output",inputs:{in:o},outputs:{},setParam:(f,p)=>{f==="vol"&&q(o.gain,V(p,0,2),r)},dispose:()=>{o.disconnect(),c.disconnect()}}}}};class _0{constructor(i){this.instances=new Map,this.cables=new Map,this.connected=new Map,this.ctx=i}get audioContext(){return this.ctx}getAnalyser(i){return this.instances.get(i)?.viz?.analyser??null}upsertModule(i){let o=this.instances.get(i.id);o||(o=Ar[i.type].create(this.ctx,i),this.instances.set(i.id,o));const c=Object.entries(i.params);if(o.type==="keyboard"){for(const[u,f]of c)u!=="gate"&&o.setParam(u,f);Object.prototype.hasOwnProperty.call(i.params,"gate")&&o.setParam("gate",i.params.gate);return}for(const[u,f]of c)o.setParam(u,f)}removeModule(i){for(const[c,u]of this.cables.entries())(u.from.moduleId===i||u.to.moduleId===i)&&this.disconnectCable(c);const o=this.instances.get(i);o&&(o.dispose(),this.instances.delete(i))}setModules(i){const o=new Set(i.map(c=>c.id));for(const c of[...this.instances.keys()])o.has(c)||this.removeModule(c);for(const c of i)this.upsertModule(c)}setCables(i){const o=new Map(i.map(c=>[c.id,c]));for(const c of[...this.cables.keys()])o.has(c)||this.disconnectCable(c);for(const c of i)this.cables.has(c.id)||this.connectCable(c);this.cables=o}connectCable(i){const o=this.instances.get(i.from.moduleId),c=this.instances.get(i.to.moduleId);if(!o||!c)return;const u=o.outputs[i.from.portId],f=c.inputs[i.to.portId];if(!(!u||!f))try{u.connect(f),this.connected.set(i.id,{fromNode:u,toTarget:f}),this.cables.set(i.id,i)}catch{}}disconnectCable(i){const o=this.connected.get(i);if(o){try{o.fromNode.disconnect(o.toTarget)}catch{}this.connected.delete(i)}this.cables.delete(i)}dispose(){for(const i of[...this.cables.keys()])this.disconnectCable(i);for(const i of[...this.instances.keys()])this.removeModule(i)}}async function O0(r){await r.audioWorklet.addModule("/worklets/gate.worklet.js"),await r.audioWorklet.addModule("/worklets/clock.worklet.js"),await r.audioWorklet.addModule("/worklets/adsr.worklet.js"),await r.audioWorklet.addModule("/worklets/arp.worklet.js"),await r.audioWorklet.addModule("/worklets/slew.worklet.js"),await r.audioWorklet.addModule("/worklets/samplehold.worklet.js"),await r.audioWorklet.addModule("/worklets/quantizer.worklet.js"),await r.audioWorklet.addModule("/worklets/logic.worklet.js"),await r.audioWorklet.addModule("/worklets/noise.worklet.js"),await r.audioWorklet.addModule("/worklets/bitcrusher.worklet.js"),await r.audioWorklet.addModule("/worklets/wavefolder.worklet.js")}const V0={a:60,w:61,s:62,e:63,d:64,f:65,t:66,g:67,y:68,h:69,u:70,j:71,k:72},F0=new Set(["baseHz","cutoff","attack","decay","release","rate","bpm","vol","level","depth","q"]),pl=1600,hl=1200,B0=.7,Nl={keyboard:"Keyboard pitch + gate source from your computer keys.",osc:"Primary sound source with wave selection and FM input.",filter:"Lowpass filter with CV cutoff modulation.",vca:"Amplitude control driven by CV (envelopes).",adsr:"Envelope generator from gate signal.",lfo:"Low-frequency mod source for CV.",arp:"Clocked arpeggiator. Patch a root pitch input to follow the keyboard.",clock:"Pulse clock for sync and sequencing.",output:"Master output with light limiting.",offset:"DC offset/bias source (constant CV).",attenuverter:"Scale/invert signals (-1..1). Works for audio or CV.",mixer:"4-channel audio mixer with per-channel levels + master.",scope:"Oscilloscope/spectrum visualizer. Thru=1 inline, Thru=0 tap-only.",vcmixer:"4-channel mixer with per-channel CV control of gain.",cvproc:"Scale and offset a signal (audio or CV).",crossfader:"Blend A/B with manual position and CV.",slew:"Slew limiter (lag processor) for CV/audio. AudioWorklet.",samplehold:"Sample input on rising clock edge and hold. AudioWorklet.",quantizer:"Quantize pitch (Hz) to a scale. Root/scale/transpose.",logic:"Gate logic (AND/OR/XOR/NAND/NOR/XNOR/NOT). Two inputs.",noise:"Noise source (white/pink).",delay:"Delay with feedback and CV-able time/feedback/mix.",distortion:"Waveshaper distortion with CV drive and wet/dry mix.",chorus:"Chorus (modulated delay) with CV-able rate/depth/mix.",phaser:"Phaser (all-pass chain) with CV-able freq/rate/mix and feedback.",reverb:"Convolution reverb (generated IR) with predelay, damping, and mix CV.",bitcrusher:"Bitcrusher (AudioWorklet) with bits/downsample and mix CV.",compressor:"Compressor with makeup gain and mix CV (parallel capable).",flanger:"Flanger (short modulated delay) with CV-able rate/depth/mix and feedback.",stereochorus:"Stereo chorus widening with rate/depth/width and mix CV.",eq3:"3-band EQ (low shelf, mid peak, high shelf).",wavefolder:"Wavefolder (AudioWorklet) with drive/folds and mix CV.",irverb:"Convolver reverb with generated IR presets, predelay, damping, and mix CV."},Td="synthUserPresets",zd=[{id:"acid-arp-bass",label:"Acid Arp Bass",modules:[{id:"clk1",type:"clock",x:20,y:520,width:220,collapsed:!0,params:{}},{id:"arp1",type:"arp",x:320,y:520,width:220,collapsed:!0,params:{}},{id:"quant1",type:"quantizer",x:620,y:520,width:220,collapsed:!0,params:{}},{id:"log1",type:"logic",x:920,y:520,width:220,collapsed:!0,params:{}},{id:"dist1",type:"distortion",x:20,y:820,width:220,collapsed:!0,params:{}},{id:"delay1",type:"delay",x:320,y:820,width:220,collapsed:!0,params:{}},{id:"comp1",type:"compressor",x:620,y:820,width:220,collapsed:!0,params:{}},{id:"scp1",type:"scope",x:920,y:120,width:240,collapsed:!0,params:{thru:0,view:0,fftSize:2048,smoothing:.85,minDb:-90,maxDb:-10}}],params:{osc1:{wave:1,level:.2,fmDepthHz:0,baseHz:0},flt1:{cutoff:520,cutoffDepthHz:1400,q:9},env1:{attack:.004,decay:.12,sustain:.04,release:.1},vca1:{bias:0,cvDepth:1},clk1:{bpm:140,ppq:4,duty:.12},arp1:{rootHz:0,interval:7,steps:3,pattern:2,gateMs:90},log1:{mode:0,threshold:.5},quant1:{enabled:1,root:0,scale:2,transpose:-24},dist1:{drive:.75,mix:.85,post:1.1},delay1:{time:.12,feedback:.3,mix:.28},comp1:{threshold:-22,ratio:6,makeup:1.2,mix:1},lfo1:{rate:.25,depth:.28,wave:0},kbd1:{gate:0}},cables:[{id:"p1-1",from:{moduleId:"kbd1",portId:"pitch"},to:{moduleId:"arp1",portId:"root"}},{id:"p1-2",from:{moduleId:"clk1",portId:"out"},to:{moduleId:"log1",portId:"a"}},{id:"p1-3",from:{moduleId:"kbd1",portId:"gate"},to:{moduleId:"log1",portId:"b"}},{id:"p1-4",from:{moduleId:"log1",portId:"out"},to:{moduleId:"arp1",portId:"clock"}},{id:"p1-5",from:{moduleId:"arp1",portId:"pitch"},to:{moduleId:"quant1",portId:"in"}},{id:"p1-6",from:{moduleId:"quant1",portId:"out"},to:{moduleId:"osc1",portId:"pitch"}},{id:"p1-7",from:{moduleId:"arp1",portId:"gate"},to:{moduleId:"env1",portId:"gate"}},{id:"p1-8",from:{moduleId:"env1",portId:"env"},to:{moduleId:"vca1",portId:"cv"}},{id:"p1-9",from:{moduleId:"env1",portId:"env"},to:{moduleId:"flt1",portId:"cutoffCv"}},{id:"p1-10",from:{moduleId:"osc1",portId:"out"},to:{moduleId:"flt1",portId:"in"}},{id:"p1-11",from:{moduleId:"flt1",portId:"out"},to:{moduleId:"vca1",portId:"in"}},{id:"p1-12",from:{moduleId:"vca1",portId:"out"},to:{moduleId:"dist1",portId:"in"}},{id:"p1-13",from:{moduleId:"dist1",portId:"out"},to:{moduleId:"delay1",portId:"in"}},{id:"p1-14",from:{moduleId:"delay1",portId:"out"},to:{moduleId:"comp1",portId:"in"}},{id:"p1-15",from:{moduleId:"comp1",portId:"out"},to:{moduleId:"out1",portId:"in"}},{id:"p1-16",from:{moduleId:"lfo1",portId:"out"},to:{moduleId:"flt1",portId:"cutoffCv"}},{id:"p1-17",from:{moduleId:"comp1",portId:"out"},to:{moduleId:"scp1",portId:"in"}}]}];function da(){const r=globalThis.crypto;return typeof r?.randomUUID=="function"?r.randomUUID():Math.random().toString(16).slice(2)}function U0(r){return 440*Math.pow(2,(r-69)/12)}function H0(r,i){if(!Number.isFinite(i)||i<=0)return r;const o=1/i;return Math.round(r*o)/o}function ml(r){const i={};for(const o of r){const c=o.id.match(/^([a-z]+)(\d+)$/i);if(!c)continue;const u=c[1],f=Number(c[2]);Number.isFinite(f)&&(i[u]=Math.max(i[u]??0,f))}return i}function Ad(r,i){const o=new Set;for(const u of i){if(u.type!==r)continue;const f=u.id.match(/^[a-z]+(\d+)$/i);if(!f)continue;const p=Number(f[1]);Number.isFinite(p)&&o.add(p)}let c=1;for(;o.has(c);)c+=1;return c}function gl(r){return r.map(i=>{const o=Ar[i.type],c={};return o.params.forEach(u=>{c[u.id]=u.defaultValue}),{...i,width:i.width??220,collapsed:i.collapsed??!0,params:{...c,...i.params}}})}function xf({embedded:r}){const i=v.useRef(null),o=v.useRef(null),c=v.useRef(null),u=v.useRef(null),f=v.useRef(new Map),p=v.useRef(new Map),[h,m]=v.useState({kind:"none"}),[y,x]=v.useState(null),[w,N]=v.useState(null),[j,S]=v.useState(0),[M,P]=v.useState(1),[B,F]=v.useState(0),[_,L]=v.useState(null),[Q,Z]=v.useState({}),[ue,Me]=v.useState(!1),Re=v.useRef(null),he=v.useRef(null),ie=v.useRef(null),[le,de]=v.useState({x:0,y:0,visible:!1}),Ne=v.useRef(!1),Ve=v.useRef(null),ve=v.useRef(null),[xe,K]=v.useState(()=>Od()),[ce,ae]=v.useState(()=>Vd()),[E,H]=v.useState(()=>{if(typeof window>"u")return[];try{const k=window.localStorage.getItem(Td);if(!k)return[];const I=JSON.parse(k);return Array.isArray(I)?I.filter(U=>U&&Array.isArray(U.modules)&&Array.isArray(U.cables)):[]}catch{return[]}}),[je,Ce]=v.useState(null),[Ae,_e]=v.useState(!1),[ee,me]=v.useState(()=>{if(typeof window>"u")return"dark";const k=window.localStorage.getItem("synthTheme");return k==="light"||k==="dark"?k:window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}),se=v.useRef(null),fe=v.useRef(null),T=(k,I)=>`${k}:${I}`,O=k=>`${k}`,W=M*B0,oe=(k,I)=>{const U=u.current;if(!U)return{x:k,y:I};const J=U.getBoundingClientRect();return{x:(k-J.left)/W,y:(I-J.top)/W}},Fe=(k,I)=>{const U=f.current.get(T(k,I)),J=u.current;if(!U||!J)return null;const ne=U.getBoundingClientRect(),Se=J.getBoundingClientRect();return{x:(ne.left-Se.left+ne.width/2)/W,y:(ne.top-Se.top+ne.height/2)/W}},Ze=async()=>{if(fe.current&&se.current)return;const k=new AudioContext;await k.resume(),await O0(k);const I=new _0(k);I.setModules(xe),I.setCables(ce),se.current=k,fe.current=I};v.useEffect(()=>{const k=fe.current;k&&k.setModules(xe)},[xe]),v.useEffect(()=>{const k=fe.current;k&&k.setCables(ce)},[ce]);const Le=k=>{K(I=>{let U=null;const J=I.map(ne=>ne.id!=="kbd1"?ne:(U={...ne,params:{...ne.params,...k}},U));return U&&fe.current&&fe.current.upsertModule(U),J})};v.useEffect(()=>{if(!Ae)return;const k=new Set,I=J=>{if(J.repeat)return;const ne=J.key.toLowerCase();if(ne==="z"){F(He=>Math.max(-3,He-1));return}if(ne==="x"){F(He=>Math.min(3,He+1));return}const Se=V0[ne];if(Se===void 0)return;k.add(ne);const Ye=U0(Se+B*12);Le({pitchHz:Ye,pitch3Hz:Ye,pitch5Hz:Ye,gate:1})},U=J=>{const ne=J.key.toLowerCase();k.has(ne)&&(k.delete(ne),k.size===0&&Le({gate:0}))};return window.addEventListener("keydown",I),window.addEventListener("keyup",U),()=>{window.removeEventListener("keydown",I),window.removeEventListener("keyup",U)}},[Ae,B]),v.useEffect(()=>{const k=()=>S(I=>I+1);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),v.useEffect(()=>{const k=window.requestAnimationFrame(()=>S(I=>I+1));return()=>window.cancelAnimationFrame(k)},[]),v.useEffect(()=>{window.localStorage.setItem("synthTheme",ee)},[ee]),v.useEffect(()=>{window.localStorage.setItem(Td,JSON.stringify(E))},[E]),v.useEffect(()=>{const k=I=>{I.key==="Escape"&&x(null)};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[]),v.useEffect(()=>{const k=()=>{Me(document.fullscreenElement!==null)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]),v.useEffect(()=>{Ne.current&&(Ne.current=!1,requestAnimationFrame(()=>{tn()}))},[M]),v.useEffect(()=>{Ct()},[]);const qe=k=>{const I=zd.find(ne=>ne.id===k);if(I){K(ne=>{const Se=[...ne],Ye=new Set(Se.map(ct=>ct.id));if(I.modules)for(const ct of I.modules){if(Ye.has(ct.id))continue;const Mt=Ar[ct.type],rt={};Mt.params.forEach(De=>{rt[De.id]=De.defaultValue}),Se.push({...ct,params:{...rt,...ct.params}}),Ye.add(ct.id)}const He=Se.map(ct=>{const Mt=I.params[ct.id];return Mt?{...ct,params:{...ct.params,...Mt}}:ct});return Z(ml(He)),He}),I.cables&&ae(I.cables.map(ne=>({...ne,id:da()}))),L(k),x(null),N(null),Ct({full:!0});return}const U=E.find(ne=>ne.id===k);if(!U)return;const J=gl(U.modules);K(J),ae(U.cables.map(ne=>({...ne,id:da()}))),Z(ml(J)),L(k),x(null),N(null),Ct({full:!0})},Oe=k=>{Ce(k),ie.current&&window.clearTimeout(ie.current),ie.current=window.setTimeout(()=>{Ce(null)},2200)},We=k=>{const I=gl(xe.map(J=>({...J,params:{...J.params}}))),U=ce.map(J=>({...J}));return{id:da(),label:k,modules:I,cables:U,createdAt:Date.now()}},it=()=>{const k=E.find(I=>I.id===_)??We("Current Patch");return JSON.stringify(k,null,2)},Bt=()=>{const k=it();navigator.clipboard.writeText(k).then(()=>Oe("Preset JSON copied."),()=>Oe("Copy failed."))},Rt=()=>{const k=window.prompt("Preset name?","My Preset");if(!k)return;const I=We(k.trim()||"My Preset");H(U=>[...U,I]),L(I.id),Oe("Preset saved.")},nt=()=>{const k=E.find(U=>U.id===_);if(!k)return;const I={...k,id:da(),label:`${k.label} Copy`,createdAt:Date.now()};H(U=>[...U,I]),L(I.id),Oe("Preset duplicated.")},G=()=>{const k=E.find(U=>U.id===_);if(!k)return;const I=window.prompt("Rename preset",k.label);I&&(H(U=>U.map(J=>J.id===k.id?{...J,label:I.trim()||J.label}:J)),Oe("Preset renamed."))},Je=()=>{const k=E.find(I=>I.id===_);k&&window.confirm(`Delete preset "${k.label}"?`)&&(H(I=>I.filter(U=>U.id!==k.id)),L(null),Oe("Preset deleted."))},et=()=>{const k=E.find(Se=>Se.id===_)??We("Current Patch"),I=JSON.stringify(k,null,2),U=new Blob([I],{type:"application/json"}),J=URL.createObjectURL(U),ne=document.createElement("a");ne.href=J,ne.download=`${k.label.replace(/[^a-z0-9_-]+/gi,"_").toLowerCase()||"preset"}.json`,document.body.appendChild(ne),ne.click(),ne.remove(),URL.revokeObjectURL(J),Oe("Preset exported.")},Te=()=>{ve.current?.click()},Be=k=>{const I=k.target.files?.[0];if(!I)return;const U=new FileReader;U.onload=()=>{try{const J=U.result;if(typeof J!="string")return;const ne=JSON.parse(J),Se=Array.isArray(ne)?ne:[ne],Ye=[];for(const He of Se){if(!He||!Array.isArray(He.modules)||!Array.isArray(He.cables))continue;const ct=typeof He.label=="string"?He.label:"Imported Preset";Ye.push({id:da(),label:ct,modules:gl(He.modules),cables:He.cables.map(Mt=>({...Mt})),createdAt:Date.now()})}Ye.length&&(H(He=>[...He,...Ye]),L(Ye[Ye.length-1].id),Oe("Preset imported."))}catch{Oe("Preset import failed.")}finally{k.target.value=""}},U.readAsText(I)};v.useEffect(()=>{S(k=>k+1)},[W]);const vt=async()=>{await Ze(),_e(!0)},qt=k=>{if(!u.current)return;const U=new Map;for(const rt of xe){const De=p.current.get(O(rt.id));if(!De)continue;const at=De.getBoundingClientRect();U.set(rt.id,{w:at.width/W,h:at.height/W})}const J=16;if(k?.full){const rt=[],De=new Map,at=[...xe].sort((st,It)=>st.y===It.y?st.x-It.x:st.y-It.y);for(const st of at){const It=U.get(st.id);if(!It)continue;let tt=st.x,nn=st.y,dn=!0;for(;dn;){dn=!1;for(const Pn of rt){const Vr=tt<Pn.x+Pn.w+J&&tt+It.w+J>Pn.x,wi=nn<Pn.y+Pn.h+J&&nn+It.h+J>Pn.y;Vr&&wi&&(nn=Pn.y+Pn.h+J,dn=!0)}}rt.push({id:st.id,x:tt,y:nn,w:It.w,h:It.h}),De.set(st.id,{x:tt,y:nn})}K(st=>{let It=!1;const tt=st.map(nn=>{const dn=De.get(nn.id);return dn&&(dn.x!==nn.x||dn.y!==nn.y)?(It=!0,{...nn,x:dn.x,y:dn.y}):nn});return It?tt:st});return}const ne=k?.anchorId;if(!ne)return;const Se=xe.find(rt=>rt.id===ne);if(!Se)return;const Ye=U.get(ne);if(!Ye)return;let He=Se.x,ct=Se.y,Mt=!0;for(;Mt;){Mt=!1;for(const rt of xe){if(rt.id===ne)continue;const De=U.get(rt.id);if(!De)continue;const at=He<rt.x+De.w+J&&He+Ye.w+J>rt.x,st=ct<rt.y+De.h+J&&ct+Ye.h+J>rt.y;at&&st&&(ct=rt.y+De.h+J,Mt=!0)}}He===Se.x&&ct===Se.y||K(rt=>rt.map(De=>De.id===ne?{...De,x:He,y:ct}:De))},Ct=k=>{Re.current||(he.current={anchorId:k?.anchorId??null,full:k?.full??!1},Re.current=window.requestAnimationFrame(()=>{Re.current=null;const I=he.current;he.current=null,qt(I??void 0)}))},Kt=k=>{if(h.kind==="none")return;const I=oe(k.clientX,k.clientY);if(h.kind==="move")K(U=>U.map(J=>J.id===h.moduleId?{...J,x:I.x-h.dx,y:I.y-h.dy}:J));else if(h.kind==="cable")m({...h,x:I.x,y:I.y});else if(h.kind==="resize"){const U=I.x-h.startX,J=Math.min(360,Math.max(180,h.startWidth+U));K(ne=>ne.map(Se=>Se.id===h.moduleId?{...Se,width:J}:Se))}else if(h.kind==="pan"){const U=o.current;if(!U)return;const J=I.x-h.startX,ne=I.y-h.startY;U.scrollLeft=h.scrollLeft-J*W,U.scrollTop=h.scrollTop-ne*W}},ot=()=>{const k=h.kind;m({kind:"none"}),(k==="move"||k==="resize")&&(k==="move"&&Ct({anchorId:h.moduleId}),k==="resize"&&Ct({anchorId:h.moduleId}))},mt=k=>{if(!(document.fullscreenElement!==null))return;k.stopPropagation();const U=k.target;if(U.closest(".synth-module")||U.closest(".synth-toolbar-panel"))return;k.preventDefault();const J=o.current?.getBoundingClientRect(),ne=J?k.clientX-J.left:k.clientX,Se=J?k.clientY-J.top:k.clientY;de({x:ne,y:Se,visible:!0})},Tt=(k,I)=>{if(k.button!==0||(k.stopPropagation(),!c.current))return;N(I);const J=oe(k.clientX,k.clientY),ne=xe.find(Se=>Se.id===I);ne&&(k.currentTarget.setPointerCapture(k.pointerId),m({kind:"move",moduleId:I,dx:J.x-ne.x,dy:J.y-ne.y}))},Zt=(k,I)=>{if(k.button!==0)return;k.stopPropagation();const U=xe.find(Se=>Se.id===I);if(!U)return;const J=U.width??240,ne=oe(k.clientX,k.clientY);k.currentTarget.setPointerCapture(k.pointerId),m({kind:"resize",moduleId:I,startX:ne.x,startWidth:J})},Ke=k=>{const I=k.width??220,U=p.current.get(O(k.id)),J=U?U.getBoundingClientRect().height/W:220;return{width:I,height:J}},gn=(k,I,U,J)=>{const Se=xe.map(De=>{const at=Ke(De);return{x:De.x,y:De.y,w:at.width,h:at.height}}),Ye=(De,at)=>!Se.some(st=>De<st.x+st.w+16&&De+U+16>st.x&&at<st.y+st.h+16&&at+J+16>st.y),He=40,ct=20,Mt=De=>Math.max(0,Math.min(pl-U,De)),rt=De=>Math.max(0,Math.min(hl-J,De));for(let De=0;De<=ct;De+=1)for(let at=-De;at<=De;at+=1)for(let st=-De;st<=De;st+=1){if(De>0&&Math.abs(at)!==De&&Math.abs(st)!==De)continue;const It=Mt(k+at*He),tt=rt(I+st*He);if(Ye(It,tt))return{x:It,y:tt}}return{x:Mt(k),y:rt(I)}},Nt=k=>{if(k.button!==0)return;const I=o.current;if(!I)return;const U=k.target;if(U.closest(".synth-module")||U.closest(".synth-toolbar-panel"))return;le.visible&&de(ne=>({...ne,visible:!1})),x(null),N(null),k.currentTarget.setPointerCapture(k.pointerId);const J=oe(k.clientX,k.clientY);m({kind:"pan",startX:J.x,startY:J.y,scrollLeft:I.scrollLeft,scrollTop:I.scrollTop})},jt=(k,I,U,J)=>{if(k.stopPropagation(),k.button!==0||J!=="out")return;const ne=oe(k.clientX,k.clientY);k.currentTarget.setPointerCapture(k.pointerId),m({kind:"cable",from:{moduleId:I,portId:U},x:ne.x,y:ne.y})},en=(k,I,U,J)=>{if(k.stopPropagation(),h.kind!=="cable"||J!=="in")return;const ne=h.from,Se={moduleId:I,portId:U};if(ne.moduleId===Se.moduleId&&ne.portId===Se.portId){ot();return}ae(Ye=>[...Ye,{id:da(),from:ne,to:Se}]),ot()},Or=k=>{ae(I=>I.filter(U=>U.id!==k)),x(I=>I===k?null:I)},$=()=>{w&&(K(k=>k.filter(I=>I.id!==w)),ae(k=>k.filter(I=>I.from.moduleId!==w&&I.to.moduleId!==w)),N(null))},we=()=>{if(!w)return;const k=xe.find(I=>I.id===w);k&&(Ve.current={...k,params:{...k.params}})},Ge=()=>{const k=Ve.current;if(!k)return;Re.current&&(window.cancelAnimationFrame(Re.current),Re.current=null,he.current=null);const I=k.type,U=Ad(I,xe),J=`${I}${U}`,ne=Ke(k),Se=gn(k.x+40,k.y+40,ne.width,ne.height),Ye={...k,id:J,x:Se.x,y:Se.y,params:{...k.params}};K(He=>[...He,Ye]),Z(He=>({...He,[I]:U})),N(J),S(He=>He+1)};v.useEffect(()=>{const k=I=>{if(I.key!=="Delete"&&I.key!=="Backspace"||!w)return;const U=I.target,J=U?.tagName?.toLowerCase();J==="input"||J==="textarea"||U?.isContentEditable||(I.preventDefault(),$())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[w,$]),v.useEffect(()=>{const k=I=>{const U=I.target,J=U?.tagName?.toLowerCase();J==="input"||J==="textarea"||U?.isContentEditable||!(I.metaKey||I.ctrlKey)||(I.key.toLowerCase()==="c"&&(I.preventDefault(),we()),I.key.toLowerCase()==="v"&&(I.preventDefault(),Ge()))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[xe,Q,w]);const Ue=k=>{const I=o.current,U=Ad(k,xe),J=`${k}${U}`,ne=Ar[k],Se={};ne.params.forEach(at=>{Se[at.id]=at.defaultValue});const Ye=I?.scrollLeft??0,He=I?.scrollTop??0,ct=I?.clientWidth??800,Mt=I?.clientHeight??600,rt=Ye/W+ct/(2*W)-100+U%3*30,De=He/W+Mt/(2*W)-80+U%4*24;K(at=>[...at,{id:J,type:ne.type,x:rt,y:De,width:220,collapsed:!0,params:Se}]),Z(at=>({...at,[k]:U})),N(J),Ct({anchorId:J})},wt=()=>{const k=i.current;k&&(document.fullscreenElement?document.exitFullscreen().catch(()=>{}):k.requestFullscreen().catch(()=>{}))},tn=()=>{const k=o.current;if(!k||xe.length===0)return;let I=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,ne=Number.NEGATIVE_INFINITY;for(const De of xe){const at=p.current.get(O(De.id)),st=De.width??240,It=at?at.getBoundingClientRect().height/W:180;I=Math.min(I,De.x),U=Math.min(U,De.y),J=Math.max(J,De.x+st),ne=Math.max(ne,De.y+It)}if(!Number.isFinite(I)||!Number.isFinite(U))return;const Se=(I+J)/2,Ye=(U+ne)/2,He=Se*W-k.clientWidth/2,ct=Ye*W-k.clientHeight/2,Mt=Math.max(0,pl*W-k.clientWidth),rt=Math.max(0,hl*W-k.clientHeight);k.scrollLeft=Math.max(0,Math.min(Mt,He)),k.scrollTop=Math.max(0,Math.min(rt,ct))},Sn=()=>{const k=Od(),I=Vd();Re.current&&(window.cancelAnimationFrame(Re.current),Re.current=null),K(k),ae(I),Z(ml(k)),L(null),N(null),x(null),Ne.current=!1,P(1),S(U=>U+1),requestAnimationFrame(()=>{const U=o.current;U&&(U.scrollLeft=0,U.scrollTop=0)})},Qt=()=>{K(k=>k.map(I=>({...I,collapsed:!0}))),Ct()},zt=()=>{K(k=>k.map(I=>({...I,collapsed:!1}))),Ct()},Cn=v.useMemo(()=>{const k=[];for(const I of ce){const U=Fe(I.from.moduleId,I.from.portId),J=Fe(I.to.moduleId,I.to.portId);if(!U||!J)continue;const ne=Math.max(40,Math.abs(J.x-U.x)*.5),Se={x:U.x+ne,y:U.y},Ye={x:J.x-ne,y:J.y},He=`M ${U.x} ${U.y} C ${Se.x} ${Se.y} ${Ye.x} ${Ye.y} ${J.x} ${J.y}`;k.push({id:I.id,d:He})}return k},[ce,xe,j]),Mn=v.useMemo(()=>{if(h.kind!=="cable")return null;const k=Fe(h.from.moduleId,h.from.portId);if(!k)return null;const I={x:h.x,y:h.y},U=Math.max(40,Math.abs(I.x-k.x)*.5),J={x:k.x+U,y:k.y},ne={x:I.x-U,y:I.y};return`M ${k.x} ${k.y} C ${J.x} ${J.y} ${ne.x} ${ne.y} ${I.x} ${I.y}`},[h,xe,j]);v.useEffect(()=>()=>{fe.current?.dispose(),fe.current=null,se.current?.close().catch(()=>{}),se.current=null},[]);const un=E.find(k=>k.id===_)??null;return s.jsx("div",{className:"synth-root","data-theme":ee,children:s.jsxs("div",{ref:i,className:`synth-page ${ue?"is-fullscreen":""}`,children:[s.jsxs("div",{className:"synth-header",children:[s.jsxs("div",{className:"synth-title",children:[r?s.jsx(jn,{to:"/playground",className:"synth-link",children:" Back to Playground"}):null,s.jsx("h1",{children:"Modular Synth Playground"}),s.jsx("p",{children:"Patch audio-rate gates, envelopes, and CV with drag-to-connect cables. Works best in fullscreen."}),s.jsxs("div",{className:"synth-tabs-row",children:[s.jsx("span",{className:"synth-tabs-label",children:"Presets"}),s.jsxs("select",{className:"synth-select",value:_??"",onChange:k=>qe(k.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Select a preset"}),s.jsx("optgroup",{label:"Built-in",children:zd.map(k=>s.jsx("option",{value:k.id,children:k.label},k.id))}),s.jsxs("optgroup",{label:"My Presets",children:[E.length===0?s.jsx("option",{value:"",disabled:!0,children:"(none yet)"}):null,E.map(k=>s.jsx("option",{value:k.id,children:k.label},k.id))]})]}),s.jsx("button",{className:"synth-button",type:"button",onClick:Rt,children:"Save"}),s.jsx("button",{className:"synth-button",type:"button",onClick:nt,disabled:!un,children:"Duplicate"}),s.jsx("button",{className:"synth-button",type:"button",onClick:G,disabled:!un,children:"Rename"}),s.jsx("button",{className:"synth-button",type:"button",onClick:Je,disabled:!un,children:"Delete"}),s.jsx("button",{className:"synth-button",type:"button",onClick:et,children:"Export"}),s.jsx("button",{className:"synth-button",type:"button",onClick:Te,children:"Import"}),s.jsx("button",{className:"synth-button",type:"button",onClick:Bt,children:"Copy JSON"}),null,s.jsx("input",{ref:ve,type:"file",accept:"application/json",onChange:Be,style:{display:"none"}})]})]}),s.jsxs("div",{className:"synth-toolbar",children:[Ae?s.jsx("button",{className:"synth-button is-muted",type:"button",children:"Audio Enabled"}):s.jsx("button",{className:"synth-button is-primary",onClick:vt,children:"Enable Audio"}),s.jsxs("button",{className:"synth-button",type:"button",onClick:()=>me(k=>k==="dark"?"light":"dark"),children:["Theme: ",ee==="dark"?"Dark":"Light"]}),s.jsx("button",{className:"synth-button",type:"button",onClick:Sn,children:"Reset Layout"}),s.jsx("button",{className:"synth-button",type:"button",onClick:Qt,children:"Collapse All"}),s.jsx("button",{className:"synth-button",type:"button",onClick:zt,children:"Expand All"}),s.jsx("button",{className:"synth-button",type:"button",onClick:()=>P(k=>Math.max(.6,Number((k-.1).toFixed(2)))),children:"Zoom -"}),s.jsx("button",{className:"synth-button",type:"button",onClick:()=>P(k=>Math.min(1.4,Number((k+.1).toFixed(2)))),children:"Zoom +"}),s.jsxs("button",{className:"synth-button is-muted",type:"button",onClick:()=>P(1),children:[Math.round(M*100),"%"]}),s.jsx("button",{className:"synth-button",type:"button",onClick:wt,children:ue?"Exit Fullscreen":"Fullscreen"})]})]}),s.jsxs("div",{className:"synth-workspace",children:[s.jsxs("div",{ref:o,className:"synth-canvas",onPointerMove:Kt,onPointerUp:ot,onPointerCancel:ot,onPointerLeave:ot,onPointerDown:Nt,onContextMenu:mt,onContextMenuCapture:mt,children:[s.jsx("div",{ref:c,className:"synth-surface",style:{width:`${pl*W}px`,height:`${hl*W}px`},children:s.jsxs("div",{ref:u,className:"synth-surface-inner",style:{transform:`scale(${W})`},children:[s.jsx("div",{className:"synth-grid"}),s.jsx("div",{className:"synth-layer-cables",children:s.jsxs("svg",{width:"100%",height:"100%",style:{pointerEvents:"none"},children:[Cn.map(k=>s.jsx("path",{d:k.d,className:k.id===y?"synth-cable synth-cable-selected":"synth-cable"},k.id)),Mn?s.jsx("path",{d:Mn,className:"synth-cable",style:{opacity:.4}}):null]})}),xe.map(k=>s.jsx(G0,{model:k,isSelected:k.id===w,engine:fe.current,onModulePointerDown:Tt,onResizePointerDown:Zt,moduleRefs:p.current,moduleKey:O,onToggleCollapse:()=>{K(I=>I.map(U=>U.id===k.id?{...U,collapsed:!U.collapsed}:U)),Ct()},onParamChange:(I,U)=>K(J=>J.map(ne=>ne.id===k.id?{...ne,params:{...ne.params,[I]:U}}:ne)),portRefs:f.current,portKey:T,onPortPointerDown:jt,onPortPointerUp:en},k.id)),s.jsx("div",{className:"synth-layer-hit",children:Cn.map(k=>s.jsx("svg",{width:"100%",height:"100%",style:{position:"absolute",inset:0,pointerEvents:"none"},children:s.jsx("path",{d:k.d,fill:"none",stroke:"transparent",strokeWidth:22,style:{cursor:"pointer",pointerEvents:"stroke"},onPointerDown:I=>{if(I.stopPropagation(),I.button===0){if(y===k.id){Or(k.id);return}x(k.id)}}})},`${k.id}-hit`))})]})}),le.visible&&ue?s.jsxs("div",{className:"synth-context-menu",style:{left:le.x,top:le.y},onPointerDown:k=>k.stopPropagation(),onPointerUp:k=>k.stopPropagation(),children:[s.jsx("div",{className:"synth-context-title",children:"Add module"}),s.jsx("div",{className:"synth-context-list",children:Object.values(Ar).map(k=>s.jsxs("button",{type:"button",className:"synth-context-item",onClick:()=>{Ue(k.type),de(I=>({...I,visible:!1}))},children:[s.jsx("span",{children:k.title}),s.jsx("em",{children:Nl[k.type]})]},k.type))})]}):null]}),s.jsxs("div",{className:"synth-toolbar-panel",children:[s.jsxs("div",{className:"synth-toolbar-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Modules"}),s.jsx("p",{children:"Add or remove modules."})]}),s.jsx("button",{className:`synth-button ${w?"":"is-disabled"}`,type:"button",onClick:$,disabled:!w,children:"Remove"})]}),s.jsx("div",{className:"synth-module-grid",children:Object.values(Ar).map(k=>s.jsxs("button",{className:"synth-module-card",type:"button",onClick:()=>Ue(k.type),children:[s.jsxs("div",{children:[s.jsx("h3",{children:k.title}),s.jsx("p",{children:Nl[k.type]})]}),s.jsx("span",{className:"synth-add",children:"+ Add"})]},k.type))})]})]}),je?s.jsx("div",{className:"synth-toast",children:je}):null,s.jsxs("div",{className:"synth-footer",children:[s.jsx("span",{className:"synth-pill",children:"Keys: a w s e d f t g y h u j k (z/x octave)"}),s.jsxs("span",{className:"synth-pill",children:["Octave: ",B>=0?`+${B}`:B]}),s.jsx("span",{className:"synth-pill",children:"Click a cable to select, click again to delete."}),s.jsx("span",{className:"synth-pill",children:"Drag the grid to pan; scroll to navigate."})]}),ue?null:s.jsxs("div",{className:"synth-glossary",children:[s.jsx("h2",{children:"Glossary"}),s.jsxs("dl",{children:[s.jsx("dt",{children:"CV"}),s.jsx("dd",{children:"Control voltage; a modulation signal used to control parameters."}),s.jsx("dt",{children:"Gate"}),s.jsx("dd",{children:"On/off control signal (0 or 1) used to trigger events like envelopes."}),s.jsx("dt",{children:"ADSR"}),s.jsx("dd",{children:"Envelope stages: Attack, Decay, Sustain, Release."}),s.jsx("dt",{children:"VCA"}),s.jsx("dd",{children:"Voltage-controlled amplifier; scales audio level via CV."}),s.jsx("dt",{children:"LFO"}),s.jsx("dd",{children:"Low-frequency oscillator used for modulation."}),s.jsx("dt",{children:"Clock"}),s.jsx("dd",{children:"Timing pulse signal for sequencing or arpeggiation."}),s.jsx("dt",{children:"FM"}),s.jsx("dd",{children:"Frequency modulation; changing pitch with an audio-rate signal."}),s.jsx("dt",{children:"Q/Resonance"}),s.jsx("dd",{children:"Filter resonance; emphasis around the cutoff frequency."}),s.jsx("dt",{children:"Mix"}),s.jsx("dd",{children:"Wet/dry balance between processed and original signal."})]})]})]})})}function G0(r){const i=Ar[r.model.type],o=r.model.width??240;return s.jsxs("div",{className:`synth-module ${r.isSelected?"is-selected":""}`,ref:c=>{c?r.moduleRefs.set(r.moduleKey(r.model.id),c):r.moduleRefs.delete(r.moduleKey(r.model.id))},style:{left:r.model.x,top:r.model.y,width:o},children:[s.jsxs("div",{className:"synth-module-header",onPointerDown:c=>r.onModulePointerDown(c,r.model.id),children:[s.jsx("strong",{title:Nl[i.type],children:i.title}),s.jsxs("div",{className:"synth-module-actions",children:[s.jsx("button",{className:"synth-module-toggle",type:"button",onPointerDown:c=>{c.stopPropagation()},onClick:r.onToggleCollapse,children:r.model.collapsed?"Expand":"Collapse"}),s.jsx("span",{children:r.model.id})]})]}),s.jsxs("div",{className:"synth-module-body",children:[r.model.type==="scope"?s.jsxs("div",{className:"synth-scope-block",children:[s.jsx(W0,{engine:r.engine,moduleId:r.model.id,view:r.model.params.view??0}),s.jsxs("div",{className:"synth-scope-controls",children:[s.jsx("button",{className:"synth-button synth-button--mini",type:"button",onClick:()=>r.onParamChange("view",(r.model.params.view??0)>=.5?0:1),children:(r.model.params.view??0)>=.5?"FFT":"TIME"}),s.jsx("button",{className:"synth-button synth-button--mini",type:"button",onClick:()=>r.onParamChange("thru",(r.model.params.thru??1)>=.5?0:1),children:(r.model.params.thru??1)>=.5?"INLINE":"TAP"})]})]}):null,s.jsxs("div",{className:"synth-ports",children:[s.jsxs("div",{className:"synth-port-group",children:[s.jsx("div",{className:"synth-port-label",children:"Inputs"}),i.inputs.map(c=>s.jsx(_d,{label:c.name,dir:"in",register:u=>{u?r.portRefs.set(r.portKey(r.model.id,c.id),u):r.portRefs.delete(r.portKey(r.model.id,c.id))},onDown:u=>r.onPortPointerDown(u,r.model.id,c.id,"in"),onUp:u=>r.onPortPointerUp(u,r.model.id,c.id,"in")},c.id))]}),s.jsxs("div",{className:"synth-port-group",children:[s.jsx("div",{className:"synth-port-label",children:"Outputs"}),i.outputs.map(c=>s.jsx(_d,{label:c.name,dir:"out",register:u=>{u?r.portRefs.set(r.portKey(r.model.id,c.id),u):r.portRefs.delete(r.portKey(r.model.id,c.id))},onDown:u=>r.onPortPointerDown(u,r.model.id,c.id,"out"),onUp:u=>r.onPortPointerUp(u,r.model.id,c.id,"out")},c.id))]})]}),r.model.collapsed?null:s.jsx("div",{className:"synth-controls",children:i.params.map(c=>{const u=r.model.params[c.id]??c.defaultValue;return F0.has(c.id)?s.jsx(q0,{label:c.label,min:c.min,max:c.max,step:c.step,value:u,defaultValue:c.defaultValue,onChange:p=>r.onParamChange(c.id,p)},c.id):s.jsx($0,{label:c.label,min:c.min,max:c.max,step:c.step,value:u,defaultValue:c.defaultValue,onChange:p=>r.onParamChange(c.id,p)},c.id)})})]}),s.jsx("div",{className:"synth-resize-handle",role:"presentation",onPointerDown:c=>r.onResizePointerDown(c,r.model.id)})]})}function _d(r){return s.jsxs("div",{className:"synth-port",children:[r.dir==="in"?s.jsx("div",{ref:r.register,onPointerDown:r.onDown,onPointerUp:r.onUp,title:"Input",className:"synth-port-dot"}):null,s.jsx("span",{children:r.label}),r.dir==="out"?s.jsx("div",{ref:r.register,onPointerDown:r.onDown,onPointerUp:r.onUp,title:"Output",className:"synth-port-dot is-out",style:{marginLeft:"auto"}}):null]})}function $0(r){const i=o=>{o.stopPropagation(),r.onChange(r.defaultValue)};return s.jsxs("label",{className:"synth-control",onDoubleClick:i,children:[s.jsxs("div",{className:"synth-control-header",children:[s.jsx("span",{children:r.label}),s.jsx("input",{className:"synth-value-input",type:"number",min:r.min,max:r.max,step:r.step,value:Number.isFinite(r.value)?r.value:"",onPointerDown:o=>o.stopPropagation(),onDoubleClick:i,onChange:o=>r.onChange(Number(o.target.value))})]}),s.jsx("input",{className:"synth-range",type:"range",min:r.min,max:r.max,step:r.step,value:r.value,onPointerDown:o=>o.stopPropagation(),onDoubleClick:i,onChange:o=>r.onChange(Number(o.target.value))})]})}function W0(r){const i=v.useRef(null),o=r.engine?r.engine.getAnalyser(r.moduleId):null,c=v.useRef(null),u=v.useRef(null);return v.useEffect(()=>{let f=0;const p=()=>{const h=i.current;if(!h){f=requestAnimationFrame(p);return}const m=h.getContext("2d");if(!m){f=requestAnimationFrame(p);return}const y=o,x=h.clientWidth,w=h.clientHeight,N=window.devicePixelRatio||1,j=Math.max(1,Math.floor(x*N)),S=Math.max(1,Math.floor(w*N));if((h.width!==j||h.height!==S)&&(h.width=j,h.height=S),m.clearRect(0,0,j,S),m.lineWidth=1,m.strokeStyle="rgba(148,163,184,0.35)",m.strokeRect(.5,.5,j-1,S-1),!y){m.fillStyle="rgba(226,232,240,0.8)",m.font=`${Math.max(10,Math.floor(12*N))}px sans-serif`,m.fillText("No signal",Math.floor(10*N),Math.floor(18*N)),f=requestAnimationFrame(p);return}if(r.view>=.5){const M=y.frequencyBinCount;(!u.current||u.current.length!==M)&&(u.current=new Uint8Array(M));const P=u.current;y.getByteFrequencyData(P);const B=j/M;m.fillStyle="rgba(56,189,248,0.7)";for(let F=0;F<M;F+=1){const _=P[F]/255,L=Math.max(1,Math.floor(_*(S-2)));m.fillRect(Math.floor(F*B),S-1-L,Math.max(1,Math.ceil(B)),L)}}else{const M=y.fftSize;(!c.current||c.current.length!==M)&&(c.current=new Float32Array(M));const P=c.current;y.getFloatTimeDomainData(P),m.strokeStyle="rgba(226,232,240,0.9)",m.beginPath();const B=S/2;for(let F=0;F<M;F+=1){const _=F/(M-1)*(j-1),L=B-P[F]*(B-2);F===0?m.moveTo(_,L):m.lineTo(_,L)}m.stroke()}f=requestAnimationFrame(p)};return f=requestAnimationFrame(p),()=>cancelAnimationFrame(f)},[o,r.view]),s.jsx("div",{className:"synth-scope",children:s.jsx("canvas",{ref:i,className:"synth-scope-canvas"})})}function q0(r){const i=v.useRef(null),o=r.max-r.min,u=(o>0?(r.value-r.min)/o:0)*270-135,f=y=>{y.stopPropagation(),r.onChange(r.defaultValue)},p=y=>{y.preventDefault(),y.stopPropagation(),y.currentTarget.setPointerCapture(y.pointerId),i.current={startY:y.clientY,startValue:r.value}},h=y=>{if(!i.current)return;const x=i.current.startY-y.clientY,w=i.current.startValue+x*(o/140),N=Math.min(r.max,Math.max(r.min,w));r.onChange(H0(N,r.step))},m=()=>{i.current=null};return s.jsxs("div",{className:"synth-knob",children:[s.jsxs("div",{className:"synth-control-header",style:{width:"100%"},children:[s.jsx("span",{children:r.label}),s.jsx("input",{className:"synth-value-input",type:"number",min:r.min,max:r.max,step:r.step,value:Number.isFinite(r.value)?r.value:"",onPointerDown:y=>y.stopPropagation(),onDoubleClick:f,onChange:y=>r.onChange(Number(y.target.value))})]}),s.jsx("div",{className:"synth-knob-core",role:"slider","aria-valuemin":r.min,"aria-valuemax":r.max,"aria-valuenow":r.value,onPointerDown:p,onPointerMove:h,onPointerUp:m,onPointerLeave:m,onDoubleClick:f,children:s.jsx("div",{className:"synth-knob-indicator",style:{transform:`rotate(${u}deg)`}})})]})}function Od(){return[{id:"kbd1",type:"keyboard",x:20,y:20,width:220,collapsed:!0,params:{pitchHz:110,glideMs:0,gate:0,trigMs:10}},{id:"osc1",type:"osc",x:320,y:20,width:220,collapsed:!0,params:{baseHz:110,pitchAmt:1,fmDepthHz:0,level:.2,wave:1}},{id:"flt1",type:"filter",x:620,y:20,width:220,collapsed:!0,params:{cutoff:1200,cutoffDepthHz:0,q:.7}},{id:"env1",type:"adsr",x:320,y:360,width:220,collapsed:!0,params:{attack:.01,decay:.15,sustain:.6,release:.2}},{id:"vca1",type:"vca",x:620,y:360,width:220,collapsed:!0,params:{bias:0,cvDepth:1}},{id:"out1",type:"output",x:920,y:280,width:220,collapsed:!0,params:{vol:.7}},{id:"lfo1",type:"lfo",x:20,y:360,width:220,collapsed:!0,params:{rate:4,depth:1,wave:0}},{id:"scp1",type:"scope",x:920,y:20,width:240,collapsed:!0,params:{thru:0,view:0,fftSize:2048,smoothing:.85,minDb:-90,maxDb:-10}}]}function Vd(){return[{id:"c1",from:{moduleId:"kbd1",portId:"pitch"},to:{moduleId:"osc1",portId:"pitch"}},{id:"c2",from:{moduleId:"kbd1",portId:"gate"},to:{moduleId:"env1",portId:"gate"}},{id:"c3",from:{moduleId:"env1",portId:"env"},to:{moduleId:"vca1",portId:"cv"}},{id:"c4",from:{moduleId:"osc1",portId:"out"},to:{moduleId:"flt1",portId:"in"}},{id:"c5",from:{moduleId:"flt1",portId:"out"},to:{moduleId:"vca1",portId:"in"}},{id:"c6",from:{moduleId:"vca1",portId:"out"},to:{moduleId:"out1",portId:"in"}},{id:"c7",from:{moduleId:"lfo1",portId:"out"},to:{moduleId:"flt1",portId:"cutoffCv"}},{id:"c_scope",from:{moduleId:"vca1",portId:"out"},to:{moduleId:"scp1",portId:"in"}}]}const K0=()=>{const{id:r}=Jd(),i=df.find(p=>p.id===r),o=v.useRef(null),[c,u]=v.useState(!1);v.useEffect(()=>{const p=()=>{u(document.fullscreenElement===o.current)};return document.addEventListener("fullscreenchange",p),()=>document.removeEventListener("fullscreenchange",p)},[]);const f=async()=>{if(o.current)try{document.fullscreenElement?await document.exitFullscreen():await o.current.requestFullscreen()}catch(p){console.error("Fullscreen request failed",p)}};return i?i.id==="modular-synth"?s.jsx(xf,{embedded:!0}):i.id==="dungeon-designer"?s.jsx(A0,{}):s.jsxs("div",{className:"max-w-5xl mx-auto px-6 pb-24 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"mb-10",children:[s.jsxs(jn,{to:"/playground",className:"inline-flex items-center gap-2 text-sm text-neutral-200 hover:text-white px-3 py-2 rounded-full border border-neutral-800/70 bg-neutral-900/30 hover:border-neutral-600",children:[s.jsx("span",{"aria-hidden":"true",children:""}),s.jsx("span",{children:"Back to Playground"})]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mt-4",children:i.title}),s.jsx("p",{className:"text-neutral-300 mt-3 max-w-2xl",children:i.description})]}),i.id==="halftone-loop"?s.jsx(Zm,{}):i.id==="location-pulse"?s.jsx(f0,{}):i.id==="publications-explorer"?s.jsx(k0,{}):i.embedPath?i.id==="cellular-automata"?s.jsxs("div",{ref:o,className:`border border-neutral-800/70 rounded-xl overflow-hidden bg-neutral-900/30 flex flex-col min-h-0 relative ${c?"bg-neutral-950 h-full":""}`,children:[s.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b border-neutral-800/70 ${c?"absolute top-3 left-3 right-3 z-10 rounded-full border border-neutral-800 bg-neutral-950/80 backdrop-blur":""}`,children:[s.jsx("span",{className:"text-xs uppercase tracking-wider text-neutral-400",children:"Visualizer"}),s.jsx("button",{className:"text-xs uppercase tracking-wider px-3 py-1 rounded-full border border-neutral-800 text-neutral-300 hover:text-white",onClick:f,children:c?"Exit fullscreen":"Fullscreen"})]}),s.jsx("iframe",{title:i.title,src:i.embedPath,className:`w-full border-0 min-h-0 ${c?"flex-1":"h-[80vh] md:h-[85vh]"}`,loading:"lazy",sandbox:"allow-scripts allow-same-origin",allowFullScreen:!0})]}):s.jsx("div",{className:"border border-neutral-800/70 rounded-xl overflow-hidden bg-neutral-900/30",children:s.jsx("iframe",{title:i.title,src:i.embedPath,className:"w-full h-[80vh] md:h-[85vh] border-0",loading:"lazy",sandbox:"allow-scripts allow-same-origin"})}):s.jsx("div",{className:"border border-neutral-800/70 rounded-xl p-8 bg-neutral-900/30 text-neutral-300",children:s.jsxs("p",{children:["This is a placeholder area for the ",i.title," experience. We can embed the visualizer here once the separate implementation is ready."]})})]}):s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-neutral-200",children:"Playground Item Not Found"}),s.jsx(jn,{to:"/playground",className:"text-neutral-300 hover:text-white",children:"Back to Playground"})]})},Q0=()=>{try{return window.location.protocol==="blob:"}catch{return!0}},J0=()=>{const r=Q0()?rm:pm;return s.jsx(r,{children:s.jsx(Em,{children:s.jsx(v.Suspense,{fallback:s.jsx("div",{className:"flex h-screen items-center justify-center text-neutral-500",children:"Loading..."}),children:s.jsxs(sm,{children:[s.jsx(Un,{path:"/",element:s.jsx(_m,{})}),s.jsx(Un,{path:"/cv",element:s.jsx(Om,{})}),s.jsx(Un,{path:"/research",element:s.jsx(Vm,{})}),s.jsx(Un,{path:"/research/:id",element:s.jsx(Fm,{})}),s.jsx(Un,{path:"/news",element:s.jsx(Bm,{})}),s.jsx(Un,{path:"/playground",element:s.jsx(Ym,{})}),s.jsx(Un,{path:"/playground/:id",element:s.jsx(K0,{})}),s.jsx(Un,{path:"/synth",element:s.jsx(xf,{})}),s.jsx(Un,{path:"*",element:s.jsx(am,{to:"/",replace:!0})})]})})})})},yf=document.getElementById("root");if(!yf)throw new Error("Could not find root element to mount to");const Y0=ph.createRoot(yf);Y0.render(s.jsx(Bd.StrictMode,{children:s.jsx(J0,{})}));
